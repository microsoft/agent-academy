<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "66d1f5ea2cc33dc690a5fc4a8e2a666e",
  "translation_date": "2025-10-18T03:18:52+00:00",
  "source_file": "docs/operative-preview/04-agent-instructions/README.md",
  "language_code": "ja"
}
-->
# 🕵️‍♂️ ミッション 04: エージェント指示の作成

--8<-- "disclaimer.md"

## 🕵️‍♂️ コードネーム: `OPERATION SECRET DIRECTIVE`

> **⏱️ 作戦時間枠:** `~45分`

## 🎯 ミッション概要

エージェントの皆さん、次の任務は **Operation Secret Directive** です。これは、正確な指示と説明を通じてエージェントとのコミュニケーションとコントロールの技術を習得することを目的としています。

この任務を受け入れる場合、エージェントが賢明な判断を下し、適切なツールや知識源を活用し、他のエージェントと円滑に協力するための明確で実行可能な指示を書く重要なスキルを学びます。また、エージェントがリソースを理解し、ユーザーの質問に対して的確に応答するための高品質な説明を作成する技術も習得します。

これは、エージェント心理学と行動修正の高度なトレーニングと考えてください。現場の工作員が成功するために明確な任務のパラメータを必要とするのと同様に、AIエージェントも現実世界のシナリオで明確さ、正確さを持って価値ある情報を提供するために、専門的に作成された指示が必要です。

---

## 🔎 目標

このミッションを完了することで、以下を達成します:

- **指示の習得**: Copilot Studioでエージェント指示を書く技術と科学を理解する  
- **戦略的指導**: エージェントがツール、知識源を活用し、他のエージェントと協力する方法を学ぶ  
- **運用の明確化**: エージェントが正確、透明、効率的に行動することを保証する  

---

## 📝 エージェント指示の作成

効果的なエージェント指示を書くことは、エージェントの行動を成功させる鍵です。指示はエージェントが以下を行うために使用されます:

- ユーザーの質問や自律的なトリガーに対して、どのツール、トピック、知識源を使用するかを決定する  
- 利用可能なコンテキストに基づいてツールの入力を埋める  
- エンドユーザーへの応答を生成する  

### 指示の仕組み

指示は、エージェントに設定されたツール、トピック、知識源に基づいていなければなりません。エージェントは、持っていないリソースに関する指示に基づいて行動することはできません。例えば、エージェントにウェブサイトのFAQを検索するよう指示する場合、そのFAQを知識源として追加する必要があります。

指示内で `/` を使用して、特定のツール、トピック、変数、または Power Fx 式を参照することができます。これにより、エージェントは何をいつ使用すべきかを正確に理解できます。

### 指示に含めるべき内容

- 曖昧さが生じる可能性がある場合、特にエージェントの選択を導くための指示を追加する  
- トピックを制限したり、応答形式を指定したりするなど、ガードレールを設定するために指示を使用する  
- ツールの入力を埋めるためのヒントを与える。例:「ユーザーがメールを作成する際には、リードの連絡先フィールドからメールアドレスを使用してください。」  
- 応答の形式を指定する。例:「注文状況に関する応答は常に表形式で提供してください。」  
- エージェントの行動を制限するための制約を使用する。例:「従業員の福利厚生に関するリクエストにのみ応答してください。」  

### 実践例

- 「質問が営業時間、予約、請求に関連していない場合のみFAQ文書を使用してください。」  
- 「チケット作成トピックはチケット作成にのみ使用してください。他の問題解決に関連するリクエストにはトラブルシューティングトピックを使用してください。」  
- 「注文状況に関する応答は常に表形式で提供してください。」  

### テストと改善

- 指示を編集した後、テストペインを使用してエージェントの動作を検証する  
- 必要に応じて変更を更新し、公開する  

### 高度な指導

- 指示を番号や箇条書きでリスト化し、順番通りに従う必要があることを明示する  
- 読みやすさを向上させ、生成AIが指示を処理しやすくするためにMarkdown形式を使用する  
- エージェントに非常に具体的な指示を与えたい場合、そのユースケース専用のトピックを作成することを検討する  
- 指示内でツールやトピックの正確な名前を使用して混乱を避ける  

### 安全性とモデレーション

- 知識源を参照する際にエージェントが使用すべきツールを制限する  
- ツールに使用すべきパラメータを制限する（例: 特定の個人リストにのみメールを送信する）  
- 不適切な行動やコンテンツフィルタリングの問題を防ぐために指示を使用する  

---

## ✍️ ツール、トピック、エージェントの説明作成

高品質な説明は生成オーケストレーションにおいて重要です。エージェントはこれらの説明を使用して、ユーザーの質問やトリガーに応答するための適切なツール、トピック、エージェントを選択します。以下のベストプラクティスに従ってください:

- **簡潔で直接的な言葉を使用する**: 専門用語、スラング、過度に技術的な用語を避ける。能動態と現在形で記述する  
- **具体的で関連性のある内容を記載する**: 機能やユーザーの意図に関連するキーワードを含める。同様のツールやトピックを明確に区別する説明を記載し、曖昧さを避ける  
- **短く情報量の多い説明を心がける**: 説明は1～2文に制限する。ツール、トピック、エージェントが何をするのか、ユーザーにどのように役立つのかを要約する  
- **ユニークで説明的な名前を使用する**: 一般的な名前を避ける。例: 「明日の天気予報」ではなく「天気」とする  
- **アクションや考慮事項をリスト化する**: 複数の機能や手順を説明する際には、箇条書きや番号付きリストを使用して明確にする  
- **重複をテストする**: 複数のトピックが似た説明を持つ場合、エージェントがすべてを呼び出す可能性がある。重複を防ぐためにテストと修正を行う  

!!! example "良い説明と悪い説明の例"
    **良い例:** このトピックは、世界中の任意の場所の翌日の天気情報を提供します。気温を提供しますが、今日の現在の天気は取得しません。  
    **悪い例:** このツールは質問に答えることができます。 *(曖昧すぎる)*  

---

## 🛠️ 指示と説明のベストプラクティス

指示と説明を真に効果的にするために、以下の原則を念頭に置いてください:

- 能動態と現在形を使用する（例:「このツールは天気情報を提供します」）  
- 必要でない限り、専門用語、スラング、または不要な技術用語を避ける  
- アクション、機能、考慮事項を分けるために箇条書きや番号付きリストを使用する  
- ユーザーの意図とツールやトピックの機能に一致するキーワードを含める  
- 混乱や重複を避けるために、類似したリソースには明確な名前と説明を付ける  

---

## 🗂️ 指示構造の例

指示を書く際には、以下の構造を考慮して明確かつ完全な内容を目指してください:

1. **概要**: エージェントの任務と役割を簡潔に説明する  
1. **プロセスの手順**: エージェントが従うべき主要な手順をリスト化する  
1. **協力ポイント**: 他のエージェントを呼び出すタイミングや特定のツールを使用するタイミングを示す  
1. **安全性とモデレーション**: コンプライアンスや安全要件を含める  
1. **フィードバックループ**: エージェントがフィードバックを収集したり問題をエスカレーションする方法を指定する  

---

## 🧪 ラボ: エージェント指示の作成

*ラボ内容は近日公開予定...*

---

## 🎉 ミッション完了

ミッション 04 が完了しました！以下を達成しました:

✅ **指示の習得**: 明確で実行可能なエージェント指示を書く方法を学びました  
✅ **戦略的指導**: エージェントがツールを使用し、効果的に協力する方法を指導しました  
✅ **運用の明確化**: エージェントが正確かつ透明性を持って行動することを保証しました  

次は [ミッション 05](../05-agent-responses/README.md): 最大の効果を発揮するエージェント応答のカスタマイズです。

---

## 📚 戦術的リソース

📖 [Microsoft Copilot Studio - 指示の作成](https://learn.microsoft.com/microsoft-copilot-studio/authoring-instructions)  
📖 [生成モードのガイダンス](https://learn.microsoft.com/microsoft-copilot-studio/guidance/generative-mode-guidance)  

---

**免責事項**:  
この文書はAI翻訳サービス[Co-op Translator](https://github.com/Azure/co-op-translator)を使用して翻訳されています。正確性を追求しておりますが、自動翻訳には誤りや不正確な部分が含まれる可能性があります。元の言語で記載された文書を正式な情報源としてご参照ください。重要な情報については、専門の人間による翻訳を推奨します。この翻訳の使用に起因する誤解や誤認について、当方は一切の責任を負いません。