<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "cc4afa4a5a11c9d03896decfbcbd4060",
  "translation_date": "2025-10-17T05:44:56+00:00",
  "source_file": "docs/recruit/09-add-an-agent-flow/README.md",
  "language_code": "he"
}
-->
# 🚨 משימה 09: הוספת זרימת סוכן לנושא שלך לצורך אוטומציה

## 🕵️‍♂️ שם קוד: `מבצע כוח האוטומציה`

> **⏱️ חלון זמן המבצע:** `~30 דקות`  

🎥 **צפו בהדרכה**

[![תמונה ממוזערת של סרטון זרימת סוכן](../../../../../translated_images/video-thumbnail.ede12df9aaebcc8996680c8b6555d309b53bdf33d1b0165cae3b5173a6bcdd73.he.jpg)](https://www.youtube.com/watch?v=vtLZJT3eBXg "צפו בהדרכה ביוטיוב")

## 🎯 תיאור המשימה

הסוכן שלך יכול כעת לשוחח עם משתמשים ולספק מידע, אך מצוינות תפעולית אמיתית דורשת מהסוכן שלך לנקוט פעולה. משימה זו תהפוך את הסוכן השיחתי שלך למרכז כוח אוטומציה על ידי ציידו בזרימות סוכן.

בסיום המשימה, תיצור אוטומציה מלאה לבקשת מכשירים שתקלוט נתוני משתמש באמצעות כרטיס אדפטיבי, תשלוף נתונים מ-SharePoint, תשלח התראות למנהלים באמצעות דוא"ל ותספק משוב חלק למשתמשים - הכל מנוהל על ידי הסוכן שלך באמצעות אוטומציה חכמה של זרימת עבודה.

## 🔎 מטרות

במשימה זו תלמד:

1. להבין מהן זרימות סוכן וכיצד הן שונות מזרימות ענן של Power Automate לצורך אוטומציה  
1. ללמוד את התכונות המרכזיות שהופכות את זרימות הסוכן לעוצמתיות, כולל פעולות AI וכתיבה בשפה טבעית  
1. לחקור את מעצב זרימת הסוכן וכיצד להשתמש בביטויים לטיפול דינמי בנתונים  
1. ליצור אוטומציה מלאה לבקשת מכשירים שמשלבת נתוני SharePoint והתראות דוא"ל  

## 🤔 מהי זרימת סוכן?

זרימות סוכן הן דרך עוצמתית לאוטומציה של משימות חוזרות ולחיבור האפליקציות והשירותים שלך. תחשוב עליהן כעל זרימות עבודה מובנות, שלב אחר שלב, שהסוכן שלך יכול לבצע כדי לאוטומט משימות או להתחבר לאפליקציות ושירותים אחרים. ניתן לחשוב עליהן כעל זרימות קטנות שעוזרות לסוכן שלך לבצע דברים כמו לשלוח התראות, לעדכן רשומות או להגיב לאירועים.

בניגוד לסוכנים אוטונומיים שמשתמשים ב-AI כדי לקבל החלטות בזמן אמת, זרימות סוכן הן **זרימות עבודה דטרמיניסטיות** - כלומר הן עוקבות אחר אותו מסלול בכל פעם, ומבטיחות תוצאות עקביות ואמינות.

במילים פשוטות:

- הן עוזרות לסוכן שלך _לבצע דברים_, לא רק _לדבר_ עם משתמשים.  
- הן ניתנות לשימוש חוזר בנושאים וסוכנים שונים, וניתן להפעיל אותן על ידי הודעות משתמש, אירועים או אפליקציות ושירותים אחרים.

## 🙋🏽 כן, אבל איך זה שונה מזרימות ענן של Power Automate?

גם זרימות סוכן וגם זרימות ענן של Power Automate עוזרות לאוטומט משימות. הן מיועדות למטרות שונות ועובדות בדרכים שונות.

### 🤖 זרימות סוכן ב-Copilot Studio

**למה הן מיועדות:**

- נבנו עבור סוכנים שיחתיים ואוטונומיים (באמצעות הוראות סוכן) ב-Copilot Studio.  
- מתמקדות באוטומציה חכמה מונעת AI שמתקשרת עם מערכות עסקיות.

**למה הן שימושיות:**

- קלות לבנייה וניהול ישירות ב-Copilot Studio.  
- מצוינות לאוטומציה של משימות שמתרחשות _במהלך השיחה_ עם משתמשים, כמו הגשת בקשת חופשה.  
- אין צורך ברישיון Power Automate נפרד, מכיוון שהתשלום מבוסס על שימוש בתוך Copilot Studio. זה יכול לחסוך זמן ועלויות לצוותים ארגוניים.

**מגבלות:**

- לא ניתן לשתף אותן, להעתיק אותן או להקצות להן שותפים.  
- זרימות סוכן נראות ונגישות רק בתוך Copilot Studio.  
- נכון לעכשיו, ניתן לערוך טריגרים לאירועים עבור סוכנים בפורטל היצרן של Power Automate.

### ☁️ זרימות ענן של Power Automate

**למה הן מיועדות:**

- מיועדות לאוטומציה כללית בין אפליקציות ושירותים רבים.  
- יכולות לפעול באופן עצמאי או לעבוד לצד זרימות סוכן.

**למה הן שימושיות:**

- מציעות מגוון רחב של מחברים.  
- אידיאליות לאוטומציה של תהליכים מחוץ לסוכנים.  
- ניתן לשתף, להשתמש מחדש ולנהל אותן בין צוותים.

**דרישות:**

- יש צורך ברישיון Power Automate כדי להשתמש בהן.

### 📗 סיכום

| השתמש בזה | כשאתה רוצה |
| :- | :- |
| זרימות סוכן | לאוטומט משימות בתוך סוכן, להשתמש ב-AI ולשמור הכל בתוך Copilot Studio |  
| זרימות ענן של Power Automate | לאוטומט בין אפליקציות ושירותים, או לבנות זרימות עבודה מחוץ לסוכנים |

## 👍🏻 למה להשתמש בזרימות סוכן

זרימות סוכן תמיד עוקבות אחר מסלול קבוע - הן עושות את אותו הדבר בכל פעם שמקבלות את אותו הקלט.

זה הופך אותן ל:

- **אמינות** - אתה יכול לסמוך שהן יתנהגו באותו אופן בכל פעם.  
- **צפויות** - אתה יודע איזה תוצאה לצפות כשהזרימה פועלת.  
- **מבוססות חוקים** - הן עוקבות אחר שלבים שאתה מגדיר.

יתרונות נוספים הם:

- **אוטומציה** - מאפשרות לסוכן שלך לטפל במשימות חוזרות כמו הגשת טפסים או שליחת התראות.  
- **מחוברות** - מתחברות ליותר מ-1400 מחברים כמו ServiceNow, SharePoint, Salesforce. אחרת, ניתן לבנות מחבר מותאם אישית.  
- **אינטגרציה הדוקה** - זרימות סוכן הן חלק מהלוגיקה של הסוכן, הן מופעלות ישירות על ידי הודעות משתמש או פעולות בשיחה.  
- **יכולת הרחבה** - שימוש חוזר בזרימות בין סוכנים או תרחישים שונים.  
- **ללא קוד או עם מעט קוד** - ניתן לבנות זרימות באמצעות שפה טבעית או מעצב חזותי.  
- **פלטפורמה אחת** - ניתן לעצב, לבדוק ולהפעיל זרימות סוכן במקום אחד - Copilot Studio. אין צורך לעבור בין פלטפורמות.

## 🏄🏻‍♂️ איך זרימות סוכן משפרות את הסוכן שלך?

זרימות סוכן מרחיבות את יכולות הסוכן שלך מעבר ל"שיחה" עם משתמשים. הן מאפשרות לו לנקוט פעולה ולתקשר עם מערכות.

נניח שאתה עובד במחלקת כספים ומקבל הרבה חשבוניות מספקים. בדרך כלל, מישהו צריך לקרוא כל חשבונית, להוציא את הפרטים החשובים - הסכום, התאריך, מי שלח אותה, ולבדוק אם הכל תואם לרשומות שלך. לאחר מכן לשלוח אותה לאדם הנכון לאישור. זה לוקח זמן ומאמץ.

עם זרימות סוכן ב-Copilot Studio, אתה יכול לאוטומט את התהליך הזה. ברגע שהחשבונית מגיעה, הסוכן:

1. קורא את המסמך באמצעות עיבוד מסמכים חכם כדי למצוא את המידע החשוב.  
1. בודק את הפרטים מול הנתונים הארגוניים שלך כדי לוודא שהכל נראה תקין.  
1. שולח אותה לאישור לאדם הנכון.

זה חוסך זמן, מפחית טעויות ומקל על התהליך כולו.

### תחשוב על זה כך

- **סוכנים**: מקבלי ההחלטות החכמים  
- **זרימות סוכן**: המבצעים האמינים  

### למה זה חשוב

- אתה מקבל את הטוב משני העולמות: אוטומציה אמינה ו-AI גמיש.  
- קל לבנות ולעדכן זרימות ככל שהצרכים העסקיים שלך משתנים.  
- ניתן להרחיב אוטומציה בין צוותים.

## 🔌 תכונות מרכזיות שהופכות את זרימות הסוכן לעוצמתיות

1. **כתיבה בשפה טבעית**
    - ניתן לתאר מה אתה רוצה שהזרימה תעשה בשפה פשוטה.  
    - Copilot מבין את הכוונה שלך ובונה את הזרימה עבורך.  
    - אין צורך לכתוב קוד - פשוט תסביר את הרעיון שלך.

1. **פעולות AI**

    השתמש ב-AI כדי:

    - לקרוא ולהבין מסמכים או תמונות.  
    - לסכם תוכן ארוך לתשובות קצרות ושימושיות.  
    - להציע המלצות או החלטות חכמות.

1. **פעולות גנרטיביות**
    - מאפשרות לזרימה להתאים את עצמה בזמן אמת.  
    - הסוכן יכול לתכנן ולהתאים שלבים על סמך מידע משתנה.

1. **פעולות אינטגרציה**
    - חיבור הזרימה לכלים כמו Outlook, Microsoft Teams, ServiceNow, SharePoint ואפליקציות ושירותים אחרים, דרך יותר מ-1400 מחברים מובנים או מחבר מותאם אישית.  
    - זה עוזר לסוכן שלך לעבוד עם האפליקציות שהצוות שלך כבר משתמש בהן.

1. **אדם בתהליך**
    - הוסף שלבי אישור שבהם אדם צריך לבדוק או לאשר משהו.  
    - [אישורים מתקדמים](https://learn.microsoft.com/microsoft-copilot-studio/flows-advanced-approvals?WT.mc_id=power-172621-ebenitez) תומכים בתזכורות, האצלה ואישורים רב-שלביים.

## ⚙️ איך זה עובד

1. **טריגר**

    אירוע שמתחיל את הזרימה - כמו משתמש ששואל שאלה, מפעיל את הזרימה מנושא, זמן מתוזמן או אירוע שמתרחש במערכת אחרת.

1. **פעולות**

    אלו הם השלבים שהסוכן מבצע לאחר מכן - שליחת דוא"ל, קריאה ל-API, עדכון כרטיס ב-ServiceNow.

## 🧶 איך ליצור זרימת סוכן

1. **שפה טבעית**: תאר מה אתה רוצה שהסוכן יעשה, ו-Copilot יבנה את זה עבורך.  
1. **קנבס מעצב**: גרור ושחרר פעולות, תנאים ולולאות במעצב זרימת הסוכן כדי לבנות את הזרימה שלך.

## 🎨 מהו מעצב זרימת הסוכן?

זהו כלי חזותי ב-Copilot Studio שעוזר לך לבנות, לערוך ולנהל זרימות סוכן שמספקות הוראות שלב-אחר-שלב שהסוכן שלך עוקב אחריהן כדי להשלים משימות. הוא תוכנן להיות פשוט לשימוש, גם אם אתה חדש בזרימות סוכן.

### תכונות מרכזיות של מעצב זרימת הסוכן

1. **קנבס חזותי**
    - ניתן לראות את כל הזרימה שלך פרוסה כמו דיאגרמה.  
    - קל להתקרב/להתרחק, להתאים את התצוגה או להשתמש במפת מינימפ כדי לנווט בזרימות גדולות.

1. **הוספה והסרה של פעולות**
    - לחץ על _כפתור הפלוס (+)_ כדי להוסיף פעולה חדשה כמו שליחת הודעה או עדכון פריט ברשימת SharePoint.  
    - ניתן לחפש פעולות ממחברים ולהגדיר אותן דרך ההגדרות שלהן.  
    - כדי להסיר פעולה, לחץ על _שלוש הנקודות (⋮)_ ובחר _מחק_.

1. **בדיקת פרמטרים**
    - לחץ על כל פעולה כדי לצפות או לערוך את ההגדרות שלה שנקראות _פרמטרים_.  
    - ניתן להזין ערכים ידנית או להשתמש ב-_ביטויים_ כדי להפוך אותם לדינמיים.

1. **היסטוריית גרסאות**
    - בכל פעם שאתה שומר את הזרימה שלך, גרסה נרשמת.  
    - ניתן לחזור ולצפות או לשחזר גרסאות קודמות אם יש צורך.

1. **בדיקת שגיאות**
    - _בודק הזרימה_ מדגיש כל שגיאה.  
    - כל השגיאות יצטרכו להיפתר לפני פרסום הזרימה שלך.

1. **פרסום ובדיקה**
    - לאחר שהזרימה שלך נקייה משגיאות, פרסם אותה כדי להפוך אותה לפעילה.  
    - השתמש בתכונת _בדיקה_ כדי להפעיל את הזרימה שלך באופן ידני או אוטומטי ולבדוק אם היא עובדת כמצופה.

### למה להשתמש במעצב זרימת הסוכן?

- **חזותי ואינטואיטיבי** - ניתן לבנות זרימות על ידי גרירה ולחיצה.  
- **בטוח להתנסות** - היסטוריית גרסאות מאפשרת לך לבטל שינויים.  
- **בדיקה מובנית** - עוזרת לך לוודא שהכל עובד לפני פרסום.

## 🔤 הזכרת _ביטויים_ - מה הם ביטויים?

ביטויים הם נוסחאות קטנות או פקודות שעוזרות לזרימת הסוכן שלך לעבוד עם נתונים. משתמשים בהם כדי לחשב ערכים, לעצב טקסט, לקבל החלטות או לשלוף מידע ספציפי מקלטים.

### למה להשתמש בביטויים?

ביטויים מאפשרים לך:

- **להתאים אישית את הטיפול בנתונים** - לשלב שמות, לעצב תאריכים.  
- **לקבל החלטות** - אם ערך גדול מ-10, בצע משהו.  
- **להמיר נתונים** - לשנות טקסט לאותיות קטנות, להוציא חלק ממחרוזת.  
- **לאוטומט לוגיקה** - בלי לכתוב קוד מלא.

### איך נראים ביטויים?

ביטויים משתמשים בפונקציות. אני הולך לצטט הסבר על מה הן פונקציות ממומחה לשעבר של מיקרוסופט, ג'רי וויינסטוק.

!!! ציטוט
    פונקציות הן לוגיקה מובנית שמטרתה להמיר את הנתונים שלך באמצעות פעולות פשוטות או מורכבות בביטוי שלך.

פונקציות מאפשרות לך לבנות ביטויים בלי שתצטרך לכתוב קוד.

הדרך שבה אני אוהב לתאר את זה היא שפונקציה בזרימות סוכן דומה לפונקציות ב-Excel. ניתן לבצע פעולה על נתונים כדי להמיר אותם לתוצאה הרצויה. כשאתה בונה את הנוסחה שלך ב-Excel אתה בוחר את ערך הקלט מהתאים בטבלה או מטווח, ואז מיישם פונקציות כדי לעבד את תוצאת הנתונים. דוגמה היא שימוש בפונקציה `COUNT` כדי לחשב את מספר התאים שמכילים מספרים מטווח.

בזרימות סוכן, במקום להתייחס לנתונים מתאים בטבלה, אתה מתייחס לנתוני פלט מהטריגר או מהפעולות כשאתה בונה את הביטויים שלך. בהמשך לדוגמה הקודמת, השתמש בפונקציה `length` כדי לשלוף את מספר הפריטים שהוחזרו מפעולת מחבר SharePoint _Get items_.

### למה פונקציות חשובות?

שימוש בפונקציות הופך את זרימות הסוכן שלך ל:

- **חכמות** - הן יכולות להגיב לקלטים או תנאים שונים.  
- **גמישות** - ניתן להתאים אישית את הטיפול בנתונים.  
- **יעילות** - אתה נמנע מצעדים ידניים על ידי אוטומציה של לוגיקה.

### פונקציות שימושיות ביותר

הבאות הן פונקציות נפוצות בזרימות סוכן. לרשימה המלאה של פונקציות, בקר במדריך [העזר](https://learn.microsoft.com/azure/logic-apps/workflow-definition-language-functions-reference?WT.mc_id=power-172621-ebenitez).

#### 🔡 טקסט

- `concat()` - מחבר שני חלקי טקסט או יותר יחד.  
      - דוגמה: `concat('שלום ', firstName)` → “שלום יוחנן”

- `toLower()` / `toUpper()` - משנה טקסט לאותיות קטנות או גדולות.  
      - שימושי לאחידות קלט.

- `substring()` - מוציא חלק ממחרוזת.  
      - דוגמה: קבל את שלושת האותיות הראשונות של שם.

- `trim()` - מסיר רווחים מתחילת וסוף הטקסט.

#### 🔢 מתמטיקה ומספרים

- `add()`, `sub()`, `mul()`, `div()` - פעולות מתמטיות בסיסיות.  
      - דוגמה: `add(5, 3)` - התוצאה היא 8

#### 📅 תאריך ושעה

- `utcNow()` - מקבל את התאריך והשעה הנוכחיים ב-UTC.  
      - מצוין לתאריכים ושעות.

- `addDays()`, `addHours()` - מוסיף זמן לתאריך.
- דוגמה: `addDays(utcNow(), 7)` הפלט הוא 7 ימים מהיום.

- `formatDateTime()` - מעצב תאריך למחרוזת קריאה.
      - דוגמה: יום שני, 7 ביולי 2025

#### ✅ לוגי

- `if()` - מפעיל ערך אחד אם נכון, ערך אחר אם שגוי.
      - דוגמה: `if(score > 50, 'Pass', 'Fail')`

- `equals()` - בודק אם שני ערכים זהים.

- `and()`, `or()`, `not()` - משלב תנאים מרובים.

#### 🪣 פונקציות שימושיות נוספות

- `coalesce()` - מחזיר את הערך הראשון שאינו ריק.
      - שימושי לערכים חלופיים/ברירת מחדל.

- `guid()` - יוצר מזהה ייחודי.
      - שימושי למעקב או רישום.

- `length()` - סופר כמה תווים או פריטים יש במחרוזת או מערך.

## ⭐ שיטות עבודה מומלצות

להלן כמה שיטות עבודה מומלצות לבניית זרימות סוכן ב-Copilot Studio.

1. **התחילו פשוט ובנו בהדרגה**

    - התחילו עם משימה קטנה וברורה כמו שליחת הודעה.
    - הוסיפו שלבים נוספים לאחר בדיקת הבסיס של האוטומציה שלכם.

1. **השתמשו בשמות פעולות ברורים ותיאוריים**

    - תייגו כל שלב בצורה ברורה כך שתדעו אתם והצוות שלכם מה הוא עושה.
    - דוגמה: במקום השם ברירת המחדל "עדכון פריט" לפעולת מחבר SharePoint, שנו אותו למה שהוא מעדכן, כמו "עדכון סטטוס מכשיר".

1. **בדקו שגיאות לפני פרסום**

    - השתמשו ב-**flow checker** כדי למצוא ולתקן בעיות.
    - לא ניתן לפרסם זרימות אם יש שגיאות, לכן נסו לפתור אותן כשהן מתרחשות.

1. **בדקו את הזרימה שלכם בצורה יסודית**

    - רק בגלל שהיא נשמרת ומתפרסמת, לא אומר שהיא עובדת כמצופה.
    - השתמשו בתכונת _Test_ כדי להפעיל את הזרימה שלכם באופן ידני או אוטומטי, ובדקו את התוצאות.

1. **השתמשו בהיסטוריית גרסאות**

    - שמרו את הזרימה שלכם לעיתים קרובות כך שתוכלו לחזור לגרסאות קודמות אם יש צורך.
    - ניתן לצפות ולשחזר גרסאות קודמות באמצעות לוח _Version History_.

1. **השתמשו בפרמטרים ובביטויים בצורה חכמה**

    - בעת הגדרת פעולות, השתמשו בפרמטרים כדי להפוך את הזרימה שלכם לדינמית.
    - ניתן להזין ערכים ידנית או להשתמש בביטויים כדי לחשב אותם, או לשלב אותם עם ערכים מפעולות קודמות באמצעות בורר _dynamic content_.

1. **מחקו פעולות שאינן בשימוש**

    - אם הוספתם פעולה ולאחר מכן החלטתם שאינכם זקוקים לה, הסירו אותה כדי לשמור על הזרימה נקייה.

## 🧪 מעבדה 09 - הוספת זרימת סוכן לאוטומציה ושיפור יכולות נושא

עכשיו נלמד כיצד לשפר את הנושא שלנו עם כרטיסים אדפטיביים ושימוש בפונקציונליות מתקדמת של נושאים וצמתים.

- [9.1 יצירת זרימת סוכן](../../../../../docs/recruit/09-add-an-agent-flow)
- [9.2 הוספת זרימת סוכן לנושא](../../../../../docs/recruit/09-add-an-agent-flow)
- [9.3 עדכון נושא בקשת מכשיר עם מספר צמתים לחוויית משתמש טובה יותר](../../../../../docs/recruit/09-add-an-agent-flow)
- [9.4 בדיקת סוכן באמצעות מספר תרחישים](../../../../../docs/recruit/09-add-an-agent-flow)

### ✨ מקרה שימוש

**כ** מנהל של עובד

**אני רוצה** לקבל בקשות למכשירים

**כדי ש** אוכל לבדוק את המכשיר המבוקש על ידי העובד.

בואו נתחיל!

### דרישות מוקדמות

1. **רשימת SharePoint**

    נשתמש ברשימת **Devices** של SharePoint מ-[שיעור 00 - הגדרת הקורס - שלב 3: יצירת אתר SharePoint חדש](../00-course-setup/README.md#step-4-create-new-sharepoint-site).

    אם לא הגדרתם את רשימת **Devices** של SharePoint, אנא חזרו ל-[שיעור 00 - הגדרת הקורס - שלב 3: יצירת אתר SharePoint חדש](../00-course-setup/README.md#step-4-create-new-sharepoint-site).

1. **סוכן Helpdesk של Contoso**

    נשתמש באותו סוכן שנוצר קודם לכן ב-[שיעור 06 - יצירת סוכן מותאם אישית באמצעות שפה טבעית עם Copilot והסתמכות על הנתונים שלכם](../06-create-agent-from-conversation/README.md).

### 9.1 יצירת זרימת סוכן

בתרגיל זה, ניצור זרימת סוכן שמחזירה את פריט SharePoint של המכשיר הנבחר ושולחת דוא"ל למנהל עם פרטי המכשיר.

1. בנושא **בקשת מכשיר**, גללו מטה לצומת **שאל עם כרטיס אדפטיבי** והוסיפו צומת חדש. בחרו **הוספת כלי** ובכרטיסיית **כלים בסיסיים** של חלונית הפתיחה, בחרו **זרימת סוכן חדשה**.

    ![הוספת זרימת סוכן חדשה](../../../../../translated_images/9.1_01_AddNewAgentFlow.2b9078604a054d1f022f9c73adaf10fe430e81875ec8717a7f70ef7b05f11c15.he.png)

1. מעצב **זרימות סוכן** ייטען עם טריגר ופעולה.

    - **טריגר** - כאשר סוכן מפעיל את הזרימה
        - זה יפעיל זרימה מסוכן Copilot Studio.

    - **פעולה** - תגובה לסוכן
        - זה שולח תגובה שיכולה להכיל ערכי פלט חזרה לסוכן Copilot Studio.

    בחרו את הטריגר.

    ![בחרו את הטריגר](../../../../../translated_images/9.1_02_SelectTrigger.92dc20442add764c8aa4b7f737f28416a3223e4471562462ed6dcba2dc7c7936.he.png)

1. לאחר מכן, נוסיף מספר קלטים לזרימת הסוכן.

    - `DeviceSharePointId` - זה ישמור את הערך, מזהה, של פריט SharePoint. ערך מזהה זה הוא פלט מצומת שאל עם כרטיס אדפטיבי שבו המשתמש בחר את המכשיר.

    - `User` - זה יהיה שם המשתמש שיגיע ממשתנה מערכת של הסוכן.

    - `AdditionalComments` - זה יהיה ההערה שהוזנה על ידי המשתמש, שהיא פלט מצומת שאל עם כרטיס אדפטיבי.

    קודם נוסיף את `DeviceSharePointId` כקלט לטריגר שלנו. בחרו **+ הוספת קלט**.

    ![הוספת קלט](../../../../../translated_images/9.1_03_AddInput.fd1e0a99ecb5e20f3a518cb23fc0d22c6db1435c5ffb2e183fce3b8a056287bb.he.png)

1. עבור סוג קלט המשתמש, בחרו **טקסט**.

    ![בחרו טקסט](../../../../../translated_images/9.1_04_SelectText.47ca776822ec5a6c1339c012d51e0eb6eac6bf8315d4ac6f25498b10ada16df9.he.png)

1. עבור שם הקלט, הזינו את הבא.

    ```text
    DeviceSharePointId
    ```

    ![קלט DeviceSharePointId](../../../../../translated_images/9.1_05_DeviceSharePointIdInput.caf77f8eb60a1b8649ea8b0abf05dfce9fa4bef9d9c465cd8906395e5b44842e.he.png)

1. עכשיו נוסיף את הקלט השני, `User`. חזרו על אותם שלבים, בחרו **+ הוספת קלט** ובחרו **טקסט**.

    ![הוספת קלט](../../../../../translated_images/9.1_06_AddInput.3ca4bff9991b6e8a331bd909ff58038387696ce7b6ee7a932a88316aff41bc57.he.png)

1. עבור שם הקלט, הזינו את הבא.

    ```text
    User
    ```

    ![קלט User](../../../../../translated_images/9.1_07_UserInput.16b2405f2d5744ea14a6a67b69539ba24719aaf642ddfc2b281e784d74d8c1ea.he.png)

1. עכשיו נוסיף את הקלט השלישי, `AdditionalComments`. חזרו על אותם שלבים, בחרו **+ הוספת קלט** ובחרו **טקסט**.

    ![הוספת קלט](../../../../../translated_images/9.1_08_AddInput.4685bb77618e6d9cfca7a42a0945d10f59825b1ca42de372dcf07c9170451680.he.png)

1. עבור שם הקלט, הזינו את הבא.

    ```text
    AdditionalComments
    ```

    ![קלט AdditionalComments](../../../../../translated_images/9.1_09_AdditionalComments.a4587b59b85450ca0566615c9473132dd6447e6c7513e4926942655aa0e80195.he.png)

1. עבור קלט `AdditionalComments`, נעדכן אותו כדי להפוך אותו לאופציונלי. בחרו באייקון **שלוש הנקודות (...)** ובחרו **הפוך את השדה לאופציונלי**.

    ![הפוך את השדה לאופציונלי](../../../../../translated_images/9.1_10_Optional.753bd03817c2eb37bb44a7bfd7d29314aa7109cde02e3f619c01c42bc9170b71.he.png)

1. עבודה מצוינת! הטריגר הוגדר כעת, בואו נמשיך. בחרו באייקון **פלוס +** מתחת לטריגר כדי להוסיף פעולה חדשה.

    ![הוספת פעולה](../../../../../translated_images/9.1_11_AddAction.86c14acd1ce22e99b7244e0001f0039362ff6ac3efafe03956788aaa31e705af.he.png)

1. תופיע **חלונית הפעולות** שבה תוכלו לצפות בפעולות מ-1400+ מחברים מובנים לשירותי Microsoft וצד שלישי. בשדה **חיפוש** הזינו את הבא,

    ```text
    Get item
    ```

    רשימת פעולות תוצג בתוצאות החיפוש. בחרו בפעולת **קבלת פריט** ממחבר **SharePoint**.

    ![פעולת קבלת פריט](../../../../../translated_images/9.1_12_AddGetItemAction.434cdcb822e1f72993fc4a0c0ad753e1220456f9dab8fc307d42f5711071d45b.he.png)

1. עכשיו נתחיל להגדיר את פעולת **קבלת פריט**.

    בחרו באייקון **שלוש הנקודות (...)** בפעולת **קבלת פריט**.

    ![בחרו שלוש נקודות](../../../../../translated_images/9.1_13_SelectEllipsis.88bf304067f3103825f183f8962634af831460541290533e5670f4c014a97c46.he.png)

1. בחרו **שנה שם**.

    ![בחרו שנה שם](../../../../../translated_images/9.1_14_SelectRename.74d99c883418b7dbf58758304976cac1d0f2afd30e4cd1992830f00775a46b18.he.png)

1. שנו את שם הפעולה ל-

    ```text
    Get Device
    ```

    ![שינוי שם פעולה](../../../../../translated_images/9.1_15_RenameAction.ff64b79f6e6603ae89f272f91d84ff4432c04ba103c401a2808a767e3ceb5617.he.png)

1. בשדה **כתובת האתר**, בחרו את **כתובת האתר** של אתר SharePoint של Contoso IT שנוצר ב-[שיעור 00 - הגדרת הקורס - שלב 3: יצירת אתר SharePoint חדש](../00-course-setup/README.md#step-4-create-new-sharepoint-site).

    בשדה **שם הרשימה**, בחרו את רשימת SharePoint **Devices**.

    ![פרמטרי קלט](../../../../../translated_images/9.1_16_SharePointSiteAndListParameters.af6e0b112eb4bfb210f9259da02b459097a06307afa6ca269cb33aa9ecc1c1e4.he.png)

1. בשדה **מזהה**, בחרו באייקון **ברק** או **fx** בצד ימין.

    ![בורר תוכן דינמי](../../../../../translated_images/9.1_17_InsertExpressionIcon.6e250bb84e7b8884de7b2052005f7ff3cd95f2c28671d2da7965001b3f621902.he.png)

1. בכרטיסיית **תוכן דינמי** של חלונית הפתיחה, הזינו את הבא,

    ```text
    sharepoint
    ```

    תוצאות החיפוש יציגו פרמטרי קלט שמתאימים לערך שחיפשתם. בחרו בפרמטר **DeviceSharePointId** מהטריגר.

    לאחר מכן, בחרו **הוסף** כדי להוסיף את קלט התוכן הדינמי לשדה **מזהה** של הפעולה.

    ![בחרו קלט DeviceSharePointId](../../../../../translated_images/9.1_18_DeviceSharePointId.b9be8e7c3c6b0ab710a8f662e62a0ec0133a530f6877b6cea3c48acc8022fec5.he.png)

1. קלט התוכן הדינמי מהטריגר כעת מופנה לשדה **מזהה** של הפעולה. נעדכן את אחד הפרמטרים המתקדמים הבא. בחרו **הצג הכל** כדי לצפות בפרמטרים המתקדמים.

    ![צפו בפרמטרים מתקדמים](../../../../../translated_images/9.1_19_AdvancedParameters.4bb8e0c11e7864625ad6c30ab1b9021d367cd77374c56985df7b3d43845a1883.he.png)

1. פרמטר **הגבלת עמודות לפי תצוגה** יוצג ובברירת מחדל הוא מוגדר ל-**השתמש בכל העמודות (אל תגבילו)**. נעדכן ערך זה לתצוגה כדי להגביל את העמודות המוחזרות בתגובה של הפעולה. בחרו בפרמטר **הגבלת עמודות לפי תצוגה** כדי לצפות ברשימת התצוגות.

    ![בחרו פרמטר](../../../../../translated_images/9.1_20_LimitColumnsByView.4d30f532f1e1033323d39df5c9b8e803788ea785ed58de2efca2faa5df4b26fc.he.png)

1. בחרו בתצוגת **All Items**.

    ![בחרו תצוגת All Items](../../../../../translated_images/9.1_21_SelectView.d180e83d5e62f5fb6994a7071d5e6ce8f88143d8cc833cb55b208c6fee41bc02.he.png)

1. בחרו באייקון **פלוס +** מתחת לפעולת _קבלת מכשיר_ כדי להוסיף פעולה חדשה.

    ![הוספת פעולה חדשה](../../../../../translated_images/9.1_22_AddAnAction.904b79142347fe927168036ade55d842fa088deef53710944272c681421e0e84.he.png)

1. בשדה החיפוש הזינו את הבא,

    ```text
    send an email
    ```

    רשימת פעולות תוצג בתוצאות החיפוש. בחרו בפעולת **שליחת דוא"ל (V2)** ממחבר **Office 365 Outlook**.

    ![פעולת שליחת דוא"ל](../../../../../translated_images/9.1_23_SendAnEmail.f1019365131658b0e71b5b58b57d7d8b3f3a0c670ddb3cca0838bf0b4f8cd354.he.png)

1. לאחר מכן, נצטרך ליצור חיבור לפעולת המחבר. בחרו **התחבר**.

    ![יצירת חיבור](../../../../../translated_images/9.1_24_CreateConnection.9e968ad4de9d13d81e95779c4fa60809fd40de5f65dbd014f1dc39663c935806.he.png)

1. בחרו את חשבון המשתמש המחובר שלכם.

    ![בחרו חשבון משתמש](../../../../../translated_images/9.1_25_SelectUserAccount.f3c96ac1a377c4b42a6301ba38c21469eb7bd3f48633f04200f1610902f8bdbe.he.png)

1. בחרו **אפשר גישה**. חיבור נוצר כעת.

    ![בחרו אפשר גישה](../../../../../translated_images/9.1_26_AllowAccess.1abcaea31b9846279cafafd7160baea6bec60cdfac8224df7082ceee3ef22a26.he.png)

1. שנו את שם הפעולה ל-

    ```text
    Send an email to manager
    ```

    לאחר מכן נגדיר את פרמטרי הקלט של הפעולה שלנו.

    עבור פרמטר הקלט **אל**, בחרו את עצמכם. בדרך כלל זה יהיה המנהל שלכם או שנשתמש בפעולה אחרת שמושכת את המנהל שלכם על סמך פרופיל Entra ID שלכם, אך למטרת השיעור הזה, בחרו את עצמכם.

    עבור פרמטר הקלט **נושא**, הזינו את הבא,

    ```text
    Request type: new device
    ```

    עבור פרמטר הקלט **גוף**, הזינו את הבא,

    ```text
    Hi,

    New device requested from

    Manufacturer:
    Model:
    Link to item in SharePoint
    Additional comments from:

    This is an automated email from Contoso Helpdesk Copilot
    ```

    ![שינוי שם פעולה והגדרת קלטים](../../../../../translated_images/9.1_27_RenameAndConfigureParameters.c3d29a3481fb5c0240cca85db4119387e6b750546ed12e2af4a9ac62d7454f89.he.png)

1. לאחר מכן, נעדכן את פרמטר הקלט **גוף** עם הפניות לקלט תוכן דינמי מה-**טריגר** או מפעולת **קבלת פריט**. הזינו רווח לאחר השורה השנייה כדי שנוכל להכניס את שם המשתמש מקלט הטריגר, **User**.

    בחרו באייקון **ברק** או **fx** בצד ימין.

    ![הוספת קלט User כתוכן דינמי](../../../../../translated_images/9.1_28_AddUserInput.f38d3df648faef75f1985bdcc23db16e197ccb1ddc015210c43bbb2569fcf654.he.png)

1. בכרטיסיית **תוכן דינמי** של חלונית הפתיחה, בחרו בקלט **User** מהטריגר.

    בחרו **הוסף** כדי להוסיף את קלט התוכן הדינמי **User** לשדה **גוף** של הפעולה.

    ![בחרו קלט User](../../../../../translated_images/9.1_29_SelectUserInput.4efc79f52d74fa7ae13132ea13f7d51b3f4aab6413afc41a8354c5e59852b9fc.he.png)
1. תוכן דינמי מהטריגר עכשיו מתייחס לפרמטר **Body** בפעולה. נחזור על אותו תהליך עבור השורות הנותרות בגוף הודעת האימייל.

    ![תוכן משתמש נוסף](../../../../../translated_images/9.1_30_UserInputAdded.905ec0489e4f1bbe7cc071826050834aa1e5acf53f8a65ad59532ea13b81c607.he.png)

1. לחצו על החלל ליד `Manufacturer:`. בחרו את **אייקון הברק** או **אייקון fx** בצד ימין.

    בלשונית **תוכן דינמי** של חלונית הפופ-אפ, הזינו את הבאים בשדה החיפוש,

    ```text
    manufacturer
    ```

    בחרו את קלט **Manufacturer value** מהטריגר ולחצו על **Add**.

    ![הוספת קלט Manufacturer value כתוכן דינמי](../../../../../translated_images/9.1_31_ManufacturerValueAdded.db2cf35a35a20590d80d7f0191d771a045bf55e40ce98982d0e099588e260712.he.png)

1. לחצו על החלל ליד `Model:`. בחרו את **אייקון הברק** או **אייקון fx** בצד ימין.

    בלשונית **תוכן דינמי** של חלונית הפופ-אפ, הזינו את הבאים בשדה החיפוש,

    ```text
    model
    ```

    בחרו את קלט **Model** מפעולת **Get item** ולחצו על **Add**.

    ![הוספת קלט Model כתוכן דינמי](../../../../../translated_images/9.1_32_ModelAdded.ff9d858648ddb85fe70eaaafa6e23d0560500e7327ccb29ee56ecac0d8d36cab.he.png)

1. עבור הטקסט `Link to item in SharePoint`, נעדכן אותו להיות קישור בגוף הודעת האימייל. לחצו בתחילת השורה ובחרו את **אייקון הברק** או **אייקון fx** בצד ימין.

    ![הוספת תוכן דינמי](../../../../../translated_images/9.1_33_AddDynamicContent.c662d682377af82adc52de18e05baf9b6aa5a972882dcf6274f3979f14641627.he.png)

1. לחצו אחרי תג העוגן של HTML ובחרו את **אייקון הברק** או **אייקון fx** בצד ימין.

    בלשונית **תוכן דינמי** של חלונית הפופ-אפ, הזינו את הבאים בשדה החיפוש,

    ```text
    link to item
    ```

    בחרו את קלט **Link to item** מפעולת **Get item** ולחצו על **Add**.

    ![הוספת Link to item כתוכן דינמי](../../../../../translated_images/9.1_34_AddLinkToItem.6827bd3bad484f7382d060435bb0ef45e9bb1c3ad4774529559bb4c5f9bbca8c.he.png)

1. יש לעבור לעורך HTML על ידי בחירת **&lt;/&gt;**.

    ![הוספת קלט משתמש](../../../../../translated_images/9.1_35_ToggleCodeView.ae3a9caf213f2c6366487e10092ad1fad3494f110936219258d842c23e7f46d9.he.png)

1. עורך HTML עכשיו מופעל. לחצו לפני הטקסט `Link to item in SharePoint`, הוסיפו תג עוגן HTML ליצירת קישור. העתיקו והדביקו את הבאים.

    ```text
    <a href="
    ```

    ![תג HTML](../../../../../translated_images/9.1_36_AddHTMLTag.146220ae5c33eaf9915c393c37d62b9d4b258413e9f4dc42a1ab005437669443.he.png)

1. קלט התוכן הדינמי של **Link to item** עכשיו מתייחס לפרמטר **Body**. לחצו אחרי קלט **Link to item**, העתיקו והדביקו את הבאים.

    ```text
    ">
    ```

    ![תג HTML](../../../../../translated_images/9.1_37_AddHTMLTag.48f73b302f6a84bb6a51e0666fd30baf1f8d9d906947d44dc4095ededed18a2d.he.png)

1. לחצו אחרי הטקסט `Link to item in SharePoint`, סגרו את תג העוגן של HTML. העתיקו והדביקו את הבאים.

    ```text
    </a>
    ```

    ![תג HTML](../../../../../translated_images/9.1_38_AddHTMLTag.47d2f0521e6aba9d609bfe65d86ebae5786e4ad5465fefb7ae0370db6e924c96.he.png)

1. בחרו את אייקון **&lt;/&gt;** כדי לעבור לתצוגת קוד.

    ![כיבוי תצוגת קוד](../../../../../translated_images/9.1_39_ToggleCodeView.88606eb37d702a686904b2dd8943fcf144cec462b37ee781e8ee0415e62bd951.he.png)

1. לאחר מכן, בחרו שוב את אייקון **&lt;/&gt;** כדי לעבור שוב לתצוגת קוד.

    ![חזרה לתצוגת קוד](../../../../../translated_images/9.1_40_ToggleCodeViewAgain.32da9b9804adbbfaf8d85bdaa6fa51d2ae5fc1fbb97f75084813972c66d0c4d9.he.png)

1. שימו לב שישנם מספר תווים מיותרים `&lt;br&gt;`. מחקו את התווים הללו.

    ![מחיקת תווים](../../../../../translated_images/9.1_41_DeleteCharacters.f1ef3830b186c2cd9974ea05e336c83c0706d72ab1010d06283716dc4e982875.he.png)

1. סיימנו להוסיף קישור לגוף הודעת האימייל 😎 בחרו את אייקון **&lt;/&gt;** כדי לעבור לתצוגת קוד.

    ![תג HTML מסודר](../../../../../translated_images/9.1_42_HTMLTagTidiedUp.1b27fa2c4dc65c3f1a7151abcf6e388f64cb83745b10cd22769c1f9af3421fc6.he.png)

1. לחצו אחרי הטקסט `Additional comments from` לפני תו הנקודתיים ובחרו את **אייקון הברק** או **אייקון fx** בצד ימין.

    ![הוספת פרמטר משתמש](../../../../../translated_images/9.1_43_AddUserInput.6f0d26739c1b9039383aa37cc46fa1149a269bd4268fb54b897d144afc49c515.he.png)

1. בלשונית **תוכן דינמי** של חלונית הפופ-אפ, הזינו את הבאים בשדה החיפוש,

    ```text
    user
    ```

    בחרו את פרמטר **User** מהטריגר ולחצו על **Add**.

    ![הוספת פרמטר משתמש כתוכן דינמי](../../../../../translated_images/9.1_44_AddUserDynamicContent.bb7c76e92650001207712b3447d3275d584f3ebf739034369869c3facf38eacf.he.png)

1. עכשיו נוסיף ביטוי שיציג את הערך של Additional Comments אם סופק על ידי המשתמש בצומת **Ask an adaptive card**, אחרת יציג "None" אם המשתמש לא סיפק הערות.

    לחצו אחרי הנקודתיים ובחרו את **אייקון הברק** או **אייקון fx** בצד ימין.

    ![הוספת ביטוי](../../../../../translated_images/9.1_45_AddExpression.c4c92dc4a56fab75c78ec2c5087682521e562264c1710c8dfaa24134adc3a112.he.png)

1. בלשונית **פונקציה** של חלונית הפופ-אפ ובשדה הביטוי למעלה, הזינו את הבאים,

    ```text
    if(empty())
    ```

    ביטוי זה משתמש בפונקציה `if` עבור משפט if-else.

    הפונקציה הבאה היא `empty` שבודקת אם ערך קיים או לא בפרמטר מחרוזת. פרמטר המחרוזת שיש להתייחס אליו הוא ערך פרמטר הקלט `AdditionalComments` מהטריגר.

    ![אם ריק](../../../../../translated_images/9.1_46_IfEmptyFunctions.95d21ad01f6f7c290cb8d5a57ccbca9c9532df7ce57f800554dea541d503ddc6.he.png)

1. לאחר מכן, לחצו **בתוך הסוגריים** אחרי הפונקציה `empty`. נוסיף את פרמטר הקלט `AdditionalComments` מהטריגר.

    בחרו את לשונית **תוכן דינמי**. הזינו את הבאים בשדה החיפוש,

    ```text
    Additional
    ```

    גללו מטה בחלונית ובחרו את פרמטר הקלט **AdditionalComments** מהטריגר. הפרמטר יתווסף עכשיו כפרמטר מחרוזת בביטוי.

    ![הוספת AdditionalComments כתוכן דינמי](../../../../../translated_images/9.1_47_AdditionalCommentsDynamicContent.f9632f09779888c18a58df8e97ef677ed885b0eaa88c252b13b22c0e4c67495b.he.png)

1. עכשיו נגדיר את הלוגיקה **_true_**, שבה אם פרמטר המחרוזת `AdditionalComments` ריק, נרצה להציג מחרוזת (טקסט) של `None`.

    אחרי הסוגריים שמקיפים את פרמטר המחרוזת, הזינו את הבאים,

    ```text
    , 'None',
    ```

    ![לוגיקה נכונה](../../../../../translated_images/9.1_48_None.31978299f29e07ef3257eedd5dcee09c8675f8b3f61aea8102900118e0b6ca70.he.png)

1. לבסוף נגדיר את הלוגיקה **_false_**, שבה אם פרמטר המחרוזת `AdditionalComments` אינו ריק, נרצה להציג את הערך של פרמטר הקלט **AdditionalComments** מהטריגר שלנו.

    > תזכורת: ערך זה יהיה משדה Additional Comments בכרטיס האדפטיבי בצומת **Ask with adaptive card** בנושא **Request device**.

    אחרי הפסיק אחרי הלוגיקה **_true_**, בחרו את לשונית **תוכן דינמי**. הזינו את הבאים בשדה החיפוש,

    ```text
    Additional
    ```

    גללו מטה בחלונית ובחרו את פרמטר הקלט **AdditionalComments** מהטריגר. הפרמטר יתווסף עכשיו כפרמטר מחרוזת בביטוי.

    עכשיו הוסיפו אותו לפרמטר **Body** על ידי בחירת **Add**.

    ![לוגיקה שגויה](../../../../../translated_images/9.1_49_AdditionalCommentsDynamicContent.d42c7fc29f65d901bb26dcbc13408c387633ea185cdd79c35d6439231b7363d5.he.png)

1. מצוין, הביטוי שלנו הושלם! הביטוי נוסף עכשיו לפרמטר **Body**. לבסוף, עצבו את השורה האחרונה באיטליקס.

    ![איטליקס](../../../../../translated_images/9.1_50_Italics.a0c01aa33ef4e83167e1fbc21c1d833f95addd60c8f531411cf9c58a96a31b02.he.png)

1. עכשיו נעדכן את פעולת **Respond to the agent** כדי לשלוח את הערך של פרמטר **Model value** מפעולת **Get item** חזרה לסוכן.

    לחצו על מקש השמאלי של העכבר והזיזו בתנועה כלפי מעלה בתוך המעצב כדי לצפות בפעולת **Respond to the agent**.

    בחרו את פעולת **Respond to the agent** ובחרו את פלט **Text** כסוג.

    ![בחירת פלט טקסט](../../../../../translated_images/9.1_51_RespondToTheAgentAction.4c682a440e19a0fcd6d6f51ef9cdbfe76f482a39d635b8905d9b0cbbf33d945f.he.png)

1. הזינו את הבאים כשם הפלט.

    ```text
    ModelValue
    ```

    ![פלט ModelValue](../../../../../translated_images/9.1_52_ModelValueInput.20609429eb323281051607b090319adc5315c0245c7d61158eb119714fe4318f.he.png)

1. בחרו את שדה הערך ובחרו את **אייקון הברק** או **אייקון fx** בצד ימין.

    ![הוספת ביטוי](../../../../../translated_images/9.1_53_InsertDynamicContent.108ba565696f9f52d742323e0f4c46c308f322ac4bd67802e3196430155c7443.he.png)

1. בלשונית **תוכן דינמי** של חלונית הפופ-אפ, הזינו את הבאים בשדה החיפוש,

    ```text
    model
    ```

    בחרו את פרמטר **Model** מפעולת **Get item** ולחצו על **Add**.

    ![הוספת פרמטר Model כתוכן דינמי](../../../../../translated_images/9.1_54_ModelParameter.f231fd0ec089ac6b9ac1b7fd2e6a60a35b08484ed10b0098cff6b3ce0c7760cb.he.png)

1. פרמטר **Model** עכשיו הוא הערך של פלט הטקסט. בחרו **Save draft** כדי לשמור את זרימת הסוכן שלנו.

    סיימנו את זרימת הסוכן שלנו 👏🏻

    ![בחירת שמירת טיוטה](../../../../../translated_images/9.1_55_SaveDraftAgentFlow.5ab97895a901458362881fc9ee576762bdb0883b37a6cbd7a631ddc2750705af.he.png)

1. נעשה עדכון נוסף לזרימת הסוכן שלנו לפני פרסום. בחרו את לשונית **Overview** ובחרו **Edit**.

    ![בחירת עריכה](../../../../../translated_images/9.1_56_EditAgentFlowDetails.023e8149284b9ae79dd3d95f574ff90bbcc1cc4a9fff4be56664ccbe0698f310.he.png)

1. עבור **Flow name**, העתיקו והדביקו את הבאים.

    ```text
    Send device request email
    ```

    עבור **Description**, בחרו את **אייקון הרענון** כדי להשתמש ב-AI ליצירת תיאור אוטומטי עבורכם בהתבסס על הטריגר והפעולות בזרימת הסוכן.

    בחרו **Save** כדי לשמור את השם והתיאור המעודכנים של זרימת הסוכן.

    ![שינוי שם, הוספת תיאור ושמירת פרטים](../../../../../translated_images/9.1_57_RenameAndDescription.57a190396550bf998d62c49ca359b66211ae50042ac5f8739b32f8b9bc292607.he.png)

1. בחרו את לשונית **Designer** ובחרו **Publish** כדי לפרסם את זרימת הסוכן כך שניתן יהיה להוסיף אותה כצומת בנושא **Request device**.

    ![פרסום](../../../../../translated_images/9.1_58_Publish.8f43271718c662deee7afea6fb283f64005b277b3a62086e6d91cc0c3ac4f79c.he.png)

1. הודעת אישור תופיע בקרוב כדי לאשר שזרימת הסוכן פורסמה.

    ![הודעת אישור](../../../../../translated_images/9.1_59_Confirmation.d406bde76c31b27f794d5742c992b8c84283f46b2e54524f1e500d0688a33716.he.png)

### 9.2 הוספת זרימת סוכן לנושא

עכשיו נוסיף את זרימת הסוכן לנושא **Request device**.

1. בחרו **Agents** בתפריט הצד השמאלי ובחרו את **Contoso Helpdesk Agent**.

    ![בחירת סוכנים](../../../../../translated_images/9.2_01_SelectAgent.b8a6fd3a8970d6b0c8e78bf0a5411257206612d53acdf9b44f78b2c9c2fe91fc.he.png)

1. בחרו את לשונית **Topics**.

    ![בחירת לשונית נושאים](../../../../../translated_images/9.2_02_SelectTopics.3e8618aba5f4a1ddf3dee726b6da9a66ed89d04a2e8ca36b52112a6675c2885c.he.png)

1. בחרו את נושא **Request device**.

    ![בחירת נושא Request device](../../../../../translated_images/9.2_03_SelectRequestDevice.df10472702258708b3d069e718e695b9fcabc61d42901d524dc302a03b3fa4a9.he.png)

1. גללו מטה לצומת **Ask with adaptive card** והוסיפו צומת חדש.

    בחרו **Add a tool** ובלשונית **Basic tools** של חלונית הפופ-אפ, בחרו את זרימת הסוכן **Send device request email** שיצרנו ופרסמנו לאחרונה.

    ![בחירת זרימת סוכן](../../../../../translated_images/9.2_04_SelectAgentFlow.15deca87db95fff1c9d904855d237d22a72c260adf3343d9e78695f07c42a8e0.he.png)

1. עבור קלטי הטריגר של זרימת הסוכן שלנו, עלינו לבחור את פלטי המשתנים מצומת **Ask with adaptive card**.

    בחרו את **אייקון שלוש הנקודות (...)** עבור קלט **DeviceSharePointId**.

    ![בחירת משתנה](../../../../../translated_images/9.2_05_SelectVariable.8fe53cbc0f950f732b9e9002b21d8762ddfe74fb601d61c2a5119e32383450a2.he.png)

1. בחרו את משתנה **deviceSelectionId** שהוא אחד מהפלטים שהוגדרו בצומת **Ask with adaptive card**.

    ![בחירת משתנה deviceSelectionId](../../../../../translated_images/9.2_06_SelectdeviceSelectionIdVariable.67c0091e0de9442d3cffbfe3b2cace8d76be37ea67815ddfc99af03ae4b37391.he.png)

1. לאחר מכן, בחרו את **אייקון שלוש הנקודות (...)** עבור קלט **User**.

    ![בחירת משתנה](../../../../../translated_images/9.2_07_SelectVariable.bf851128bec5e0255c6cf361a837ce9701d0afac84ed3d5b89665d111a098386.he.png)

1. בחרו את לשונית **System** בחלונית משתנים ובחרו **User.DisplayName**. משתנה זה מאחסן את שם התצוגה של המשתמש הפנימי שמתקשר עם הסוכן.

    ![בחירת משתנה מערכת User.DisplayName](../../../../../translated_images/9.2_08_SelectUser.DisplayNameVariable.926a2a7560402fbd7b224e2bf0ff11df9e5612803b7ce51e36f58201a09bbfd7.he.png)

1. לאחר מכן, בחרו את **אייקון גדול יותר** עבור **Advanced inputs** כדי להרחיב ולראות את קלט **AdditionalComments**.

    ![הרחבת קלטים מתקדמים](../../../../../translated_images/9.2_09_ExpandAdvancedInputs.bded22f83fe4eb21237daa254725e12a81ea75be34bcb0e8ab322037a4e6f418.he.png)

1. בחרו את **אייקון שלוש הנקודות (...)** עבור קלט AdditionalComments.

    ![בחירת משתנה](../../../../../translated_images/9.2_10_SelectVariable.86286cc06323e65fb3874b9fd0ea62d140b9e9b9a2b5116d667192a6dca3815f.he.png)

1. בחרו את לשונית **Formula** ואת אייקון ההרחבה בחלונית משתנים, כיוון שנשתמש בביטוי Power Fx.

    ![לשונית נוסחה](../../../../../translated_images/9.2_11_SelectFormulaAndExpandIcon.3fcd07bfccc4f0779a5d26313b571e60be792da7fd28e937b3e888f8aaeda7e0.he.png)

1. בדומה לביטוי בזרימת הסוכן שעושה בדיקה מותנית באמצעות פונקציית _if_, אבל הפעם
    - באמצעות פונקציות Power Fx,
    - והכנסת ערך ריק או ערך של משתנה הפלט `commentsId` מצומת **Ask with adaptive card**.

    הזינו את הפונקציות הבאות בשדה Power Fx,

    ```text
    If(IsBlank())
    ```

הביטוי הזה משתמש בפונקציה `If` עבור משפט if-else.

הפונקציה הבאה שמשתמשים בה היא `IsBlank`, שבודקת אם ערך קיים או לא קיים בפרמטר מחרוזת. פרמטר המחרוזת שיש להתייחס אליו הוא משתנה הפלט `commentsId` מהצומת **Ask with adaptive card**.

![פונקציות If ו-IsBlank](../../../../../translated_images/9.2_12_IfIsBlank.07f7516c7e1f7579239a8b3833d64a14eb88dc245cae714b3e07d6298e907d51.he.png)

1. לאחר מכן, לחץ **בתוך הסוגריים** אחרי הפונקציה `IsBlank`. אנחנו הולכים להכניס את משתנה הפלט `commentsId` מהצומת **Ask with adaptive card**.

הכנס את הבא בתוך הסוגריים,

    ```text
    Topic.commentsId
    ```

והוסף פסיק אחרי הסוגריים.

![התייחסות למשתנה הפלט commentsId](../../../../../translated_images/9.2_13_Topic.commentsId.1a04dc190dac334ebf6c4dbc1b6df1aad2e4bbdeeb3ef960871e93614381f079.he.png)

1. עכשיו נגדיר את הלוגיקה:

   - כאשר **_true_** - אם פרמטר המחרוזת `Topic.commentsId` ריק, אז נרצה להכניס ערך ריק.
   - כאשר **_false_** - אם פרמטר המחרוזת `Topic.commentsId` אינו ריק, אז נכניס את הערך של משתנה commentsId.

אחרי הסוגריים שמקיפים את פרמטר המחרוזת, הכנס את הבא,

    ```text
    "", Topic.commentsId)
    ```

ביטוי Power Fx צריך להיראות כך,

    ```text
    If(IsBlank(Topic.commentsId), "", Topic.commentsId)
    ```

עבודה מצוינת, הביטוי שלנו הושלם! 🙌🏻 עכשיו בחר **Insert** כדי להגדיר את פרמטר הקלט של זרימת הסוכן לביטוי Power Fx.

![ביטוי Power Fx](../../../../../translated_images/9.2_14_PowerFxExpression.80e76ea59bdb8f131d26edf2657923f4af9000768d44b06c0947115fd218698e.he.png)

1. **שמור** את הנושא.

### 9.3 עדכון נושא בקשת מכשיר עם מספר צמתים לשיפור חוויית המשתמש

נוסיף עכשיו שני צמתים נוספים:

- **שלח הודעה** - זה ישמש כהודעת אישור שמתייחסת למכשיר שנבחר ומאשרת שהבקשה שלהם הוגשה.

- **ניהול נושא** - לסיום השיחה, נבצע הפניה לצומת **סיום השיחה**.

בואו נתחיל!

1. בחר את **סמל הפלוס +** מתחת לצומת זרימת הסוכן ובחר צומת **שלח הודעה**.

![הוסף צומת שלח הודעה](../../../../../translated_images/9.3_01_AddSendAMessageNode.ac4111729a2602f8301ecffbcb263d692ecb43478aa9da63cae0dd58160f56c8.he.png)

1. הכנס את הבא בשדה ההודעה,

    ```text
    Thanks
    ```

לאחר מכן בחר **Insert variable** כדי להתייחס לשם המשתמש.

![הכנס משתנה](../../../../../translated_images/9.3_02_InsertVariable.c5c9ebce61d1f442413d05f4437f74ee1d9c3a8c2ab696244937c56b5171f310.he.png)

1. בחר את לשונית **System** וחפש את `User` בשדה החיפוש. בחר את משתנה **User.DisplayName**.

![בחר משתנה מערכת](../../../../../translated_images/9.3_03_SelectSystemVariable.47cfac2f3a727dbaf32ae960cbafe43ce9ed00f73edf01ac6d48e5b2b167e5fc.he.png)

1. הכנס את הבא בשדה ההודעה,

    ```text
    . Your selected device,
    ```

לאחר מכן בחר **Insert variable** והפעם בלשונית **Custom**, בחר את משתנה **ModelValue**.

לאחר מכן הכנס את הבא כדי להשלים את ההודעה.

    ```text
    , has been submitted and will be reviewed by your manager.
    ```

ההודעה צריכה להיראות כך.

![שלח הודעה](../../../../../translated_images/9.3_04_SendAMessage.3f6c4b5e53da9c7f9fcf9d0c453a9b65e44e35ea4c1124947fb638d0b682d96d.he.png)

1. לבסוף, בחר את **סמל הפלוס +** מתחת לצומת **שלח הודעה** ובחר **ניהול נושא**, ולאחר מכן **עבור לנושא אחר** ובחר **סיום השיחה**.

![ניהול נושא](../../../../../translated_images/9.3_05_EndOfConversation.3c6c96d03b29a4d0904dea09d96c62d6ad450fe60dd8d6b2fe9d31681d6cb147.he.png)

1. **שמור** את הנושא.

![שמור](../../../../../translated_images/9.3_06_SaveTopic.8c9201fabce9f41af03d9f1beb9ce321e4ee9880a94edabe58b592bffebda80a.he.png)

### 9.4 בדיקת הסוכן באמצעות מספר תרחישים

עבודה מצוינת!!! 😁 עכשיו נוכל לבדוק את הסוכן שלנו.

#### 9.4.1 בקשת מכשיר והכנסת הערה בכרטיס אדפטיבי

1. **רענן** את חלונית הבדיקה, בחר את סמל **activity map** והכנס את הבא כהודעה לסוכן.

    ```text
    I need a laptop
    ```

![בדיקת סוכן](../../../../../translated_images/9.4_01_TestAgent_RequestDevice_Yes.e73a5076dcd7179901dc0536624a039e372e405a6aac7ab89a632ce81bacdc2e.he.png)

1. הסוכן מפעיל את **מכשירים זמינים** ומגיב עם רשימת המכשירים הזמינים. נכניס את הבא כתשובה לשאלה האם נרצה לבקש מכשיר.

    ```text
    Yes
    ```

![כן](../../../../../translated_images/9.4_02_RequestDevice_Yes.25c34743bc168fde33f91743316e7bad87ee0e47150c93e9b82c4662404dcaba.he.png)

1. שים לב איך הסוכן הפעיל את **בקשת מכשיר** בהתאם להוראות הסוכן וכעת הכרטיס האדפטיבי מוצג בהודעת הסוכן.

בחר את המכשיר **Surface Laptop 15** והכנס את הבא כהערה.

    ```text
    I need 16GB of RAM please
    ```

![בחר מכשיר והכנס הערה](../../../../../translated_images/9.4_03_SelectDeviceAndEnterComment.570ea590309bf97edc40c6f7b53dbdc1174365860d8e8a4c32cfb7f1837621c2.he.png)

1. גלול מטה עד שתראה את כפתור **Submit Request** ובחר בו כדי לשלוח את הכרטיס האדפטיבי לסוכן.

![שלח בקשה](../../../../../translated_images/9.4_04_SubmitRequest.ce3f4f44b90243a18dbfb401548b9b3cefd3ea17d8293a1bc3377323e3449da9.he.png)

1. בחר **Allow** כדי שהסוכן יוכל להשתמש באישורי הכניסה שלך לאימות החיבור של שתי פעולות המחבר.

![אפשר](../../../../../translated_images/9.4_05_SelectAllow.f7b5bda068fbaee83dcb1cff03a52c946fb4d879137c55f4e5f9eb3953985e0e.he.png)

1. הסוכן יציג לאחר מכן את הודעת האישור הכוללת את המודל שנבחר, ולאחר מכן יפנה לנושא **סיום השיחה**. מגניב!

![בקשה הוגשה](../../../../../translated_images/9.4_06_RequestSubmitted.1d4d2e9afbc222a5ba79a4c254e7b2364d6eafc1a200ad6ac0aa142f9f10642d.he.png)

1. בחר **כן** כדי לאמת את שאר נושא **סיום השיחה**.

![בחר כן](../../../../../translated_images/9.4_07_RedirectNode.e7b1390e4eafe8c2c815fc8ce7fdda56617d9fbeccb0d59423ad2899a8e5f897.he.png)

1. לאחר מכן, דרג את החוויה על ידי בחירת אחד הכוכבים בכרטיס דירוג.

הסוכן ימשיך לצומת **שאלה** האחרון בנושא **סיום השיחה**. בחר **לא**.

![נושא סיום השיחה](../../../../../translated_images/9.4_08_EndOfConversation.b35507f7f561633c0cb3b6c15dc007ae4197a72d58afd8ae616bea439bd6e148.he.png)

1. הנושא יסתיים לאחר מכן כאשר הודעה סופית תוצג בחלונית הבדיקה.

![נושא סיום השיחה](../../../../../translated_images/9.4_09_EndOfConversation.438891b82e322b8a2648533200fbcd01c660ab049223b0920cdd0fbfcdeeb888.he.png)

1. בדוק את תיבת הדואר הנכנס של חשבון האימייל שלך כדי לסקור את האימייל שנשלח למנהל על ידי זרימת הסוכן. תוכל לראות את פרטי המכשיר שנבחר וההערה שהוכנסה בכרטיס האדפטיבי.

![אימייל התקבל](../../../../../translated_images/9.4_10_ReviewEmailMessageWithComment.b0138b0bb9d08aacbd8bbb02fdb633a6796b4131cf8d83212adeabaa1ce04a18.he.png)

1. לחץ על הקישור והדפדפן צריך לטעון את פריט SharePoint של המכשיר. מעולה!

![לחץ על הקישור באימייל](../../../../../translated_images/9.4_11_SelectLinkInEmail.2179f17165b61ba1e8aee68e8de4c752d64b0780ad86e0fe9054580d9c24e208.he.png)

#### 9.4.2 בקשת מכשיר ללא הכנסת הערה בכרטיס אדפטיבי

עכשיו נבדוק את התרחיש שבו לא מכניסים הערה.

1. חזור על אותם שלבים של

   - **רענן** את חלונית הבדיקה ובחר את סמל **activity map**
   - הכנס את ההודעה, `I need a laptop`
   - השב עם `Yes` לשאלה על בקשת מכשיר

![בקשת מכשיר](../../../../../translated_images/9.4_12_RequestDevice_Yes.1e369b8a52547fade4b84a4e36b399ee0692c6edbaa778ba90fe9c15cae75c5c.he.png)

1. הפעם בחר את המכשיר **Surface Laptop 13** ולא הכנס הערה.

![בחר מכשיר](../../../../../translated_images/9.4_13_SelectDevice.d9ad15d17de3f06fd948bd529f116f7c05bedf79c016180d8a1dd7e378322b0e.he.png)

1. **שלח** את הבקשה על ידי בחירת כפתור **Submit Request**.

![שלח בקשה](../../../../../translated_images/9.4_14_SubmitRequest.a783ad8460bfb4485cfd2e97db2c065d9d6bf803279e3bd1569fe3e93548a578.he.png)

1. הפעם האימייל שהתקבל בתיבת הדואר הנכנס שלך יציג **None** כהערה.

![אימייל התקבל](../../../../../translated_images/9.4_15_ReviewEmailMessage.137f35152c9da4b4a02bebec5f0cc9e55cfa25679770ace003aa19482ed0f3eb.he.png)

#### 9.4.3 לא לבקש מכשיר

בואו נבדוק את התרחיש האחרון שבו לא מבקשים מכשיר, ונושא **Goodbye** צריך להיות מופעל בהתאם להוראות הסוכן.

1. חזור על אותם שלבים של

   - **רענן** את חלונית הבדיקה ובחר את סמל **activity map**
   - הכנס את ההודעה, `I need a laptop`
   - הפעם השב עם `No` לשאלה על בקשת מכשיר

![בדיקת סוכן](../../../../../translated_images/9.4_16_TestAgent_RequestDevice_No.85f205968f1d4083f20cc890a707748f8e06c01a19536cd299a13bdde2350de7.he.png)

1. הסוכן הפעיל את נושא **Goodbye** והשאלה כפי שהוגדרה בנושא נשאלת.

![נושא Goodbye הופעל](../../../../../translated_images/9.4_17_Goodbye.05ee598a987237e02866647a9699b0efa7ac58d1f448497f956af2ee815cb961.he.png)

## ✅ משימה הושלמה

מזל טוב! 👏🏻 למדת איך לבנות את זרימת הסוכן שלך ולהוסיף אותה לנושא **בקשת מכשיר** הקיים, ואיך להפנות את הסוכן לנושא אחר.

זהו סוף **מעבדה 09 - הוספת זרימת סוכן לאוטומציה ושיפור יכולות נושא**, בחר את הקישור למטה כדי לעבור לשיעור הבא. נרחיב את המקרה במעבדה של השיעור הבא.

⏭️ [עבור לשיעור **הוספת טריגרים לאירועים - הפעלת יכולות סוכן אוטונומיות**](../10-add-event-triggers/README.md)

## 📚 משאבים טקטיים

🔗 [היכרות עם זרימות סוכן: שינוי האוטומציה עם זרימות עבודה מבוססות AI](https://www.microsoft.com/microsoft-copilot/blog/copilot-studio/introducing-agent-flows-transforming-automation-with-ai-first-workflows/)

🔗 [סקירת זרימות סוכן](https://learn.microsoft.com/microsoft-copilot-studio/flows-overview?WT.mc_id=power-172621-ebenitez)

🔗 [שימוש בזרימות סוכן עם הסוכן שלך](https://learn.microsoft.com/microsoft-copilot-studio/advanced-flow?WT.mc_id=power-172621-ebenitez)

🔗 [רשימת פונקציות במדריך ההפניה](https://learn.microsoft.com/azure/logic-apps/workflow-definition-language-functions-reference?WT.mc_id=power-172621-ebenitez)

📺 [זרימות סוכן ב-Copilot Studio](https://www.youtube.com/watch?v=VJTKyk3Pr7s)

<img src="https://m365-visitor-stats.azurewebsites.net/agent-academy/recruit/09-add-an-agent-flow" alt="Analytics" />

---

**הצהרת אחריות**:  
מסמך זה תורגם באמצעות שירות תרגום AI [Co-op Translator](https://github.com/Azure/co-op-translator). למרות שאנו שואפים לדיוק, יש להיות מודעים לכך שתרגומים אוטומטיים עשויים להכיל שגיאות או אי דיוקים. המסמך המקורי בשפתו המקורית צריך להיחשב כמקור סמכותי. עבור מידע קריטי, מומלץ להשתמש בתרגום מקצועי אנושי. אנו לא נושאים באחריות לכל אי הבנות או פרשנויות שגויות הנובעות משימוש בתרגום זה.