<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "c04b3587170139bc23e3b5cfc24c89ac",
  "translation_date": "2025-10-17T01:18:18+00:00",
  "source_file": "docs/recruit/07-add-new-topic-with-trigger/README.md",
  "language_code": "fi"
}
-->
# üö® Teht√§v√§ 07: Lis√§√§ uusi aihe, jossa on laukaisin ja solmuja

## üïµÔ∏è‚Äç‚ôÇÔ∏è Koodinimi: `OPERATIIVINEN PYSY AIHEESSA`

> **‚è±Ô∏è Operaatioaikaikkuna:** `~60 minuuttia`

üé• **Katso opastusvideo**

[![Laukaisuvideon pikkukuva](../../../../../translated_images/video-thumbnail.a84cf7cb473be282861469420c5e2c16adb53bcfd64c7c07fbd579e8d32bf8b2.fi.jpg)](https://www.youtube.com/watch?v=7iPAZaA8nJs "Katso opastus YouTubessa")

## üéØ Teht√§v√§n kuvaus

Olet rakentanut agentin. Se kuuntelee, oppii ja vastaa kysymyksiin - mutta nyt on aika toimia tarkemmin. T√§ss√§ teht√§v√§ss√§ sukellat syv√§lle ja opetat agenttiasi vastaamaan tarkasti tiettyihin kysymyksiin.

Aiheiden ja laukaisimien avulla agenttisi voi:

- Tunnistaa tarkoituksen

- Ohjata keskusteluja loogisesti

- Ker√§t√§ ja tallentaa muuttujia

- Laukaista prosesseja ja ryhty√§ toimiin

Et vain rakenna dialogia, vaan kytket sen p√§√§t√∂ksentekokeskuksen. Tervetuloa Neuraaliseen Nexus-maailmaan.

## üîé Tavoitteet

T√§ss√§ teht√§v√§ss√§ opit:

1. Ymm√§rt√§m√§√§n, mit√§ aiheet ovat ja niiden roolin agentin rakenteellisessa keskustelussa
1. Oppimaan aiheiden anatomian, mukaan lukien laukaisulauseet ja keskustelusolmut
1. Tutustumaan erilaisiin keskustelusolmuihin ja k√§ytt√§m√§√§n Power Fx:√§√§ dynaamiseen logiikkaan
1. Luomaan r√§√§t√§l√∂ityj√§ aiheita alusta alkaen k√§ytt√§j√§n pyynt√∂jen ja teht√§vien k√§sittelyyn
1. Rakentamaan toimivan aiheen, joka yhdistyy SharePoint-dataan liittimien ja ty√∂kalujen avulla

## ü§î Mik√§ on aihe?

Aihe on rakenteellinen keskustelu, joka auttaa agenttiasi vastaamaan tiettyihin k√§ytt√§j√§n kysymyksiin tai teht√§viin. Ajattele aihetta mini-keskusteluna tai teht√§v√§n√§, jonka agenttisi voi hoitaa. Jokainen aihe on suunniteltu vastaamaan tiettyyn k√§ytt√§j√§n kysymykseen tai pyynt√∂√∂n.

### üåå Aiheen tarkoitus

Aiheilla on kolme yleist√§ tarkoitusta k√§ytt√§jien tarpeiden mukaan:

**Informatiivinen** - vastaa kysymyksiin, kuten:

- `Mik√§ on ‚Ä¶?`
- `Milloin ‚Ä¶?`
- `Miksi ‚Ä¶?`
- `Voitko kertoa minulle ‚Ä¶?`

**Teht√§v√§n suorittaminen** - auttaa k√§ytt√§ji√§ _tekem√§√§n_ jotain:

- `"Haluan ‚Ä¶"`
- `"Kuinka voin ‚Ä¶?"`
- `"Tarvitsen ‚Ä¶?"`

**Vianetsint√§** - ratkaisee ongelmia:

- `Jokin ei toimi ‚Ä¶`
- `Kohtaan virheilmoituksen ‚Ä¶`
- `N√§en jotain odottamatonta ‚Ä¶?`

Voit my√∂s luoda aiheita ep√§selville kysymyksille, kuten `Tarvitsen apua`, jotka pyyt√§v√§t k√§ytt√§j√§lt√§ lis√§tietoja ennen jatkamista.

## üê¶ Miksi aiheet ovat hy√∂dyllisi√§?

Aiheet auttavat sinua:

- J√§rjest√§m√§√§n agenttisi tiedot.

- Tekem√§√§n keskusteluista luonnollisempia.

- Ratkaisemaan k√§ytt√§j√§n ongelmat tehokkaasti.

## ü™∫ Aiheiden tyypit

1. **J√§rjestelm√§aiheet** - n√§m√§ ovat sis√§√§nrakennettuja ja k√§sittelev√§t yleisi√§ tapahtumia, kuten:
    - Keskustelun aloittaminen
    - Keskustelun lopettaminen
    - Virheiden k√§sittely
    - K√§ytt√§jien kirjautumisen pyyt√§minen
    - Eskalointi ihmisk√§sittelij√§lle

1. **R√§√§t√§l√∂idyt aiheet** - n√§m√§ luodaan k√§sittelem√§√§n tiettyj√§ teht√§vi√§ tai kysymyksi√§, kuten:
    - Ty√∂ntekij√§n lomapyynt√∂
    - Uuden tai korvaavan laitteen pyyt√§minen

![Aiheiden tyypit](../../../../../translated_images/7.0_01_Topics.6e55d2e01c1cc0994b7af05be3c1629b78d46b37cc82f59c7893d4ad90af707e.fi.png)

## üß¨ Aiheen anatomia

Jokainen aihe sis√§lt√§√§ yleens√§ seuraavat osat.

### üó£Ô∏è Laukaisulauseet

N√§m√§ ovat sanoja tai lauseita, joita k√§ytt√§j√§t voivat sanoa aloittaakseen aiheen.

**Esimerkkej√§:**

Lomapyynt√∂aiheelle laukaisulauseet voivat olla

- `Haluan pit√§√§ lomaa`
- `Pyyd√§ lomaa`
- `Hae vapaata`
- `Kuinka voin tehd√§ lomapyynn√∂n?`

Laitteen pyynt√∂aiheelle laukaisulauseet voivat olla

- `Tarvitsen uuden laitteen`
- `Voinko pyyt√§√§ laitetta?`
- `Voitko auttaa laitteen pyynn√∂ss√§?`

### üí¨ Keskustelusolmut

Aihe koostuu solmuista, jotka ovat askeleita, joita agentti seuraa, kun aihe laukaistaan. N√§it√§ askeleita yhdist√§m√§ll√§ rakennetaan keskusteluvirta, jota agentti seuraa vuorovaikutuksessa k√§ytt√§jien kanssa.

Ajattele n√§it√§ ohjeina tai toimintoina, kuten:

- K√§ytt√§j√§n kysymysten esitt√§minen
- Viestien l√§hett√§minen
- Ulkoisen palvelun, kuten lomahallintaj√§rjestelm√§n, kutsuminen
- Muuttujien asettaminen tai tarkistaminen
- Ehtojen k√§ytt√§minen keskustelun haaroittamiseen
- Ohjaaminen toiseen aiheeseen

![Keskustelusolmut](../../../../../translated_images/7.0_03_ConversationNodes.7b1d93b7d4522d544d7f9eed597a5ef30b9f96ee1670efd048528ce13423481a.fi.png)

Seuraavat ovat p√§√§tyypit solmuista, joita voit lis√§t√§ agenttiin:

#### L√§het√§ viesti

- **Tarkoitus** - l√§hett√§√§ viesti k√§ytt√§j√§lle.
- **Esimerkki** - `Kiitos pyynn√∂st√§si! Autan sinua siin√§.`

T√§m√§ solmu antaa agenttisi l√§hett√§√§ viestej√§ k√§ytt√§jille, jotka voivat olla yksinkertaista teksti√§ tai rikasta sis√§lt√∂√§, kuten kuvia, videoita, kortteja, pikavastauksia ja mukautettuja kortteja.

Voit personoida viestej√§ muuttujien avulla, lis√§t√§ useita viestivaihtoehtoja vaihtelun vuoksi ja jopa mukauttaa puhetta √§√§niaktivoiduilla kanavilla.

!!! tip
    Ajattele t√§t√§ "sano jotain" -blokiksi, joka auttaa agenttiasi kommunikoimaan selke√§sti ja vuorovaikutteisesti k√§ytt√§jien kanssa.

#### Kysy kysymys

- **Tarkoitus** - kysyy k√§ytt√§j√§lt√§ kysymyksen ja odottaa vastausta.
- **Esimerkki** - `Mitk√§ ovat lomap√§iv√§si?`

T√§m√§ solmu k√§ytet√§√§n kysym√§√§n k√§ytt√§jilt√§ tietty√§ tietoa keskustelun aikana ja tallentamaan heid√§n vastauksensa muuttujiksi my√∂hemp√§√§ k√§ytt√∂√§ varten.

Voit mukauttaa kysymyksen tyyppi√§, kuten tekstisy√∂tett√§, tai k√§ytt√§√§ entiteettej√§ m√§√§ritellyn arvolistan kanssa, josta k√§ytt√§j√§ valitsee, ja m√§√§ritt√§√§, miten agentti k√§ytt√§ytyy, jos k√§ytt√§j√§ antaa virheellisen vastauksen tai ohittaa kysymyksen.

Se tukee my√∂s rikasta sis√§lt√∂√§, kuten kuvia ja pikavastauksia, ja antaa sinun hienos√§√§t√§√§ validointia, uudelleenkysymist√§ ja keskeytysasetuksia, jotta keskustelu sujuu sujuvasti.

!!! tip
    Ajattele t√§t√§ "kysy ja kuuntele" -blokiksi, joka auttaa agenttiasi vuorovaikuttamaan k√§ytt√§jien kanssa rakenteellisella tavalla, jonka sin√§ m√§√§rit√§t.

#### Kysy mukautetulla kortilla

- **Tarkoitus** - l√§hett√§√§ rikastettu, vuorovaikutteinen kortti JSON:n avulla.
- **Esimerkki** - kortti, joka n√§ytt√§√§ kalenterin p√§iv√§m√§√§r√§n valitsimen k√§ytt√§j√§lle p√§iv√§m√§√§r√§n valitsemiseksi.

T√§m√§ solmu n√§ytt√§√§ rikastettuja, vuorovaikutteisia kortteja, joita k√§ytt√§j√§t voivat t√§ytt√§√§ ja l√§hett√§√§, kuten lomakkeita tekstikentill√§, painikkeilla ja kuvilla. Se tallentaa k√§ytt√§j√§n sy√∂tteen muuttujiksi, joita agenttisi voi k√§ytt√§√§ my√∂hemmin keskustelussa.

!!! tip
    Ajattele t√§t√§ mukautettavana "lomakkeen rakentaja" -blokiksi, joka tekee agentistasi kiinnostavamman ja kykenev√§mm√§n ker√§√§m√§√§n yksityiskohtaista tietoa k√§ytt√§jilt√§.

#### Lis√§√§ ehto

- **Tarkoitus** - lis√§√§ logiikkaa keskusteluun. Tarkistaa jotain ja p√§√§tt√§√§, mit√§ tehd√§ seuraavaksi.
- **Esimerkki** - jos k√§ytt√§j√§ sanoo `Kyll√§`, siirry seuraavaan vaiheeseen. Jos `Ei`, lopeta keskustelu.

T√§m√§ solmu luo p√§√§t√∂spisteit√§ agenttisi keskusteluvirtaan tarkistamalla, t√§ytt√§√§k√∂ muuttuja tietyt kriteerit. Jos ehto on tosi tai ep√§tosi, agentti seuraa eri polkuja.

!!! tip
    Ajattele t√§t√§ "jos-else" -blokiksi, joka auttaa agenttiasi tekem√§√§n p√§√§t√∂ksi√§ k√§ytt√§j√§n sy√∂tteen tai tallennetun datan perusteella.

#### Muuttujien hallinta

- **Tarkoitus** - tallentaa tai tyhjent√§√§ tietoa (kutsutaan muuttujiksi) keskustelun aikana.
- **Esimerkki** - tallentaa p√§iv√§m√§√§r√§n, jonka k√§ytt√§j√§ valitsi Kysy kysymys -solmussa, joka n√§ytt√§√§ mukautetun kortin.

T√§m√§ solmu antaa sinun tallentaa ja hallita tietoa keskustelun aikana, kuten k√§ytt√§j√§n nimen, vastauksen tai mieltymykset. Voit k√§ytt√§√§ erilaisia muuttujatyyppej√§, kuten teksti√§, numeroita tai p√§iv√§m√§√§ri√§, ja ne voivat olla rajattuja yhteen aiheeseen, jaettuja aiheiden v√§lill√§ (globaalit) tai jopa haettuja j√§rjestelm√§st√§ tai ymp√§rist√∂st√§.

!!! tip
    Ajattele t√§t√§ "muistilaatikkona", joka auttaa agenttiasi muistamaan tietoa ja k√§ytt√§m√§√§n sit√§ keskustelun edetess√§ k√§ytt√§j√§n kanssa.

#### Aiheen hallinta

- **Tarkoitus** - siirt√§√§ keskustelu toiseen aiheeseen tai askeleeseen aiheen sis√§ll√§, siirt√§√§ keskustelu tai lopettaa aiheen tai keskustelun.
- **Esimerkki** - ohjaa "Lomapolitiikka" -aiheeseen.

T√§m√§ solmu antaa agenttisi siirty√§ aiheesta toiseen ilman, ett√§ keskustelu alkaa alusta, lopettaa aiheen, siirt√§√§ tai lopettaa keskustelun tai siirty√§ eri askeleeseen saman aiheen sis√§ll√§. Se auttaa ohjaamaan k√§ytt√§ji√§ keskustelun eri osien l√§pi sujuvasti siirtym√§ll√§ aiheiden v√§lill√§, ja voit v√§litt√§√§ muuttujia niiden v√§lill√§ s√§ilytt√§√§ksesi kontekstin.

!!! tip
    Ajattele t√§t√§ "siirry toiseen osioon/askeleeseen" -blokiksi, joka auttaa agenttiasi olemaan joustava keskustelussa k√§ytt√§jien kanssa.

#### Lis√§√§ ty√∂kalu

- **Tarkoitus** - yhdist√§√§ ty√∂kaluihin, kuten liittimiin, agenttiprosesseihin, kehotteisiin, mukautettuun hakuun, hakukyselyyn, taitoihin, mallikontekstiprotokollaan.
- **Esimerkki** - Agenttiprosessi suoritetaan sen j√§lkeen, kun k√§ytt√§j√§ l√§hett√§√§ lomapyynt√∂ns√§.

T√§m√§ solmu antaa agenttisi mahdollisuuden olla vuorovaikutuksessa ulkoisten j√§rjestelmien kanssa tai suorittaa tiettyj√§ teht√§vi√§, kuten l√§hett√§√§ s√§hk√∂posteja, tarkistaa s√§√§t√§ tai k√§ytt√§√§ tietokantoja. Voit lis√§t√§ ty√∂kaluja sis√§√§nrakennettujen liittimien, mukautettujen API:iden, agenttiprosessien, kehotteiden tai yhdist√§√§ mallikontekstiprotokollan (MCP) palvelimiin ja jopa graafisen k√§ytt√∂liittym√§n automaation ty√∂p√∂yt√§sovelluksille tietokoneen k√§ytt√∂ty√∂kalun avulla.

!!! tip
    Ajattele ty√∂kaluja "toimintablokkeina", jotka antavat agentillesi supervoimia tehd√§ asioita _keskustelun_ ulkopuolella, kuten kutsua API:ta, suorittaa prosessi tai ker√§t√§ k√§ytt√§j√§n sy√∂tett√§ automaattisesti.

#### Generatiivinen vastaussolmu

- **Tarkoitus** - k√§ytt√§√§ suurta kielimallia tuottamaan luonnollisia, ihmism√§isi√§ vastauksia k√§ytt√§j√§n kysymyksen ja mahdollisten liitettyjen tietojen perusteella.
- **Esimerkki** - k√§ytt√§√§ liitetty√§ tietol√§hdett√§, joka sis√§lt√§√§ tietoa lomaoikeuksista, vastatakseen k√§ytt√§j√§n kysymyksiin lomapyynn√∂ist√§.

T√§m√§ solmu mahdollistaa agenttisi vastaamaan k√§ytt√§j√§n kysymyksiin eri tietol√§hteist√§, kuten verkkosivustoista, asiakirjoista, SharePointista tai mukautetusta datasta. Sit√§ voidaan k√§ytt√§√§ varaj√§rjestelm√§n√§, kun sopivaa aihetta ei l√∂ydy, tai aiheen sis√§ll√§ antamaan yksityiskohtaisempia, dynaamisia vastauksia m√§√§rittelemiisi l√§hteisiin perustuen.

!!! tip
    Ajattele t√§t√§ "√§lyk√§s vastausblokki", joka auttaa agenttiasi antamaan hy√∂dyllisi√§, tarkkoja vastauksia etsim√§ll√§ luotettavaa sis√§lt√∂√§, jonka olet m√§√§ritellyt.

#### HTTP-pyynt√∂solmu

- **Tarkoitus** - yhdist√§√§ agenttisi ulkoisiin j√§rjestelmiin l√§hett√§m√§ll√§ API-kutsuja (esimerkiksi `GET` tai `POST`) tietojen hakemiseksi tai p√§ivitt√§miseksi.
- **Esimerkki** - kun k√§ytt√§j√§ kysyy lomap√§ivien saldoaan, agentti suorittaa `GET`-pyynn√∂n lomahallintaj√§rjestelm√§√§n, hakee `remainingLeaveDays` API-vastauksesta ja vastaa k√§ytt√§j√§lle arvolla.

T√§m√§ solmu antaa agenttisi yhdist√§√§ ulkoisiin j√§rjestelmiin l√§hett√§m√§ll√§ REST API -kutsuja, kuten `GET`- tai `POST`-pyynt√∂j√§. Voit mukauttaa pyynt√∂√§ otsikoilla, sis√§ll√∂ll√§ ja jopa k√§ytt√§√§ Power Fx:√§√§ sis√§llytt√§√§ksesi dynaamisia tietoja, ja tallentaa vastauksen muuttujiksi my√∂hemp√§√§ k√§ytt√∂√§ varten keskustelussa.

!!! tip
    Ajattele t√§t√§ "hanki tietoa" -blokiksi, joka auttaa agenttiasi kommunikoimaan muiden palveluiden kanssa, kuten k√§ytt√§j√§tietojen hakeminen tai datan l√§hett√§minen toiseen j√§rjestelm√§√§n.

#### L√§het√§ tapahtuma

- **Tarkoitus** - antaa agenttisi l√§hett√§√§ ei-viestitoimintoja, kuten j√§rjestelm√§p√§ivityksi√§ tai ty√∂kalujen laukaisuja - asiakkaalle tai kanavalle, auttaen sit√§ suorittamaan teht√§vi√§.
- **Esimerkki** - reagoi k√§ytt√§j√§n liittymiseen keskusteluun n√§ytt√§m√§ll√§ tervetuloviestin.

T√§m√§ solmu antaa agenttisi l√§hett√§√§ ei-viestitoimintoja ulkoisiin j√§rjestelmiin tai kanaviin, jotka voivat sitten p√§√§tt√§√§, miten reagoida. Annat jokaiselle tapahtumalle nimen ja liit√§t siihen arvon, joka voi olla yksinkertainen numero tai teksti, muuttuja tai Power Fx -kaava, ja se l√§hetet√§√§n JSON-objektina.

!!! tip
    Ajattele t√§t√§ "hiljainen laukaisin" -blokiksi, joka auttaa agenttiasi tekem√§√§n asioita kulissien takana tai kommunikoimaan ulkoisten ty√∂kalujen kanssa ilman, ett√§ k√§ytt√§j√§n tarvitsee sanoa mit√§√§n.

## üèãüèª‚Äç‚ôÄÔ∏è Power Fx:n k√§ytt√∂ solmuissasi

Copilot Studiossa Power Fx on matalan koodin ohjelmointikieli, jota k√§ytet√§√§n lis√§√§m√§√§n logiikkaa ja dynaamista k√§ytt√§ytymist√§ agenttiisi. Se on sama kieli, jota k√§ytet√§√§n Microsoft Power Appsissa, ja se on suunniteltu yksinkertaiseksi ja Excel-tyyliseksi, mik√§ tekee siit√§ helppok√§ytt√∂isen kehitt√§jille ja ei-kehitt√§jille.

![Power Fx -kaava](../../../../../translated_images/7.3_13_EnterFormula.d17cc9f73e01e1cab8e2420a55bcb726ae0a0e55673f81ee3d7fe12d20148b92.fi.png)

### Mit√§ Power Fx voi tehd√§ aiheissa

- Asettaa ja k√§sitell√§ muuttujia
      - Esimerkki: `Set(userName, "Adele Vance")`
- Luoda ehtoja
      - Esimerkki: `If(score > 80, "Hyv√§ksytty", "Hyl√§tty")`
- Muotoilla ja muuntaa dataa
      - Esimerkki: `Text(DateValue, "pp/kk/vvvv")`

### Miksi k√§ytt√§√§ Power Fx:√§√§?

- **Joustava:** voit rakentaa logiikkaa ilman t√§ysi√§ koodirivej√§.

- **Tuttu:** jos olet k√§ytt√§nyt Excel-kaavoja, se tuntuu hyvin samankaltaiselta.

- **Tehokas:** se antaa sinun personoida keskusteluja, validoida sy√∂tteit√§ ja hallita, miten agenttisi k√§ytt√§ytyy k√§ytt√§j√§datan perusteella.

## üèóÔ∏è Kuinka luon ja muokkaan aiheita?

On kaksi tapaa, joilla voit luoda ja muokata aiheita agenteillesi.

### 1. Luo tyhj√§st√§

T√§m√§ antaa sinun rakentaa r√§√§t√§l√∂ityj√§ keskusteluvirtoja alusta alkaen, ja voit lis√§t√§ tai poistaa solmuja tarpeen mukaan, kun muokkaat aihetta.

![Lis√§√§ aihe](../../../../../translated_images/7.0_04_AddATopic.111df124a4a7ff8b41e3f577fbef08885ac52d9d6c0c705a82f5968e5ccc384d.fi.png)

#### Miksi t√§m√§ on hy√∂dyllist√§

- Se antaa sinulle t√§yden hallinnan siit√§, miten agenttisi vastaa
T√§m√§ mahdollistaa sen, ett√§ voit kuvata haluamasi asiat luonnollisella kielell√§, ja Copilot rakentaa keskustelun puolestasi. Sama p√§tee my√∂s aiheen muokkaamiseen ‚Äì k√§yt√§ luonnollista kielt√§, ja Copilot tarkistaa ja muokkaa aiheen puolestasi.

#### Mit√§ Copilot tukee

- Voi luoda ja muokata:
      - Viestisolmuja
      - Kysymyssolmuja
      - Ehtosolmuja
- Ei tue edistyneit√§ asetuksia, kuten miten k√§ytt√§j√§√§ kehotetaan vastaamaan uudelleen, jos h√§n ei vastaa, tai miten keskeytyksi√§ hallitaan kysymyksen aikana. Voit silti s√§√§t√§√§ n√§it√§ asetuksia manuaalisesti tarvittaessa.

#### Miksi t√§m√§ on hy√∂dyllist√§

- Nopeuttaa kehityst√§ teko√§lyavustuksella.
- Mahdollistaa keskittymisen logiikkaan ja k√§ytt√§j√§kokemukseen toistuvan asetuksen sijaan.
- Helpottaa keskustelujen kulkujen iterointia ja parantamista v√§h√§isell√§ vaivalla.

#### ‚ú® Esimerkkikehotteet

- **Luo aihe**
      - `Hyv√§ksy k√§ytt√§j√§n nimi, ik√§ ja syntym√§aika ja toista sitten heid√§n vastauksensa takaisin heille`
      - `Ker√§√§ k√§ytt√§j√§n katuosoite, osavaltio ja postinumero. K√§ytt√§j√§n tulisi voida yritt√§√§ uudelleen jokaista kysymyst√§ enint√§√§n 4 kertaa`

- **Muokkaa aihetta**
      - `Lis√§√§ kysymys k√§ytt√§j√§n syntym√§ajan kysymiseksi`
      - `Yhteenveto ker√§tyst√§ tiedosta Adaptive Cardissa.`

## üë©üèª‚Äçüé® OK, miten suunnittelen aiheet agentilleni?

### üßôüèª‚Äç‚ôÇÔ∏è Vaihe 1 - ymm√§rr√§, mit√§ k√§ytt√§j√§t tarvitsevat

Aloita tunnistamalla yleiset kysymykset tai teht√§v√§t, joita k√§ytt√§j√§t kysyv√§t agentiltasi. N√§m√§ voivat olla:

- Kysymyksi√§, joita k√§ytt√§j√§t kysyv√§t usein, kuten `mitk√§ ovat oikeuteni sairauslomiin?`
- Yleisi√§ teht√§vi√§, joita k√§ytt√§j√§t haluavat suorittaa, kuten lomakkeen l√§hett√§minen
- Ongelmia, joita k√§ytt√§j√§t usein kohtaavat, kuten kirjautumisongelmat

### üì¶ Vaihe 2 - Ryhmittele skenaariot

J√§rjest√§ k√§ytt√§jien tarpeet kolmeen kategoriaan aiheen tarkoituksen perusteella:

- Tiedottaminen - k√§ytt√§j√§ haluaa tiet√§√§ jotain
- Teht√§v√§n suorittaminen - k√§ytt√§j√§ haluaa tehd√§ jotain
- Ongelmanratkaisu - k√§ytt√§j√§ tarvitsee apua ongelman ratkaisemiseksi

### üó∫Ô∏è Vaihe 3 - Suunnittele keskustelu

Piirr√§ yksinkertainen keskustelun kulku siit√§, miten agentin tulisi vastata

- Aloita tervehdyksell√§ tai vahvistuksella
- Kysy jatkokysymyksi√§ saadaksesi lis√§tietoja
- Anna vastauksia tai suorita toimintoja

!!! tip
    Pid√§ keskustelu lyhyen√§ ja keskittyneen√§. Kysy vain, mit√§ on tarpeen.

### üîÄ Vaihe 4 - K√§sittele erilaisia keskustelutyyppej√§

Suunnittele molempia varten:

- **Yksivaiheinen** - yksi kysymys, yksi vastaus

- **Monivaiheinen** - edestakainen keskustelu jatkokysymyksineen

Esimerkki:

- K√§ytt√§j√§: `Haluan hakea lomaa.`

- Agentti: `Selv√§! Milloin haluaisit aloittaa lomasi?`

- K√§ytt√§j√§: `15. hein√§kuuta`

- Agentti: `Selv√§. Ja milloin lomasi p√§√§ttyy?`

- K√§ytt√§j√§: `22. hein√§kuuta.`

- Agentti: `Kiitos! Mik√§ on lomasi syy?`

- K√§ytt√§j√§: `Perheloma.`

- Agentti: `Kiitos tiedoista. Olen l√§hett√§nyt lomapyynt√∂si 15.‚Äì22. hein√§kuuta perhelomaa varten. Saat pian vahvistuksen.`

### ü§ñ Vaihe 5 - K√§yt√§ teko√§ly√§ odottamattomiin kysymyksiin

Vaikka olisit suunnitellut aiheen lomapyynt√∂j√§ varten, k√§ytt√§j√§t saattavat esitt√§√§ kysymyksi√§, jotka eiv√§t suoraan liity aiheeseen. T√§ss√§ teko√§lyominaisuudet, kuten _Conversational boosting_ -j√§rjestelm√§aihe, ovat hy√∂dyllisi√§.

T√§m√§ aihe sis√§lt√§√§ generatiivisten vastausten solmun, jonka avulla agenttisi voi k√§ytt√§√§ yhdistettyj√§ tietol√§hteit√§ heti. Kaikki agenttitasolla lis√§tyt tietol√§hteet sis√§ltyv√§t automaattisesti generatiivisten vastausten solmuun _Conversational boosting_ -j√§rjestelm√§aiheessa.

#### Esimerkki

- K√§ytt√§j√§: `Voinko siirt√§√§ k√§ytt√§m√§tt√∂m√§t lomap√§iv√§t ensi vuoteen?`

T√§m√§ kysymys ei ehk√§ ole osa ennalta m√§√§ritelty√§ aiheen kulkua, varsinkin jos aihe k√§sittelee vain lomapyynt√∂jen l√§hett√§mist√§.

#### Miten teko√§ly auttaa

Jos agenttisi on yhdistetty yrityksesi HR-politiikkadokumentteihin tai sis√§iseen verkkosivustoon, teko√§ly voi:

- Etsi√§ asiaankuuluvan lomapolitiikan
- Ymm√§rt√§√§ ja tiivist√§√§ s√§√§nn√∂t
- Agentti vastaa: `HR-politiikan mukaan voit siirt√§√§ k√§ytt√§m√§tt√∂m√§t lomap√§iv√§t seuraavaan kalenterivuoteen. Lis√§tietoja l√∂yd√§t HR-portaalin lomapolitiikkaosiosta.`

#### Miksi t√§m√§ on hy√∂dyllist√§

- Sinun ei tarvitse manuaalisesti luoda aihetta jokaiselle politiikkaan liittyv√§lle kysymykselle.
- Teko√§ly voi hakea tarkkoja vastauksia luotettavista tietol√§hteist√§.
- Parantaa k√§ytt√§j√§kokemusta tekem√§ll√§ agentista √§lykk√§√§mm√§n ja reagoivamman.

### üî¨ Vaihe 6 - Testaa aihe, keskustelun kulku

Ennen aiheen julkaisemista:

- Testaa k√§ytt√§m√§ll√§ oikeita kysymyksi√§ tai oikeita esimerkkisy√∂tteit√§.
- Varmista, ett√§ se kuulostaa luonnolliselta ja hy√∂dylliselt√§.

!!! tip
    Tee aiheeseesi parannuksia testauksen perusteella, kuten lis√§√§m√§ll√§ solmuja tai poistamalla solmuja ja ohjaamalla toiseen aiheeseen.

### ‚ö†Ô∏è Vaihe 7 - V√§lt√§ verkkosivuston sis√§ll√∂n kopioimista

√Ñl√§ kopioi sis√§lt√∂√§, joka on jo verkkosivustollasi.

- Keskity aiheisiin, joista k√§ytt√§j√§t kysyv√§t usein.
- Lis√§√§ uusia aiheita chat-historian tai tukipyynt√∂jen perusteella.

### ‚ú® Esimerkki keskustelun kulusta

Alla on esimerkki aiheesta, joka k√§sittelee lomapyynt√∂j√§.

#### Vaihe 1: Laukaisulause

K√§ytt√§j√§ kirjoittaa,

`Haluan hakea lomaa`

#### Vaihe 2: Agentti kysyy lis√§tietoja Adaptive Cardin avulla

Agentti kysyy,

`Selv√§! Mitk√§ p√§iv√§m√§√§r√§t haluaisit ottaa vapaaksi?`

Adaptive Card sis√§lt√§√§ aloitusp√§iv√§n ja lopetusp√§iv√§n kalenterivalintakontrollin.

#### Vaihe 3: K√§ytt√§j√§ antaa p√§iv√§m√§√§r√§t

K√§ytt√§j√§ valitsee aloitusp√§iv√§ksi 5. elokuuta 2025 ja lopetusp√§iv√§ksi 10. elokuuta 2025 ja l√§hett√§√§ kortin. P√§iv√§m√§√§r√§arvot tallennetaan Adaptive Cardin tuloksiin muuttujina.

#### Vaihe 4: Pilvivirtaus suoritetaan

Power Automate -pilvivirtaus suoritetaan, joka luo uuden pyynn√∂n lomahallintaj√§rjestelm√§√§n ja l√§hett√§√§ s√§hk√∂postin ilmoittaakseen esimiehelle lomapyynn√∂st√§.

#### Vaihe 5: L√§het√§ vahvistusviesti k√§ytt√§j√§lle

Agentti vastaa,

`Lomapyynt√∂si ajalle 5.‚Äì10. elokuuta on l√§hetetty. Esimiehesi tarkistaa sen ja palaa asiaan pian.`

## üß™ Labra 07 - Lis√§√§ uusi aihe keskustelusolmuilla

Nyt opimme, kuinka lis√§t√§ uusi aihe laukaisimella ja ty√∂kaluilla. T√§ss√§ labrassa k√§sitell√§√§n aiheen luomista tyhj√§st√§, jotta ymm√§rr√§t, kuinka mukauttaa aiheet tarpeisiisi.

- [7.1 Lis√§√§ uusi aihe tyhj√§st√§](../../../../../docs/recruit/07-add-new-topic-with-trigger)
- [7.2 M√§√§rit√§ laukaisimen sy√∂tteet ja tulosteet](../../../../../docs/recruit/07-add-new-topic-with-trigger)
- [7.3 Lis√§√§ ty√∂kalu liittimen avulla](../../../../../docs/recruit/07-add-new-topic-with-trigger)

### ‚ú® K√§ytt√∂tapaus

**Min√§ ty√∂ntekij√§n√§**

**Haluan** tiet√§√§, mitk√§ laitteet ovat saatavilla

**Jotta** minulla olisi lista saatavilla olevista laitteista

Aloitetaan!

### Esivaatimukset

1. **SharePoint-lista**

    K√§yt√§mme **Devices**-SharePoint-listaa [Lesson 00 - Kurssin asetukset - Vaihe 3: Luo uusi SharePoint-sivusto](../00-course-setup/README.md#step-4-create-new-sharepoint-site).

    Jos et ole viel√§ luonut **Devices**-SharePoint-listaa, palaa kohtaan [Lesson 00 - Kurssin asetukset - Vaihe 3: Luo uusi SharePoint-sivusto](../00-course-setup/README.md#step-4-create-new-sharepoint-site).

1. **Contoso Helpdesk Agent**

    K√§yt√§mme aiemmin luotua agenttia kohdasta [Lesson 06 - Luo mukautettu agentti luonnollisella kielell√§ Copilotin avulla ja yhdist√§ se tietoihisi](../06-create-agent-from-conversation/README.md).

### 7.1 Lis√§√§ uusi aihe tyhj√§st√§

1. Valitse **Topics-v√§lilehti** agentin nimen l√§hell√§. Jos et n√§e sit√§ n√§kyviss√§, valitse **+6**, jolloin n√§et **Topics**-listauksen.

    ![Valitse Topics](../../../../../translated_images/7.1_01_Topics.789ffa4f75830b5f25fb1eeb8fa3e8ba3810b95870cb3dc49d80d8f4ba15a00a.fi.png)

1. **Topics-v√§lilehti** latautuu, ja oletuksena _Custom_-aiheet n√§ytet√§√§n. Voit suodattaa aiheet All, Custom ja System. Custom- ja System-aiheet, jotka n√§et t√§ll√§ hetkell√§, luotiin automaattisesti, kun agentti otettiin k√§ytt√∂√∂n.

    Valitse **+ Add a topic** ja valitse **From blank**.

    ![Luo aihe tyhj√§st√§](../../../../../translated_images/7.1_02_FromBlank.f3fe83fad24825f8eb498b19af8e472810f657868613b96b3b4e033fa1042e75.fi.png)

1. Anna aiheelle nimi. Kopioi ja liit√§ seuraava.

    ```text
    Available devices
    ```

    ![Nime√§ aihe](../../../../../translated_images/7.1_03_TopicName.06eb34ebe94516c1d898b5dff183f9586f7526f9316bc122dca641ac29967966.fi.png)

1. Anna laukaisukuvauksen, joka kuvaa, mit√§ aihe tekee. Kopioi ja liit√§ seuraava.

    ```text
    This topic helps users find devices that are available from our SharePoint Devices list. User can ask to see available devices and it will return a list of devices that are available which can include laptops, smartphones, accessories and more.
    ```

    ![Anna nimi ja kuvaus laukaisimelle](../../../../../translated_images/7.1_04_TriggerDescription.cb748c0358b3af249fcc0fdb0b262185ffed14d8cf628186b8a65ad4bbf14172.fi.png)

### 7.2 M√§√§rit√§ laukaisimen sy√∂tteet ja tulosteet

1. Seuraavaksi lis√§√§mme uuden sy√∂tt√∂muuttujan, jota generatiivinen teko√§ly k√§ytt√§√§ orkesteroinnissaan saadakseen laitetyypin arvon k√§ytt√§j√§n viestist√§. Valitse aiheen **More ellipsis (...)** ja valitse **Details**, jotta n√§et aiheen yksityiskohdat.

    ![Valitse aiheen yksityiskohdat](../../../../../translated_images/7.2_01_SelectTopicDetails.cc1b97a86718e101084c366514cc306fe82243a014a44c579394e0f70ba5ca53.fi.png)

1. **Topic details**-paneeli on nyt latautunut. Valitse **Input**-v√§lilehti.

    ![Input-v√§lilehti](../../../../../translated_images/7.2_02_SelectInputTab.d0b900eb02a8f982324f59e3b7aca34c2cdba78263acdc9301225e1c3e6338b6.fi.png)

1. Valitse **Create a new variable**.

    ![Luo uusi sy√∂tt√∂muuttuja](../../../../../translated_images/7.2_03_CreateANewVariable.0d45780268d9b6250617c45a9ddd557cdaa23945b66539b313ca8d74f2c96cc2.fi.png)

1. Anna muuttujalle nimi. Kopioi ja liit√§ seuraava.

    ```text
    VarDeviceType
    ```

    ![Sy√∂tt√∂muuttujan nimi](../../../../../translated_images/7.2_04_VariableName.56555922eab13cad52fa29d846f4e515d82c2e9bf61c86705f080a1ba4f3b1af.fi.png)

1. Nyt meid√§n t√§ytyy m√§√§ritt√§√§ sy√∂tt√∂- ja tulostemuuttujamme. Seuraavat ovat ominaisuuksia, jotka voidaan m√§√§ritt√§√§ aiheen sy√∂tteille ja tulosteille.

    | Kentt√§    | Arvo |
    | ---------- | :--------- |
    | Miten agentti t√§ytt√§√§ t√§m√§n sy√∂tteen? | M√§√§ritt√§√§, miten agentti t√§ytt√§√§ t√§m√§n muuttujan arvolla ennen aiheen suorittamista. Oletuksena se on asetettu _T√§yt√§ dynaamisesti parhaalla vaihtoehdolla_. Muuten voit ohittaa sy√∂tteen arvolla kysym√§tt√§ k√§ytt√§j√§lt√§|
    | Muuttujan tietotyyppi  | Muuttujan tietotyyppi. Tuetut tietotyypit ovat `String`, `Boolean`, `Number`, `Date`, `DateTime`, `DateTimeNoTimeZone`, `Time`, `Record`, `Table`, `Unspecified`, `From sample data` |
    | N√§ytt√∂nimi   | Muuttujan nimi   |
    | Tunnista nimell√§  | Entiteettityyppi, jotta agentti voi tunnistaa oikean arvotyypin  |
    | Kuvaus    | Kuvaus auttaa agenttia t√§ytt√§m√§√§n sy√∂tteet automaattisesti ennen aiheen suorittamista tai luomaan kysymyksi√§ arvojen kysymiseksi   |

    _Miten agentti t√§ytt√§√§ t√§m√§n sy√∂tteen?_, _Muuttujan tietotyyppi_ ja _N√§ytt√∂nimi_ voivat pysy√§ ennallaan. P√§ivit√§ **Tunnista nimell√§**-ominaisuus **K√§ytt√§j√§n koko vastaus**.

    ![P√§ivit√§ Tunnista nimell√§](../../../../../translated_images/7.2_05_IdentifyAs.a502101e6f60c27ed8c8b1eff049b8ceedd0531845b932f9b7608ad3d8220090.fi.png)

1. Kopioi ja liit√§ seuraava kuvaukseksi.

    ```text
    List of possible values: Laptop, Desktop, Smartphone
    ```

    ![Kuvaus](../../../../../translated_images/7.2_06_InputDescription.844e1776080e595c6c221bcc33d7a269abcc7e4755c8f11b284c3950f42166b5.fi.png)

1. Seuraavaksi m√§√§ritell√§√§n aiheen tuloste. Valitse **Output**-v√§lilehti.

    ![Valitse Output-v√§lilehti](../../../../../translated_images/7.2_07_SelectOutputTab.ab5aa0a2f385f1492df5a67f8f2cbed752dc0258c1e1ddb9928d204405ec403a.fi.png)

1. Valitse **Create a new variable**.

    ![Luo uusi tulostemuuttuja](../../../../../translated_images/7.2_08_CreateANewVariable.5518205f121014ff4757af062bedfd38ce768c8f38291dd9d6489d67cd5d5dc8.fi.png)

1. P√§ivit√§ seuraavat ominaisuudet.

    **Muuttujan nimi** - Kopioi ja liit√§ seuraava.

    ```text
    VarAvailableDevices
    ```

    **Muuttujan tietotyyppi** - Valitse **Table** tietotyypiksi.

    **Muuttujan kuvaus** - Kopioi ja liit√§ seuraava.

    ```text
    List of available devices by device type
    ```

    ![Tulosteen ominaisuudet](../../../../../translated_images/7.2_09_OutputVariable.fb0e159fbad5052280040090352c50faf4d91228095c3762e75440b2842e0d29.fi.png)

1. Olemme nyt m√§√§ritt√§neet aiheen sy√∂tteet ja tulosteet. Valitse **X-ikoni** poistuaksesi **Topic details**-paneelista.

    ![Poistu aiheen yksityiskohtien paneelista.](../../../../../translated_images/7.2_10_ExitTopicDetailsPane.6e8981434f04049bef7ab93f9545ee433087e1c99cdfe27b355ee9858ddfde99.fi.png)

### 7.3 Lis√§√§ ty√∂kalu liittimen avulla

1. Seuraavaksi lis√§t√§√§n solmu, joka mahdollistaa agentin hakea laitelistauksen **Devices**-SharePoint-listasta. Valitse **+ ikoni** laukaisimen alapuolella.

    ![Lis√§√§ ty√∂kalu](../../../../../translated_images/7.3_01_AddNode.4656328835f7a28bc5f66c440d620a0990bf098e858619ff2c32a9b14fae7c4f.fi.png)

1. Valitse **Add a tool**-solmu ja sitten **Connector**-v√§lilehti. Etsi `Get items` ja valitse **Get items** SharePoint-liittimen toiminto.

    ![Valitse get items](../../../../../translated_images/7.3_02_GetItems.a6bdfb122449de789e7c58592f4c3e3a0f38b7bdcec2e0e5eab34b2d9d991f97.fi.png)

1. Liittimelle t√§ytyy luoda uusi yhteys. Valitse **chevron**-ikoni ja valitse **Create new connection**.

    ![Lis√§√§ ty√∂kalu](../../../../../translated_images/7.3_03_CreateNewConnection.03f49fab97e5f5f2a298e4b1b2e5081304c9c98c5f3ad5be0302c241c3d83d94.fi.png)

1. N√§ytet√§√§n kaksi vaihtoehtoa, joiden avulla voit yhdist√§√§ suoraan SharePoint Onlineen tai paikalliseen SharePointiin. Oletuksena **Connect directly (cloud-services)**-vaihtoehto on valittuna, ja sit√§ k√§yt√§mme yhteyden luomiseen.
Valitse **Luo**.

![Valitse Luo](../../../../../translated_images/7.3_04_SelectCreate.f2216f1e276ed153e06d5b5d47f170a0f9cc6854aa05f0736623acb3aeee1229.fi.png)

1. Valitse kirjautunut k√§ytt√§j√§tilisi.

![Valitse kirjautunut k√§ytt√§j√§tili](../../../../../translated_images/7.3_05_SelectSignedInUserAccount.e27a0ada918a1cf4477f3966adcc5f1d033a8998a2589d02d1208f21f5d93938.fi.png)

1. Seuraavaksi sinun t√§ytyy vahvistaa, ett√§ k√§ytt√§j√§tili√§si voidaan k√§ytt√§√§ SharePoint-liittimen yhteyteen. Valitse **Salli p√§√§sy**.

![Valitse salli p√§√§sy](../../../../../translated_images/7.3_06_AllowAccess.69f012dbcedf7ebc1869e648a5eaa661d085b15aa7a2eb69e69c5b63adfa36dd.fi.png)

1. Valitse **L√§het√§**, jotta **Hae kohteet** SharePoint-liittimen toiminto lis√§t√§√§n solmuksi aiheeseen.

![L√§het√§](../../../../../translated_images/7.3_07_ConnectedSelectSubmit.16ec31ef062696cabb6e7964879debd177f2b9162f88ef95ae1b4eed85e08a21.fi.png)

1. **Hae kohteet** SharePoint-liittimen toiminto on nyt lis√§tty aiheeseen. Voimme nyt aloittaa toiminnon sy√∂tteiden m√§√§ritt√§misen. Valitse **kolmen pisteen (...) kuvake** ja valitse **Ominaisuudet**.

![Valitse Ominaisuudet](../../../../../translated_images/7.3_08_GetItemsProperties.32bdda34a1d73a55eb2893695e4b4cf15cd899806e616d0b0b5015471414c9d7.fi.png)

1. **Hae kohteet** -m√§√§rittelypaneeli avautuu, ja oletuksena n√§et **Sy√∂tteet**-v√§lilehden. Valitse **Aloitus**-v√§lilehti ja kirjoita kuvaus **K√§ytt√∂kuvaus**-kentt√§√§n. Kopioi ja liit√§ seuraava.

    ```text
    Retrieves devices from SharePoint list
    ```

> T√§m√§ on hy√∂dyllist√§, kun tarkastelemme agentin _Hallitse yhteyksi√§si_ -sivua. Palaamme t√§h√§n pian.

![Hae kohteet kuvaus](../../../../../translated_images/7.3_09_UpdateDescription.76a8d2ebddd4c3e4ca423daad7485afa60f31f37c97e16529d94e224f9709d60.fi.png)

1. Valitse **Sy√∂tteet**-v√§lilehti ja valitse **Contoso IT** -sivusto ja **Laitteet**-lista, jonka loit [Oppitunti 00 - Kurssin asennus - Vaihe 3: Luo uusi SharePoint-sivusto](../00-course-setup/README.md#step-4-create-new-sharepoint-site).

![M√§√§rit√§ Hae kohteet sy√∂tteet](../../../../../translated_images/7.3_10_GetItemsInputs.17f8689e660c480dd405ab2ab57db34dcd2b8e697ec09d54c8f8649eb619c58b.fi.png)

1. Nyt, jotta n√§ytet√§√§n vain laitteet SharePoint-listasta seuraavien perusteella:
   - valittu arvo,
   - ja vain laitteet, joiden tila on _Saatavilla_,

   meid√§n t√§ytyy soveltaa suodatinta. T√§m√§ tehd√§√§n sy√∂tt√§m√§ll√§ suodatuskysely Power Fx:n avulla. Valitse **kolmen pisteen (...) kuvake**.

![Valitse kolmen pisteen kuvake](../../../../../translated_images/7.3_11_SelectVariable.33bfe876cc230569ea0f6cc5e1efa100432509e44342e9b3d6a9e65ee2bc525f.fi.png)

1. Oletuksena olet **Mukautettu**-v√§lilehdell√§. Valitse **Kaava**-v√§lilehti.

![Valitse Kaava-v√§lilehti](../../../../../translated_images/7.3_12_SelectFormula.a7aba25c95956d113865da3f30da3f3872e12c7a7a8f3c65098a3e3fac9616a4.fi.png)

1. Valitse **laajenna**-kuvake suurentaaksesi **Kaava**-kentt√§√§. Kopioi ja liit√§ seuraava Power Fx -lauseke.

K√§yt√§mme `Concatenate`-funktiota luodaksemme lausekkeen, joka suodattaa:
   - SharePoint-sarakkeen **Tila** yht√§ kuin _Saatavilla_,
   - ja SharePoint-sarakkeen **Omaisuustyyppi** yht√§ kuin _valittu laite kysymyssolmusta_.

    ```text
    Concatenate("Status eq 'Available' and AssetType eq '", Topic.VarDeviceType, "'")
    ```

Valitse **Lis√§√§**.

![Sy√∂t√§ Power Fx -lauseke ja valitse lis√§√§](../../../../../translated_images/7.3_13_EnterFormula.d17cc9f73e01e1cab8e2420a55bcb726ae0a0e55673f81ee3d7fe12d20148b92.fi.png)

1. Power Fx -lauseke sovelletaan nyt **Hae kohteet** -toiminnon Suodatuskysely-sy√∂teparametriin. Seuraavaksi valitse **Kaikki kohteet** -n√§kym√§ **Rajoita sarakkeet n√§kym√§n mukaan** -kohdassa. T√§m√§ hakee vain listan sarakkeet valitun n√§kym√§n perusteella.

![Listaa sarakkeet n√§kym√§n mukaan](../../../../../translated_images/7.3_14_LimitColumnsByView.5537126aaa087bd7f81cc35dfe182aa72cdbec4fe1fb5c2e15823a1275dcaa71.fi.png)

1. Seuraavaksi p√§ivit√§mme muuttujan nimen tulosteelle. Valitse **Tulosteet**-v√§lilehti ja valitse `GetItems`-muuttuja.

![P√§ivit√§ muuttuja](../../../../../translated_images/7.3_15_ConfigureOutputs.d4cb0c5c8e37d1859ed705bd1582fce2d063e7f4d65cc036127a846d743ff391.fi.png)

1. P√§ivit√§ nimi seuraavaksi.

    ```text
    VarDevices
    ```

![P√§ivit√§ muuttujan nimi](../../../../../translated_images/7.3_16_RenameVariable.55d7adb355808d39fe515bf980af123c60e218fa427354079e86efc412dc0f83.fi.png)

1. Vierit√§ alas ja valitse **K√§ytt√∂**-osiossa **Globaali**. T√§m√§ tekee muuttujasta k√§ytett√§viss√§ olevan kaikille aiheille.

![P√§ivit√§ globaaliksi muuttujaksi](../../../../../translated_images/7.3_17_UpdateToGlobalVariable.09bdb05c0938898a04e48b6bcebee1584f17080b63b2577594be74f9f77a5bc3.fi.png)

1. **Sulje** **Muuttujan ominaisuudet** -paneeli.

![Sulje Muuttujan ominaisuudet -paneeli](../../../../../translated_images/7.3_18_ExitVariablePropertiesPane.b1a5e76dfe490bdf1274d8e8c78df44f9b3e3542180fa52fb6f903a980ef31ab.fi.png)

1. Valitse **plus +** -kuvake lis√§t√§ksesi uuden solmun, valitse **Muuttujan hallinta** ja sen j√§lkeen **Aseta muuttujan arvo**.

![Lis√§√§ Aseta muuttujan arvo -solmu](../../../../../translated_images/7.3_19_AddSetAVariableValueNode.958d21c21727ef92506fe76cf0458f05ac8508d84d0a4917077d2889410330e2.fi.png)

1. Valitse **suurempi kuin** -kuvake **Aseta muuttuja** -sy√∂teparametrille.

![Aseta muuttuja](../../../../../translated_images/7.3_20_SelectAVariable.9d3beb144002569b947c90cbec22afcc9cb34f277b21e3f65dcaf69831abc438.fi.png)

1. Valitse aiemmin luotu aiheen tuloste muuttujaksi, **VarAvailableDevices**.

![Tallenna aihe](../../../../../translated_images/7.3_21_SelectVarAvailableDevicesOutput.8d7259eb6ce1bc7c89de10b768b62dc3008ad7468c094249282bfe66436d1672.fi.png)

1. Seuraavaksi valitse **kolmen pisteen (...) kuvake** m√§√§ritt√§√§ksesi muuttujan arvon.

![Valitse muuttujan arvo](../../../../../translated_images/7.3_22_SelectVariable.f16319e644afc97d24a8cddaf64a7df9fcc52acd7e284b21f20b685a6e53887a.fi.png)

1. K√§yt√§mme nyt PowerFx-lauseketta asettaaksemme muuttujan arvoksi `value`-ominaisuuden, joka palautetaan **Hae kohteet** -vastauksessa, ja teemme [muuttujan laajuuden](https://learn.microsoft.com/microsoft-copilot-studio/advanced-power-fx?WT.mc_id=power-172618-ebenitez) globaaliksi lis√§√§m√§ll√§ etuliitteen `Global`.

Valitse **Lis√§√§** ja **tallenna** aihe.

![Power Fx -kaava muuttujan arvolle](../../../../../translated_images/7.3_23_PowerFxFormula.f860daa2c8423021926f0697177279ede3d8d443714d471a77e655c3c42edb07.fi.png)

1. Seuraavaksi meid√§n t√§ytyy p√§ivitt√§√§ agentin ohjeet. Valitse **Yleiskatsaus**-v√§lilehti ja valitse **Muokkaa**.

![Muokkaa ohjeita](../../../../../translated_images/7.3_24_EditInstructions.ce65a6cbcd74792885230af1da432fbb4079fd8b0f5af24ab840453a900b67a8.fi.png)

1. Lis√§√§ uusi rivi ohjeisiin, kopioi ja liit√§ seuraava.

    ```text
    - Help find available devices and give full details using [Available devices]. Always extract the VarDeviceType from the inputs. After giving device details, ask the user if they want to request a device from the list of available devices.
    ```

T√§m√§ ohje opastaa generatiivista teko√§ly√§ k√§ytt√§m√§√§n **Saatavilla olevat laitteet** -laukaisinta n√§ytt√§√§kseen listan saatavilla olevista laitteista **Laitteet** SharePoint-listasta. Valitse koko aiheen paikkamerkki hakasuluissa.

![Lis√§√§ ohjeet](../../../../../translated_images/7.3_25_AddInstructions.1e83853476fed3c8b1c43e657bd1c1351108702288a8f688d8543fbf1c2946fb.fi.png)

1. Kirjoita eteenp√§in vinoviiva `/` ja lista aiheista ilmestyy. Valitse **Saatavilla olevat laitteet** -aihe.

![Viittaa laukaisimeen](../../../../../translated_images/7.3_26_SelectAvailableDevicesTopic.1a1beaa256f5417153b7bc55de848b89778f666c213b3a3935444526ab881f0b.fi.png)

1. **Tallenna** p√§ivitetyt ohjeet.

![Tallenna ohjeet](../../../../../translated_images/7.3_27_SaveUpdatedInstructions.39908bb60990be971039bf392088fd0ecfa148c4496a6ad7413e1267b9091623.fi.png)

1. Nyt testaamme p√§ivitetty√§ agenttia. Valitse **Testaa** oikeasta yl√§kulmasta n√§ytt√§√§ksesi testipaneelin ja **p√§ivit√§** testipaneeli. Sy√∂t√§ seuraava viesti agentille.

    ```text
    I need a laptop
    ```

![Testaa](../../../../../translated_images/7.3_28_Test.a273496de273bf3bebb9ac1504c1cedd8947c250ccf8454cf38b2effbdf66f71.fi.png)

1. Ennen kuin agentti voi jatkaa, k√§ytt√§j√§n t√§ytyy vahvistaa, ett√§ heid√§n yhteytt√§√§n voidaan k√§ytt√§√§. Valitse **Salli**.

![Valitse salli](../../../../../translated_images/7.3_29_SelectAllow.9f508c4001270252924d889792ecf0cc2a984954b903bb00f7ce6b2dc43d08e3.fi.png)

1. Agentti suorittaa SharePoint-ty√∂kalun, joka hakee suodatetun listan laitteista, joissa laitetyyppi on "kannettava" ja tila on "saatavilla", Power Fx -lausekkeen avulla. Vastaus palautetaan k√§ytt√§j√§lle luettelomuodossa.

![Testin vastaus](../../../../../translated_images/7.3_30_TestResponse.b60253568edc8b68d737a62960f4a3fa3620d2ba4658b05aa2503ad5fd763383.fi.png)

1. Viimeinen asia, jonka opimme, on tarkastella k√§ytettyj√§ yhteyksi√§ agentin _Hallitse yhteyksi√§si_ -sivulla. Valitse **kolmen pisteen (...)** ja valitse **Hallitse yhteytt√§**.

![Hallitse yhteytt√§](../../../../../translated_images/7.3_31_ManageConnections.151932ec4f907e020b67c418cf591806da164c74f6b1d9b73c04d7374d9fc505.fi.png)

1. T√§ll√§ sivulla n√§emme kaikki agentin k√§ytt√§m√§t yhteydet. T√§ll√§ hetkell√§ listattuna on vain yksi yhteys, joka liittyy SharePoint-ty√∂kaluun, joka lis√§ttiin aiheeseen. Valitse **1 ty√∂kalu** **K√§yt√∂ss√§**-sarakkeessa.

![K√§yt√∂ss√§](../../../../../translated_images/7.3_32_UsedBy.1e5ff032f1e02a565a0dafdde4f9436486ed3f012fcc23b824871a71b6de543e.fi.png)

1. T√§√§ll√§ n√§emme yksityiskohdat Hae kohteet -toiminnosta ja muistamme aiemmin sy√∂tetyn _k√§ytt√∂kuvauksen_. T√§m√§ on paikka, jossa n√§emme k√§ytt√∂kuvauksen. Valitse **Sulje**.

> T√§m√§ kertoo meille, mit√§ toimintoja k√§ytet√§√§n ja niiden tarkoituksen. T√§m√§ auttaa pit√§m√§√§n yhteydet j√§rjestyksess√§ üìÅ.

![K√§ytt√∂kuvaus](../../../../../translated_images/7.3_33_UsedByInformation.74a42aedb6dc906c678ff8b281a8706e1c0156ee7375111ed20e02d1a1dfd808.fi.png)

1. Palaa Copilot Studion selaimen v√§lilehteen ja **p√§ivit√§** testipaneeli tyhjent√§√§ksesi testin.

## ‚úÖ Teht√§v√§ suoritettu

Onnittelut! üëèüèª Olet oppinut, kuinka lis√§t√§ uusi aihe alusta alkaen, kuinka lis√§t√§ ty√∂kalu, joka kutsuu Hae kohteet SharePoint-liittimen toiminnon, ja k√§ytt√§√§ Power Fx:√§√§ suodattamaan vastausta niin, ett√§ palautetaan vain laitteet, joiden tila on saatavilla ja laitetyyppi on kannettava. üôåüèª

T√§m√§ on **Lab 07 - Lis√§√§ uusi aihe keskustelusolmuilla** loppu, valitse alla oleva linkki siirty√§ksesi seuraavaan oppituntiin. Laajennamme t√§m√§n laboratorion k√§ytt√∂tapausta seuraavan oppitunnin laboratoriossa.

‚è≠Ô∏è [Siirry **Paranna k√§ytt√§j√§vuorovaikutusta mukautetuilla korteilla** -oppituntiin](../08-add-adaptive-card/README.md)

## üìö Taktiset resurssit

üîó [K√§yt√§ j√§rjestelm√§aiheita](https://learn.microsoft.com/microsoft-copilot-studio/authoring-system-topics?mc_id=power-172618-ebenitez)

üîó [Aiheet Microsoft Copilot Studiossa](https://learn.microsoft.com/microsoft-copilot-studio/guidance/topics-overview?WT.mc_id=power-172618-ebenitez)

üîó [Aiheiden laukaisimien asettaminen](https://learn.microsoft.com/microsoft-copilot-studio/authoring-triggers?WT.mc_id=power-172618-ebenitez)

üîó [Agenttiaiheiden m√§√§ritt√§minen](https://learn.microsoft.com/microsoft-copilot-studio/guidance/defining-chatbot-topics?WT.mc_id=power-172618-ebenitez)

üîó [Luo lausekkeita Power Fx:ll√§](https://learn.microsoft.com/microsoft-copilot-studio/advanced-power-fx?WT.mc_id=power-172618-ebenitez)

üì∫ [Luo aiheita luonnollisella kielell√§](https://aka.ms/ai-in-action/copilot-studio/ep6)

üì∫ [Lis√§√§ toimintoja agenteille liittimien avulla](https://aka.ms/ai-in-action/copilot-studio/ep4)

<img src="https://m365-visitor-stats.azurewebsites.net/agent-academy/recruit/07-add-new-topic-with-trigger" alt="Analytiikka" />

---

**Vastuuvapauslauseke**:  
T√§m√§ asiakirja on k√§√§nnetty k√§ytt√§m√§ll√§ teko√§lypohjaista k√§√§nn√∂spalvelua [Co-op Translator](https://github.com/Azure/co-op-translator). Vaikka pyrimme tarkkuuteen, huomioithan, ett√§ automaattiset k√§√§nn√∂kset voivat sis√§lt√§√§ virheit√§ tai ep√§tarkkuuksia. Alkuper√§ist√§ asiakirjaa sen alkuper√§isell√§ kielell√§ tulisi pit√§√§ ensisijaisena l√§hteen√§. Kriittisen tiedon osalta suositellaan ammattimaista ihmisk√§√§nn√∂st√§. Emme ole vastuussa v√§√§rink√§sityksist√§ tai virhetulkinnoista, jotka johtuvat t√§m√§n k√§√§nn√∂ksen k√§yt√∂st√§.