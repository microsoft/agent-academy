<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "75efaf515d5694d4fd549bfd6518901a",
  "translation_date": "2025-10-21T18:11:11+00:00",
  "source_file": "docs/operative-preview/03-automate-triggers/README.md",
  "language_code": "fa"
}
-->
# مأموریت 03: افزودن محرک‌های رویداد برای عملکرد خودکار

--8<-- "disclaimer.md"

## 🕵️‍♂️ نام رمز: `عملیات نقطه سیگنال`

> **⏱️ مدت زمان عملیات:** `~45 دقیقه`

## 🎯 خلاصه مأموریت

خوش آمدید، مأمور. در [مأموریت 02](../02-multi-agent/README.md) - شما یاد گرفتید که چگونه یک عامل فرعی پذیرش درخواست و یک عامل متصل آماده‌سازی مصاحبه بسازید تا قابلیت‌های عامل اصلی استخدام خود را گسترش دهید.

وظیفه شما، اگر تصمیم به پذیرش آن دارید، **عملیات نقطه سیگنال** است - ورود به عمق **محرک‌های رویداد** - ارتقای سیستم عامل خود از حالت واکنشی به **عملکرد خودکار**. شما عوامل خود را از حالت پاسخگویی به سوالات به حالت پیش‌بینی نیازها و اقدام مستقل تبدیل خواهید کرد. از طریق محرک‌های رویداد و جریان‌های خودکار، عامل استخدام شما ایمیل‌های رزومه ورودی را شناسایی می‌کند، پیوست‌ها را به صورت خودکار پردازش می‌کند، داده‌ها را در Dataverse ذخیره می‌کند و تیم استخدام منابع انسانی شما را از طریق Microsoft Teams مطلع می‌کند - در حالی که شما بر وظایف با ارزش‌تر تمرکز می‌کنید.

به دنیای جایی که اتوماسیون با هوش ترکیب می‌شود خوش آمدید.

## 🔎 اهداف

در این مأموریت، شما یاد خواهید گرفت:

1. چگونه محرک‌های رویداد رفتار خودکار عامل را بدون تعامل کاربر فعال می‌کنند
1. تفاوت‌های بین عوامل تعاملی و خودکار در Copilot Studio
1. چگونه محرک‌های رویداد ایجاد کنیم که به صورت خودکار پیوست‌های ایمیل را پردازش کرده و فایل‌ها را به Dataverse آپلود کنند
1. چگونه جریان‌های عامل بسازیم که کارت‌های تطبیقی را به کانال‌های Teams برای اطلاع‌رسانی ارسال کنند
1. چگونه داده‌ها را بین محرک‌های رویداد و جریان‌های عامل برای اتوماسیون انتها به انتها منتقل کنیم

## 🤔 محرک رویداد چیست؟

قبلاً در [Recruit](../../recruit/10-add-event-triggers/README.md)، ما درباره محرک‌های رویداد یاد گرفتیم. بیایید یک مرور سریع بر این موضوع داشته باشیم در صورتی که آن را از دست داده باشید.

**محرک‌های رویداد** به یک عامل اجازه می‌دهند که _به تنهایی_ عمل کند وقتی چیزی در سیستم دیگر اتفاق می‌افتد - بدون نیاز به پیام کاربر. وقتی رویداد تنظیم شده فعال می‌شود - مانند "ایجاد آیتم جدید در SharePoint"، "ایمیل جدید"، "وظیفه Planner اختصاص داده شده"، یا حتی یک تکرار زمانی، یک کانکتور یک بار داده محرک به عامل شما ارسال می‌کند. سپس عامل دستورالعمل‌های شما را دنبال می‌کند تا تصمیم بگیرد که کدام اقدامات یا موضوعات را فراخوانی کند.

### ویژگی‌های کلیدی

- **فعال‌سازی خودکار:**
      - برخلاف محرک‌های موضوع که وقتی کاربر به عامل پیام می‌دهد شروع می‌شوند، محرک‌های رویداد از رویدادهای خارجی فعال می‌شوند و رفتار پیش‌فعال را ممکن می‌سازند.

- **مبتنی بر بار داده:**
      - هر رویداد یک بار داده (متغیرها + دستورالعمل‌های اختیاری) از طریق یک کانکتور ارسال می‌کند. عامل از دستورالعمل‌های تعریف‌شده شما و بار داده برای انتخاب اقدام بعدی استفاده می‌کند.
      - به عنوان مثال _فراخوانی یک موضوع_ یا _اجرای اقدامات تعریف‌شده توسط ابزارها_.

- **نمونه‌های آماده:**
      - فایل یا آیتم ایجاد شده در SharePoint/OneDrive
      - وظیفه Planner تکمیل شده/اختصاص داده شده
      - پاسخ ارسال شده به Microsoft Forms
      - تکرار/برنامه زمانی

    دسترسی به این موارد به سیاست‌های داده سازمان شما که در Power Automate تنظیم شده‌اند بستگی دارد.

- **نیاز به ارکستراسیون تولیدی:**
      - محرک‌های رویداد فقط زمانی در دسترس هستند که ارکستراسیون تولیدی برای عامل فعال شده باشد.

- **هزینه/مصرف:**
      - هر تحویل محرک به عنوان یک پیام به ظرفیت Copilot Studio محاسبه می‌شود.
      - به عنوان مثال یک تکرار 10 دقیقه‌ای هر 10 دقیقه یک پیام ارسال می‌کند.

- **مدل احراز هویت و تنظیمات:**
      - شما محرک‌ها را در نمای کلی عامل، تحت _محرک‌ها_ اضافه می‌کنید. احراز هویت برای کانکتور محرک از حساب سازنده عامل استفاده می‌کند ("احراز هویت نویسنده عامل").
      - شما می‌توانید پارامترهای محرک و بار داده را در پورتال سازنده Power Automate ویرایش کنید.

- **آزمایش و مشاهده‌پذیری:**
      - شما می‌توانید محرک‌ها را از پنل آزمایش عامل آزمایش کنید و رفتار را با نقشه فعالیت قبل از انتشار بررسی کنید.

!!! info "خلاصه برای توسعه‌دهندگان"

    محرک‌های رویداد را به عنوان **سیگنال‌های مشابه وب‌هوک** در نظر بگیرید که یک بار داده ساختاریافته را به عامل شما ارسال می‌کنند و به آن اجازه می‌دهند _کار را آغاز کند_ و اقدامات را در سیستم‌ها زنجیره‌ای کند - بدون انتظار برای درخواست کاربر.

### محرک‌های موضوع - تفاوت آن‌ها

قبلاً شما درباره محرک‌های موضوع در [Recruit](../../recruit/07-add-new-topic-with-trigger/README.md) یاد گرفتید، اما ممکن است هنوز در مورد تفاوت محرک‌های _موضوع_ و _رویداد_ و اینکه چرا این تمایز برای درک اینکه چه چیزی یک عامل را خودکار می‌کند مهم است، سوال داشته باشید.

محرک‌های موضوع کنترل می‌کنند _چه زمانی یک موضوع اجرا شود_، معمولاً در پاسخ به پیام کاربر.

- در ارکستراسیون تولیدی، محرک پیش‌فرض **توسط عامل** است - برنامه‌ریز موضوعی را انتخاب می‌کند که نام/توضیحات آن بهترین تطابق را با پیام کاربر دارد.
- در ارکستراسیون کلاسیک، پیش‌فرض **عبارات** است - برنامه‌ریز موضوعی را انتخاب می‌کند که یک یا چند عبارت محرک بهترین تطابق را با پیام کاربر دارد.

سایر انواع محرک شامل `پیام دریافت شده`، `رویداد دریافت شده`، `فعالیت دریافت شده`، `به‌روزرسانی مکالمه`، `فراخوانی دریافت شده`، `عدم فعالیت` و `پایان برنامه‌ریزی` هستند.

!!! info "تفاوت اصلی"

    محرک‌های موضوع _شروع‌کننده فعالیت مکالمه_ در داخل چت هستند.
    
    محرک‌های رویداد _شروع‌کننده رویداد سیستم_ هستند که از طریق کانکتورها ارسال می‌شوند و می‌توانند عامل را بدون هیچ مکالمه‌ای اجرا کنند.

### راهنمای سریع محرک موضوع در مقابل محرک رویداد

- **محرک موضوع:** کاربر (یا فعالیت چت) گفت/انجام داد X ➡️ اجرای موضوع T.
- **محرک رویداد:** SharePoint/Planner/ایمیل/تایمر فعال شد با بار داده P ➡️ عامل دستورالعمل‌ها را ارزیابی می‌کند ➡️ اقدامات/موضوعات را بر اساس آن فراخوانی می‌کند.

## 🏓 عامل تعاملی در مقابل عامل خودکار - مقایسه

حالا که تفاوت بین محرک‌های رویداد و محرک‌های موضوع را می‌دانید، بیایید تفاوت بین عامل تعاملی و عامل خودکار را یاد بگیریم.

در اصطلاح Copilot Studio، "تعاملی" به عوامل اشاره دارد که عمدتاً از طریق **موضوعات** در یک چت یا کانال تعامل دارند. "خودکار" به عواملی اشاره دارد که همچنین از **محرک‌های رویداد** برای اجرا بدون ورودی کاربر استفاده می‌کنند.

جدول زیر تفاوت‌ها و شباهت‌های آن‌ها را خلاصه می‌کند.

| بعد                               | عامل تعاملی          | عامل خودکار                                                                                              |
|-----------------------------------|-----------------------|----------------------------------------------------------------------------------------------------------|
| نحوه شروع                        | کاربر (یا فعالیت چت) یک موضوع را فعال می‌کند. مثال: توسط عامل، عبارات، پیام دریافت شده.   | محرک رویداد خارجی یک بار داده از طریق کانکتور به عامل ارسال می‌کند. مثال: SharePoint، Planner، ایمیل، برنامه زمانی و غیره. |
| استفاده اصلی                     | پرسش و پاسخ، جریان‌های هدایت‌شده، اقدامات درخواست‌شده در چت - Teams، وب و غیره.  | عملیات پیش‌فعال و اتوماسیون پس‌زمینه - واکنش به تغییرات سیستم و سپس اطلاع‌رسانی، ثبت، یا هماهنگی وظایف. |
| سطح محرک                         | محرک‌های موضوع: توسط عامل / عبارات / پیام دریافت شده / انواع فعالیت / فراخوانی / عدم فعالیت / پایان برنامه‌ریزی | کتابخانه محرک‌های رویداد از طریق کانکتورها؛ بار داده شامل داده‌های رویداد + دستورالعمل‌های اختیاری است. |
| برنامه‌ریز (ارکستراسیون تولیدی)  | به شدت برای محرک‌های توسط عامل و پایان برنامه‌ریزی استفاده می‌شود تا موضوعات را انتخاب/ترتیب دهد. | برای محرک‌های رویداد ضروری است؛ عامل از دستورالعمل‌ها + بار داده برای تصمیم‌گیری در مورد اقدامات/موضوعات استفاده می‌کند. |
| مثال معمول                       | کاربر می‌پرسد "سیاست بازپرداخت ما چیست؟" → موضوع اجرا می‌شود، دانش را جستجو می‌کند، پاسخ می‌دهد. | وظیفه جدید Planner اختصاص داده شده → محرک رویداد فعال می‌شود → عامل پیام Teams ارسال می‌کند، رکورد را به‌روزرسانی می‌کند، یا موضوعی را فراخوانی می‌کند. |
| مسیر تنظیم                       | ایجاد موضوعات، تعریف نوع محرک، نوشتن دیالوگ/اقدامات؛ انتشار به کانال‌ها. | افزودن محرک رویداد (نمای کلی → محرک‌ها)، احراز هویت کانکتور با اعتبارنامه نویسنده عامل، پیکربندی بار داده/دستورالعمل‌ها؛ آزمایش از طریق پنل آزمایش؛ انتشار. |
| احراز هویت و حاکمیت              | تحت زمینه کانال/احراز هویت اجرا می‌شود؛ محرک‌های موضوع به فعالیت‌های چت در کانال‌های مجاز پاسخ می‌دهند. | دسترسی محرک به سیاست‌های داده Power Automate بستگی دارد؛ کانکتورها تحت حساب سازنده عامل اجرا می‌شوند. |
| مشاهده‌پذیری                     | آزمایش موضوعات در Copilot Studio، بررسی رونوشت‌های مکالمه/فعالیت‌ها. | استفاده از آزمایش محرک و نقشه فعالیت برای اعتبارسنجی اجرا قبل از انتشار، نظارت بر فعالیت پس از انتشار. |
| تأثیر ظرفیت                      | هر پیام کاربر/پاسخ عامل یک پیام مصرف‌کننده ظرفیت است. | هر تحویل رویداد نیز یک پیام است، به علاوه هر اقدام بعدی. مثال: یک تکرار 10 دقیقه‌ای = 6 پیام در ساعت |

### چه زمانی از کدام استفاده کنیم؟

- **محرک‌های موضوع (تعاملی)** را انتخاب کنید وقتی کاربران مکالمه عامل را آغاز می‌کنند - پرسش‌های متداول، پذیرش هدایت‌شده، یا وظایف سبک فرمان در داخل چت. محرک توسط عامل برنامه‌ریز نیاز به تنظیم دستی عبارات را کاهش می‌دهد.
- **محرک‌های رویداد (خودکار)** را اضافه کنید وقتی عامل باید مکالمه را آغاز کند یا خود اقدام کند - در به‌روزرسانی‌های SharePoint/Dataverse، ایمیل‌های ورودی، یا در یک برنامه زمانی. این شما را از عملیات واکنشی به عملیات پیش‌فعال منتقل می‌کند.

## نکات توسعه‌دهنده و موارد مهم

1. **ارکستراسیون تولیدی را فعال کنید** برای هر عاملی که می‌خواهید خودکار کنید. محرک‌های رویداد در غیر این صورت نمایش داده نمی‌شوند.

1. **بار داده را زود مدل کنید.** تصمیم بگیرید که چه فیلدهای حداقلی عامل شما از محرک نیاز دارد مانند `itemId`، `assignedTo`، `dueDate` و دستورالعمل‌های مختصر اضافه کنید که به عامل می‌گوید بر اساس مقادیر بار داده کدام اقدام/موضوع را فراخوانی کند.

1. **دامنه احراز هویت مهم است.** محرک‌ها با استفاده از حساب سازنده عامل احراز هویت می‌شوند. اطمینان حاصل کنید که آن حساب دارای مجوزهای کانکتور مناسب است و با سیاست‌های داده Power Automate مطابقت دارد.

1. **هزینه و نویز را کنترل کنید.** تکرارهای با فرکانس بالا یا منابع بسیار پرحرف می‌توانند به سرعت مصرف پیام را افزایش دهند - در صورت امکان محدود کنید یا شرایطی را در محرک اضافه کنید تا رویدادها را فیلتر کنید.

1. **قبل از انتشار آزمایش کنید.** از **آزمایش محرک** و نقشه فعالیت برای مشاهده برنامه و اقدامات فراخوانی‌شده استفاده کنید - دستورالعمل‌ها/بار داده را تا زمانی که رفتار پایدار شود تکرار کنید.

## 🧪 آزمایشگاه 03 - خودکارسازی ایمیل‌های درخواست کاندیدا

ما در مرحله بعدی یک محرک رویداد به **عامل استخدام** اضافه خواهیم کرد و یک جریان عامل در **عامل پذیرش درخواست** فرعی ایجاد خواهیم کرد تا پردازش بیشتر برای خودکارسازی انجام شود.

### ✨ سناریوی استفاده

!!! info ""

    **به عنوان یک** استخدام‌کننده منابع انسانی

    **می‌خواهم** از رسیدن ایمیلی با رزومه به صندوق ورودی‌ام که به صورت خودکار به Dataverse آپلود شده است مطلع شوم

    **تا بتوانم** از رزومه‌های ارسال‌شده توسط ایمیل برای درخواست‌ها که به صورت خودکار به Dataverse آپلود شده‌اند مطلع بمانم

ما این کار را با استفاده از دو تکنیک انجام خواهیم داد:

1. یک محرک رویداد برای زمانی که ایمیل می‌رسد،
    1. بررسی کنید که `contentType` فایل برابر با `PDF` به عنوان نوع فرمت باشد.
    1. فایل را استخراج کرده و با استفاده از اقدامات از طریق کانکتور Dataverse به Dataverse آپلود کنید.
    1. سپس یک درخواست به عامل ارسال کنید برای پردازش بیشتر با انتقال پارامترهای ورودی از اقدامات Dataverse.

1. یک جریان عامل به **عامل پذیرش درخواست** فرعی اضافه خواهد شد که توسط درخواست در محرک رویداد فراخوانی می‌شود.
    1. از پارامترهای ورودی منتقل‌شده از درخواست محرک رویداد در یک کارت تطبیقی ارسال‌شده به یک کانال در Microsoft Teams برای اطلاع‌رسانی تیم استخدام منابع انسانی استفاده کنید. کارت تطبیقی شامل لینکی به ردیف در Dataverse خواهد بود که در **عامل استخدام** مشاهده خواهد شد.

بیایید شروع کنیم!

### ✨ پیش‌نیازها برای تکمیل این مأموریت

شما باید **یکی از موارد زیر را داشته باشید**:

- **مأموریت 01 و مأموریت 02 را تکمیل کرده باشید** و عامل استخدام خود را آماده کرده باشید، **یا**
- **راه‌حل شروع مأموریت 03 را وارد کنید** اگر تازه شروع می‌کنید یا نیاز به جبران دارید. [دانلود راه‌حل شروع مأموریت 03](https://aka.ms/agent-academy)

!!! note "وارد کردن راه‌حل و داده‌های نمونه"
    اگر از راه‌حل شروع استفاده می‌کنید، به [مأموریت 01](../01-get-started/README.md) برای دستورالعمل‌های دقیق در مورد وارد کردن راه‌حل‌ها و داده‌های نمونه به محیط خود مراجعه کنید.

شما همچنین به دسترسی به **Microsoft Teams** نیاز دارید تا تمرین دوم آزمایشگاه ارسال کارت تطبیقی به Microsoft Teams را تکمیل کنید.

### آزمایشگاه 3.1 - خودکارسازی آپلود رزومه‌ها به Dataverse دریافت‌شده توسط ایمیل

1. در عامل استخدام، به پایین در **تب نمای کلی** بروید و **+ افزودن محرک** را انتخاب کنید.

       ![افزودن محرک به عامل](../../../../../translated_images/3.1_01_AddTrigger.4d5f4d13a4a6b19fe9ff89e3a483601199d7643236d6df65ff81dfea76d1d443.fa.png)

1. لیستی از محرک‌ها ظاهر خواهد شد. **وقتی ایمیل جدیدی می‌رسد (V3)** را انتخاب کنید و **بعدی** را انتخاب کنید.

       ![انتخاب محرک وقتی ایمیل جدیدی می‌رسد (V3)](../../../../../translated_images/3.1_02_WhenANewEmailArrives.a250875915165d97c1af6eebba70f16fbfc845a37d4d354c9f35a55aa459035e.fa.png)

1. اکنون **نام محرک** و **اتصال‌های ورود** برای برنامه‌های لیست‌شده را مشاهده خواهیم کرد.

       نام محرک را به موارد زیر تغییر دهید،
    
       ```text
       وقتی ایمیل جدیدی از یک متقاضی می‌رسد
       ```

       مطمئن شوید که یک علامت سبز در کنار هر یک از اتصال‌های برنامه‌های لیست‌شده مشاهده می‌کنید. اگر علامت سبز نمی‌بینید، از طریق سه نقطه (...) وارد شوید و **+ اتصال جدید** را انتخاب کنید تا یک اتصال جدید ایجاد کنید.

       ![به‌روزرسانی جزئیات برای نام محرک و بررسی اتصال‌ها](../../../../../translated_images/3.1_03_RenameTriggerName.3eb80b25bea5f874a51aab600ffd333359de3a981e41eed1b4fc7c8f27eef323.fa.png)

1. مرحله نهایی تنظیم ویژگی‌های ورودی محرک است. ویژگی‌های زیر را به موارد زیر به‌روزرسانی کنید،

     | ویژگی | نحوه تنظیم | جزئیات |
     |----------|------------|---------|
     | **شامل پیوست‌ها (اختیاری)** | منوی کشویی | بله |
     | **فیلتر موضوع (اختیاری)** | تایپ/وارد کردن با کیبورد | درخواست |
     | **فقط با پیوست‌ها (اختیاری)** | منوی کشویی | بله |

       **ایجاد محرک** را انتخاب کنید.

       ![پیکربندی ورودی‌های محرک](../../../../../translated_images/3.1_04_ConfigureTriggerInputs.2151044f4953b31b40402c2a94fd63fb71fe8eede27a5cbf1d124d4300318446.fa.png)

1. پس از ایجاد، یک پیام تأیید ظاهر خواهد شد که محرک به عامل اضافه شده است. **بستن** را انتخاب کنید و محرک در
اکنون قصد داریم محرک رویداد را به‌روزرسانی کنیم تا قابلیت‌های خودکارسازی بیشتری به آن اضافه کنیم. روی **سه نقطه (...)** کنار محرک کلیک کنید و گزینه **Edit in Power Automate** را انتخاب کنید.

![انتخاب Edit in Power Automate](../../../../../translated_images/3.1_05_SelectEditInPowerAutomate.d298b51d7980cf2fd20a9d8193745aef4ce8097a4a2d33341e2dc159b9bfc099.fa.png)

1. محرک به‌عنوان یک جریان در پورتال سازنده Power Automate بارگذاری می‌شود. چیزی که مشاهده می‌کنید، طراح جریان در پورتال سازنده Power Automate است. اینجا جایی است که می‌توانیم منطق و اقدامات بیشتری برای خودکارسازی اضافه کنیم. محرک در بالای صفحه ظاهر می‌شود و **ارسال یک درخواست به کوپایلوت مشخص‌شده برای پردازش** به‌عنوان آخرین اقدام در جریان نمایش داده می‌شود.

![طراح جریان در پورتال سازنده Power Automate](../../../../../translated_images/3.1_06_EditInPowerAutomate.f8967ace56354224574517f31a2a2ce0a5b5d3ab85bfb9ec6cf70e83ab1b8e6d.fa.png)

1. به‌طور پیش‌فرض، محرک **هنگامی که یک ایمیل جدید دریافت می‌شود** در Power Automate ممکن است چندین ایمیل را به‌صورت دسته‌ای پردازش کند اگر چندین ایمیل به‌طور همزمان دریافت شوند و جریان فقط یک‌بار برای دسته اجرا شود.

برای اطمینان از اینکه جریان به‌صورت جداگانه برای هر ایمیل اجرا می‌شود، تنظیمات **Split On** را در تنظیمات محرک فعال کنید و `@triggerOutputs()?['body/value']` را در فیلد آرایه کشویی انتخاب کنید.

با فعال کردن **Split On** و تنظیم فیلد آرایه به `@triggerOutputs()?['body/value']`، جریان به‌صورت جداگانه برای هر پیام اجرا می‌شود، حتی اگر چندین پیام به‌طور همزمان دریافت شوند.

![فعال کردن تنظیمات Split On در محرک](../../../../../translated_images/3.1_07_UpdateTriggerSettings.0f363c4f4655276732575fa795bf1ad1568df34d34b703c85073591cc8585609.fa.png)

1. حالا بیایید منطق جدیدی اضافه کنیم تا نوع فایل پیوست را بررسی کنیم. ما فقط می‌خواهیم فایل‌های پیوست با فرمت .PDF را آپلود کنیم و نه تصاویر (این‌ها ممکن است از امضاهای ایمیل باشند). روی آیکون **+** زیر محرک کلیک کنید و گزینه **Control** را در بخش **ابزارهای داخلی** انتخاب کنید.

![انتخاب Control](../../../../../translated_images/3.1_08_Control.2fa6987b64ae20d5c8343d1b15937432ab6c893750c4b1427df56067023fd437.fa.png)

1. اقدام **Condition** را انتخاب کنید.

![انتخاب اقدام Condition](../../../../../translated_images/3.1_09_AddConditionAction.a7eec0b2a42d4a7c54bd305f0c480b72e3feec155a4e2468e12279082257f21f.fa.png)

1. اکنون شرط را تنظیم می‌کنیم تا بررسی کنیم که آیا نوع فایل پیوست .PDF است یا خیر. در فیلد **Choose a value**، آیکون **صاعقه** یا **fx** در سمت راست را انتخاب کنید.

1. در فیلد **Search** عبارت زیر را وارد کنید:

```text
content type
```

1. سپس پارامتر **Attachments Content-Type** را از محرک انتخاب کنید.

1. بعد، گزینه **Add** را انتخاب کنید تا ورودی محتوای پویا را به پارامتر **Id** اقدام اضافه کنید.

![تنظیم اقدام Condition](../../../../../translated_images/3.1_10_SetDynamicContentValue_V2.23c3d0438146a5ff0d695077e65a3b1c8b230b54c51ded8a099c6e99a948e9ed.fa.png)

1. بیایید اینجا کمی مکث کنیم، احتمالاً متوجه شدید که اقدام **For each** به‌طور خودکار ظاهر شد.

اقدام **For each** را انتخاب کنید. این اقدام نشان‌دهنده حلقه زدن از طریق هر پیوست در ایمیل است، زیرا پارامتر **Attachments Content-Type** از محرک به هر پیوست مرتبط است.

در پشت صحنه، این یک آرایه است و به همین دلیل اقدام **For each** به‌طور خودکار اضافه شد وقتی پارامتر **Attachments Content-Type** را در اقدام **Condition** انتخاب کردیم.

برای اطلاعات بیشتر در این مورد، بلوک یادگیری اضافی زیر را گسترش دهید.

??? info "یادگیری اضافی: اقدام For each به‌طور خودکار ظاهر می‌شود"

🤔 **چرا "Apply to each" یا "For each" به‌طور خودکار ظاهر می‌شود؟**

وقتی پارامتری (محتوای پویا) را انتخاب می‌کنید که نمایانگر یک لیست یا آرایه از آیتم‌ها است - برای مثال، لیستی از پیوست‌ها، ایمیل‌ها یا ردیف‌ها - Power Automate تشخیص می‌دهد که ممکن است بخواهید هر آیتم را به‌صورت جداگانه پردازش کنید.

برای کمک به شما در این کار، Power Automate به‌طور خودکار یک حلقه **“Apply to each”** (یا **For each**) را در اطراف اقدام شما اضافه می‌کند. این تضمین می‌کند که اقدام شما یک‌بار برای هر آیتم در لیست اجرا می‌شود، به‌جای تلاش برای پردازش کل لیست به‌صورت یکجا (که ممکن است باعث خطا شود).

🦋 **مثال**

- اگر "Attachments" را از یک اقدام قبلی انتخاب کنید (که یک آرایه است)، و سعی کنید از آن در اقدامی استفاده کنید که انتظار یک فایل واحد را دارد، Power Automate اقدام شما را در یک حلقه **"Apply to each"** (یا **For each**) قرار می‌دهد.
- به این ترتیب، اقدام شما برای **هر پیوست** - یکی در یک زمان - اجرا می‌شود.

💡 **نکات کلیدی**

- **خودکار:** حلقه به‌طور خودکار ظاهر می‌شود تا به شما کمک کند هر آیتم را در یک مجموعه پردازش کنید.
- **جلوگیری از خطاها:** بدون حلقه، اقدام شما ممکن است شکست بخورد زیرا نمی‌تواند چندین آیتم را به‌طور همزمان پردازش کند.
- **نشانه بصری:** این یک روش بصری برای نشان دادن این است که جریان شما اقدام را برای هر آیتم در لیست تکرار خواهد کرد.

![توضیح اقدام For Each](../../../../../translated_images/3.1_11_ForEach.82bd7b62b815fdbcd67acff0a633137cf03175940c670361ea8669b0df892927.fa.png)

1. در فیلد دیگر **Choose a value**، عبارت زیر را وارد کنید:

```text
application/pdf
```

این اطمینان حاصل می‌کند که برای هر فایل پیوست، بررسی می‌شود که فرمت فایل .PDF باشد.

![EqualToValue](../../../../../translated_images/3.1_12_EqualToValue.66c107cb8105c1cd3d166b8a5bf690b8dfc30aa2bd2af83c438a9e44d1b544b0.fa.png)

1. اکنون مسیر **True** را تنظیم می‌کنیم تا فایل را از ایمیل استخراج کرده و آن را در جدول **Resume** در Dataverse آپلود کنیم.

یک اقدام جدید در مسیر **True** اضافه کنید و عبارت `html to text` را جستجو کنید. اقدام **Html to text** را انتخاب کنید.

برای اطلاعات بیشتر درباره اقدام **Html to text**، بلوک یادگیری اضافی زیر را گسترش دهید.

??? info "یادگیری اضافی: اقدام Html to text"

🤔 **اقدام "HTML to text" چیست؟**

اقدام **HTML to text** در Power Automate برای تبدیل محتوای HTML به متن ساده استفاده می‌شود. این اقدام به‌ویژه زمانی مفید است که داده‌هایی (مانند ایمیل‌ها، محتوای وب یا پاسخ‌های API) دریافت می‌کنید که شامل تگ‌های HTML هستند و می‌خواهید فقط متن قابل خواندن را بدون هیچ‌گونه قالب‌بندی یا کد استخراج کنید.

⚙️ **چگونه کار می‌کند؟**

- **ورودی:** شما یک رشته از محتوای HTML (برای مثال، متن ایمیل) ارائه می‌دهید.
- **خروجی:** اقدام تمام تگ‌های HTML را حذف کرده و فقط متن ساده را بازمی‌گرداند.

👍🏻 **چه زمانی باید از آن استفاده کنید؟**

- زمانی که می‌خواهید متن قابل خواندن را از ایمیل‌ها، صفحات وب یا پاسخ‌های API که شامل HTML هستند استخراج کنید.
- قبل از ارسال محتوا به سیستم‌هایی که از قالب‌بندی HTML پشتیبانی نمی‌کنند (مانند پیام‌های SMS، پیام‌های Teams یا پایگاه‌های داده).
- برای پاک‌سازی داده‌ها برای پردازش یا تحلیل بیشتر.

🔭 **کجا می‌توان آن را پیدا کرد؟**

- در Power Automate برای جریان‌های عامل، اقدام `HTML to text` را جستجو کنید. این اقدام تحت کانکتور **Data Operations** قرار دارد.

💡 **نکات کلیدی**

- تمام تگ‌های HTML را حذف می‌کند و فقط متن را باقی می‌گذارد.
- اسکریپت‌ها/استایل‌ها را تفسیر یا اجرا نمی‌کند - فقط تگ‌ها را حذف می‌کند.
- برای پاک‌سازی داده‌ها و آماده‌سازی محتوا برای خروجی‌های متن ساده مفید است.

![اضافه کردن اقدام HTML to text](../../../../../translated_images/3.1_13_AddHTMLToTextAction.2aa9468b87dbeb847c083f24da0fe99438b39f826b13a70982ec255a97c2aa80.fa.png)

1. اکنون باید یک مرجع اتصال جدید برای اقدام **Html to text** ایجاد کنیم. گزینه **Add new** را انتخاب کنید.

![اضافه کردن مرجع اتصال جدید](../../../../../translated_images/3.1_14_AddNewConnection.4a23546976b62e7f0e882ac1379950e5bfdcaa702070313cb84a1d22b06a79a7.fa.png)

1. اقدام اکنون قابل تنظیم است. پارامتر **Body** را از محرک اضافه کنید. در فیلد **Content**، آیکون **صاعقه** یا **fx** در سمت راست را انتخاب کنید.

![اضافه کردن محتوای پویا](../../../../../translated_images/3.1_15_AddDynamicContent.0624a9808f55b993efb6d00bf941a88389655e2ab9970ba2b9a1538272fe9643.fa.png)

1. در تب **Dynamic content**، عبارت `body` را جستجو کنید و پارامتر **Body** را انتخاب کنید، سپس گزینه **Add** را انتخاب کنید.

![اضافه کردن پارامتر Body](../../../../../translated_images/3.1_16_AddDynamicContent.40b7eccc080c20513eed5663062b2a63d40d6482eaf2d42fe4e29cb94797f098.fa.png)

1. تنظیم این اقدام به پایان رسیده است، بنابراین از اقدام خارج شوید و با انتخاب دو براکت زاویه‌دار («) که به سمت چپ اشاره می‌کنند، پانل را جمع کنید.

![جمع کردن پانل اقدام](../../../../../translated_images/3.1_17_CollapseAction.ca2c346efb58f8240372c3d145fa10ba609cab1c2075d7df1a9388c82fab79f5.fa.png)

1. یک اقدام جدید اضافه کنید با کلیک روی **+ icon** زیر اقدام **Html to text** که پانل اضافه کردن اقدامات را بارگذاری می‌کند. کانکتور **Microsoft Dataverse** را انتخاب کنید.

![اضافه کردن اقدام جدید](../../../../../translated_images/3.1_18_AddDataverseAction.5f4be9eb96e22dac239e5545bab5ad9d08b138c2cbcbc700680f33445e132506.fa.png)

1. اقدام **Add a new row** را انتخاب کنید.

![اضافه کردن اقدام Add a new row](../../../../../translated_images/3.1_19_AddANewRow.48e0a3868821e59ed2a299ccb6a521af27b2430082381d48be38087be62c7c15.fa.png)

1. نام اقدام را تغییر دهید با انتخاب **سه نقطه (...)**، متن زیر را کپی و جای‌گذاری کنید:

```text
Add a new Resume row
```

برای پارامتر **Table name**، عبارت `res` را جستجو کنید و جدول **Resumes** را انتخاب کنید.

![تغییر نام اقدام و تنظیم پارامتر Table name](../../../../../translated_images/3.1_20_RenameAndSelectResumesTable.89f8485653abb7fda1d6eb44210951f05a05ed6f7450a51895079dfd8e72c8bf.fa.png)

1. فیلد **Resume Title** را انتخاب کنید و آیکون **صاعقه** یا **fx** در سمت راست را انتخاب کنید.

![تنظیم پارامتر Resume Title](../../../../../translated_images/3.1_21_AddDynamicContent.9ee1f89420d5a4aa56797944166208f6e9b0ec67116625168fbcefb907850224.fa.png)

1. در تب **Function**، عبارت زیر را وارد کنید که از تابع `item()` استفاده می‌کند:

```text
item()?['name']
```

برای اطلاعات بیشتر درباره تابع `item()`، بلوک یادگیری اضافی زیر را گسترش دهید.

??? info "یادگیری اضافی: تابع `item()`"

🤔 **تابع `item()` چیست؟**

- وقتی از اقدام **Apply to each** استفاده می‌کنید، Power Automate از طریق هر عنصر در یک مجموعه (آرایه) عبور می‌کند.
- این تابع بیشتر در داخل اقداماتی مانند **Apply to each** (یا **For each**)، **Select** یا **Filter array** استفاده می‌شود.

⚙️ **چگونه کار می‌کند؟**

- `item()` یک تابع است که آیتم فعلی در حال پردازش در یک حلقه یا عملیات آرایه را بازمی‌گرداند.
- در داخل آن حلقه، `item()` به عنصر _فعلی_ در حال پردازش اشاره دارد.

📌 **کجا از آن استفاده می‌شود؟**

- **Apply to each:** برای دسترسی به ویژگی‌های آیتم فعلی.
- **Select:** برای تبدیل هر آیتم در یک آرایه.
- **Filter array:** برای ارجاع به آیتم فعلی در حال ارزیابی.

🦋 **مثال**

- عبارت داخل یک حلقه:
       -  `item()?['Email']`
- این ویژگی `Email` آیتم فعلی را دریافت می‌کند.

💡 **نکات کلیدی**

- `item()` _حساس به زمینه_ است: همیشه به آیتم فعلی در حلقه یا عملیات آرایه‌ای که در آن هستید اشاره دارد.
- اگر حلقه‌ها را تو در تو کنید، می‌توانید از `items('LoopName')` برای ارجاع به آیتم‌ها در یک حلقه خاص استفاده کنید.

گزینه **Add** را انتخاب کنید تا عبارت به پارامتر **Resume Title** اضافه شود.

![اضافه کردن عبارت برای پارامتر Resume Title](../../../../../translated_images/3.1_22_ResumeTitleParameter.9e4fa71a5251cb899e7b09bcc3052eeda1e512841f929118eb9e2b1d232ecb07.fa.png)

1. هنوز باید چندین پارامتر دیگر را تنظیم کنیم، گزینه **Show all** را انتخاب کنید و در فیلد **Cover Letter**، آیکون **صاعقه** یا **fx** در سمت راست را انتخاب کنید.

در تب **Function**، عبارت زیر را وارد کنید که از همان عبارت در [ماموریت قبلی](../02-multi-agent/README.md) استفاده می‌کند:

```text
if(greater(length(body('Html_to_text')), 2000), substring(body('Html_to_text'), 0, 2000), body('Html_to_text'))
```

این عبارت بررسی می‌کند که آیا _متن_ از اقدام **Html to text** طولانی‌تر از 2000 کاراکتر است یا خیر، و اگر چنین باشد، فقط 2000 کاراکتر اول را بازمی‌گرداند؛ در غیر این صورت، متن کامل را بازمی‌گرداند.

![اضافه کردن عبارت برای پارامتر Cover Letter](../../../../../translated_images/3.1_23_CoverLetterParameter.d2b521d6b37d05ac4760c91de2964b6d062585a333af6989d9ac0794a4139463.fa.png)

1. عبارت اکنون به فیلد **Cover Letter** اضافه شده است.

![عبارت اضافه‌شده به پارامتر Cover Letter](../../../../../translated_images/3.1_24_ExpressionForCoverLetter.3d18124b10b76bad92db61c529ae395b0bb05f3215e3b783771e76ef7677664e.fa.png)

1. برای فیلد **Source Email Address**، عبارت `from` را جستجو کنید و پارامتر **From** را از محرک انتخاب کنید زیرا این پارامتر شامل مقدار آدرس ایمیل است.

![پارامتر Source Email Address](../../../../../translated_images/3.1_25_FromParameter.1ed1be46711f6705fb807996f6f1e873adc22e285186a851272e0cf3855487ef.fa.png)

1. برای فیلد **Upload Date**، آیکون **صاعقه** یا **fx** در سمت راست را انتخاب کنید. در تب **Function**، عبارت زیر را وارد کنید که از تابع `utcNow()` استفاده می‌کند:

```text
utcNow()
```

برای اطلاعات بیشتر درباره تابع `utcNow`، بلوک یادگیری اضافی زیر را گسترش دهید.

??? info "یادگیری اضافی: تابع `utcNow`"

🤔 **تابع `utcNow()` چیست؟**

- تابع utcnow() در Power Automate تاریخ و زمان فعلی را در زمان هماهنگ جهانی (UTC) در قالب ISO 8601 بازمی‌گرداند، مانند: `2025-09-23T04:32:14Z`

🦋 **مثال**

- عبارت:
       -  `concat('Report generated on ', utcnow())`
- خروجی:
       - گزارش تولید شده در `2025-09-23T04:32:14Z`

💡 **نکات کلیدی**
- **بدون نیاز به آرگومان‌ها (پارامترهای ورودی):** همیشه زمان‌بندی فعلی UTC را ارائه می‌دهد.
   - **موارد استفاده**
       - افزودن زمان‌بندی به گزارش‌ها یا نام فایل‌ها
       - مقایسه زمان فعلی با تاریخ‌های دیگر
       - برنامه‌ریزی یا شرایط مبتنی بر زمان

![پارامتر تاریخ بارگذاری](../../../../../translated_images/3.1_26_UploadDateParameter.21b0afc9807bf680c1c432066f1644d4d018cb4988ad0c0788b5186cea285e02.fa.png)

1. اکنون پیکربندی اقدام **افزودن یک ردیف رزومه جدید** را تکمیل کرده‌ایم، بنابراین از پنل خارج شده و آن را جمع می‌کنیم.

![خروج از پنل اقدام](../../../../../translated_images/3.1_27_CollapseAction.c033a86e4d8501b10fc454ba7f9c5e08d71d6d881fc72f58011152e1c5d7a7bb.fa.png)

1. یک اقدام جدید اضافه می‌کنیم با انتخاب **آیکون +** زیر اقدام **افزودن یک ردیف رزومه جدید** که پنل افزودن اقدامات را بارگذاری می‌کند. دوباره اتصال‌دهنده **Microsoft Dataverse** را انتخاب کنید.

![افزودن اقدام Dataverse](../../../../../translated_images/3.1_28_AddDataverseAction.1af4dedc95001bfb56b0a642231e9c82b57459b10c68bf6fc177382339a0a221.fa.png)

1. اقدام **بارگذاری یک فایل یا تصویر** را انتخاب کنید.

![افزودن اقدام بارگذاری فایل یا تصویر](../../../../../translated_images/3.1_29_AddUploadAFileOrAnImage.e40ab21b735e37bd1fdb5020b7433d1a2f01d6e387bc43a437e970c6e20ee779.fa.png)

1. اقدام را با انتخاب **سه نقطه (...)** تغییر نام دهید، متن زیر را کپی کرده و به عنوان نام جای‌گذاری کنید:

```text
بارگذاری فایل رزومه
```

![تغییر نام اقدام](../../../../../translated_images/3.1_30_RenameAction.c316fdf225f88e5c3ee26649e672472829c3372c804b544a1372b0455937c204.fa.png)

1. سپس فیلد **نام محتوا** را انتخاب کنید و آیکون **صاعقه** یا **fx** را در سمت راست انتخاب کنید.

در تب **تابع**، عبارت زیر را وارد کنید که از تابع `item ()` استفاده می‌کند. این ویژگی `name` آیتم فعلی (فایل پیوست) را دریافت می‌کند.

```text
item()?['name']
```

![پیکربندی پارامتر نام محتوا](../../../../../translated_images/3.1_31_ContentNameParameter.c6606773f1e82dbcea93d7c2f52dff7a2168f9f04d6b865f699f56d62a41d4ec.fa.png)

1. برای پارامتر **نام جدول**، `res` را جستجو کنید و جدول **رزومه‌ها** را انتخاب کنید.

![پیکربندی پارامتر نام جدول](../../../../../translated_images/3.1_32_SelectResumesTable.6a00bf6d585002219003da47f6e1042dc67cbdb3fbaf7d959253550035e27520.fa.png)

1. سپس فیلد **شناسه ردیف** را انتخاب کنید و آیکون **صاعقه** یا **fx** را در سمت راست انتخاب کنید.

`ID` را جستجو کنید و پارامتر **رزومه** را از اقدام Dataverse _افزودن یک ردیف جدید_ انتخاب کنید زیرا این شامل مقدار شناسه ردیف برای بارگذاری فایل PDF است.

**افزودن** را انتخاب کنید.

![انتخاب پارامتر شناسه ردیف](../../../../../translated_images/3.1_33_RowIDParameter.9824c6b5ea5edf0ce018140c20431a97c2e750d61bcb787f67da260acb6a3838.fa.png)

1. فیلد **نام ستون** را انتخاب کنید و گزینه **رزومه PDF** را انتخاب کنید.

![پیکربندی پارامتر نام ستون](../../../../../translated_images/3.1_34_ColumnNameParameter.ef4f770cbd84cae5c15cfe06d1bdbe028d0c6d54a2286dab30769fa01c948b71.fa.png)

1. فیلد **محتوا** را انتخاب کنید و آیکون **صاعقه** یا **fx** را در سمت راست انتخاب کنید.

در تب **تابع**، عبارت زیر را وارد کنید که از تابع `item ()` استفاده می‌کند. این ویژگی `contentBytes` آیتم فعلی (فایل پیوست) را دریافت می‌کند. `contentBytes` به داده‌های خام باینری یک فایل یا پیوست اشاره دارد که به صورت رشته Base64 کدگذاری شده است.

```text
item()?['contentBytes']
```

1. پیکربندی این اقدام را تکمیل کرده‌ایم، بنابراین با انتخاب دو علامت زاویه‌ای («) که به سمت چپ اشاره می‌کنند، پنل را جمع می‌کنیم.

![جمع کردن پنل اقدام](../../../../../translated_images/3.1_36_CollapseAction.1813a7219f0f37b87f80c2cd9f5a9626c3a320858d08a0e62cf14736f97db4c6.fa.png)

1. سپس اقدام **ارسال یک درخواست به کوپایلوت مشخص برای پردازش** را انتخاب کنید، سپس این اقدام را به زیر اقدام **بارگذاری فایل رزومه** در مسیر _True_ شرط بکشید و رها کنید.

![کشیدن و رها کردن اقدام در مسیر True](../../../../../translated_images/3.1_37_DragAndDropAction.57dc2e9f9d25ed892a4fc072a72c55eca6c38e313ab48fb9db37e9371995440f.fa.png)

1. اقدام **ارسال یک درخواست به کوپایلوت مشخص برای پردازش** را انتخاب کنید تا آن را پیکربندی کنید.

![انتخاب اقدام](../../../../../translated_images/3.1_38_SelectAction.d125bdf661f66b6397542c75efbc6a78b8c4862e03dce4002776c251f1c48382.fa.png)

1. در فیلد **بدنه/پیام**، تمام محتوای فیلد را انتخاب کرده و پاک کنید.

![پاک کردن پارامتر بدنه](../../../../../translated_images/3.1_39_ClearBodyParameter.6a345b2e5dbe5510184d7bae7cd406b8cec72c714f34bb40e30741e445a491c0.fa.png)

1. متن زیر را در فیلد **بدنه/پیام** کپی و جای‌گذاری کنید و `RESUME ID PLACEHOLDER` را برجسته کنید.

```text
ارسال [ResumeId (text)] = "RESUME ID PLACEHOLDER" و [ResumeTitle (text_1)] = "RESUME TITLE PLACEHOLDER" و [ResumeNumber (text_2)]= "RESUME NUMBER PLACEHOLDER" به ابزار "Notify Teams Applicant channel" در عامل فرعی "Application Intake Agent"
```

![جایگزینی متن جای‌گذاری شناسه رزومه](../../../../../translated_images/3.1_40_ReplaceResumeIDPlaceholder.eb61590503cb37d89121aaed6d979a4272aa30c87700206e04db8005e60b294f.fa.png)

1. آیکون **صاعقه** یا **fx** را در سمت راست انتخاب کنید.

`resume` را جستجو کنید و پارامتر **رزومه** را از اقدام Dataverse _افزودن یک ردیف جدید_ انتخاب کنید زیرا این شامل مقدار `ID` ردیف رزومه ایجاد شده است.

**افزودن** را انتخاب کنید.

![انتخاب پارامتر رزومه](../../../../../translated_images/3.1_41_SelectResumeParameter.61c4457c33e5d1b596169857535bfc560ef677264f8798e9148ceac999eeaeb9.fa.png)

1. `RESUME TITLE PLACEHOLDER` را برجسته کنید. آیکون **صاعقه** یا **fx** را در سمت راست انتخاب کنید.

`title` را جستجو کنید و پارامتر **عنوان رزومه** را از اقدام Dataverse _افزودن یک ردیف جدید_ انتخاب کنید زیرا این شامل مقدار `عنوان رزومه` ردیف رزومه ایجاد شده است.

**افزودن** را انتخاب کنید.

![انتخاب پارامتر عنوان رزومه](../../../../../translated_images/3.1_42_SelectResumeTitleParameter.6c887607128f928da15c4cf6c22254d0473bc22514aa883462fd812bf14245e0.fa.png)

1. `RESUME NUMBER PLACEHOLDER` را برجسته کنید. آیکون **صاعقه** یا **fx** را در سمت راست انتخاب کنید.

`resume number` را جستجو کنید و پارامتر **شماره رزومه** را از اقدام Dataverse _افزودن یک ردیف جدید_ انتخاب کنید زیرا این شامل مقدار `شماره رزومه` ردیف رزومه ایجاد شده است.

**افزودن** را انتخاب کنید.

![انتخاب پارامتر شماره رزومه](../../../../../translated_images/3.1_43_SelectResumeNumberParameter.ca19197525250483a7e94598b621072b47ebdf5deb939e1387c979e807ddc554.fa.png)

1. پیکربندی این اقدام و جریان عامل ما را تکمیل کرده‌ایم 🙌🏻 شما عالی کار می‌کنید! اکنون جریان رویداد خود را با انتخاب **ذخیره پیش‌نویس** ذخیره کنید.

![ذخیره پیش‌نویس](../../../../../translated_images/3.1_44_SaveDraft.0c9eee19f0c7cb8483b8d31bc17e1dd54075352d22f0f44603a9d52b52429188.fa.png)

1. اکنون باید جزئیات جریان عامل را ویرایش کنیم، **بازگشت** را انتخاب کنید.

![انتخاب بازگشت](../../../../../translated_images/3.1_45_Back.3f85535977bdb02231a0fdb8465e0e8b7d86fd5342ff933e4ae8bf9610279989.fa.png)

1. در بخش **جزئیات** گزینه **ویرایش** را انتخاب کنید و **طرح** را به گزینه **Copilot Studio** به‌روزرسانی کنید.

**ذخیره** را انتخاب کنید.

![تغییر طرح Copilot Studio](../../../../../translated_images/3.1_46_ChangePlanDetails.6ab15f1f8bd9ebe55b2c1576c3495f47d1a29d7435e343d4c590e46647601269.fa.png)

1. یک پنجره ظاهر می‌شود که از شما می‌خواهد تغییر به طرح Copilot Studio را تأیید کنید. **تأیید** را انتخاب کنید.

![تأیید تغییر طرح Copilot Studio](../../../../../translated_images/3.1_47_ConfirmCopilotStudioPlan.bc6ab52e7c982127154b0fb743f85ff9cc05dcab944dffc9485bdbcbe0811397.fa.png)

1. طرح اکنون به **Copilot Studio** به‌روزرسانی شده است. **ویرایش** را انتخاب کنید زیرا باید جریان رویداد را برای عامل خود منتشر کنیم.

![ویرایش جریان](../../../../../translated_images/3.1_48_PlanChangedAndEdit.3c3207766a648817f7a7878c3a6f684cf41cdceea4dca8f6fc43b7315c8dd648.fa.png)

1. **انتشار** را انتخاب کنید.

![انتشار](../../../../../translated_images/3.1_49_Publish.38ff814cfce6b3be1076cafb0c28e4e344f75d8cd4117fabed13ad361d4fde3f.fa.png)

هورا! جریان رویداد اکنون منتشر شده است 😃

![منتشر شده](../../../../../translated_images/3.1_50_Published.449e7867f7b027ae8a524c749357a1b931955062828bacc3b5a51e979755ef4a.fa.png)

بیایید ادامه دهیم و یک جریان عامل جدید ایجاد کنیم که توسط عامل فرعی **Intake Application Agent** فراخوانی شود.

### آزمایشگاه 3.2 - اطلاع‌رسانی به کانال Teams با استفاده از کارت تطبیقی

اکنون قصد داریم یک جریان عامل جدید برای عامل فرعی **Intake Application Agent** ایجاد کنیم که از مقادیر ارسال شده توسط رویداد استفاده کند تا یک کارت تطبیقی را به کانال Teams ارسال کند. این کارت تطبیقی تیم استخدام منابع انسانی را در مورد فایل PDF که به صورت خودکار بارگذاری شده است مطلع می‌کند تا بتوانند آن را بررسی کنند.

بیایید شروع کنیم!

1. در **عامل استخدام** تب **عوامل** را انتخاب کنید و عامل **Application Intake Agent** را انتخاب کنید.

![انتخاب عامل Application Intake Agent](../../../../../translated_images/3.2_01_SelectApplicationIntakeAgent.0e9dd3da5c52e9f59ab3a4545c01897ad830853b650ec42f7f8424aa530e0409.fa.png)

1. به پایین به **ابزارها** بروید و **+ افزودن** را انتخاب کنید.

![افزودن ابزار](../../../../../translated_images/3.2_02_AddNewTool.7c62275fd9f28cdc1923ea056a148171048dc568ff78056958fd54862133f90e.fa.png)

1. پنجره **افزودن ابزار** ظاهر می‌شود. **+ ابزار جدید** را انتخاب کنید.

![انتخاب ابزار جدید](../../../../../translated_images/3.2_03_SelectNewTool.215e7637a9f065a3799a1ecf248eed1e859f201d2dfdfab71a7c1dc18e454e2d.fa.png)

1. **جریان عامل** را انتخاب کنید.

![انتخاب جریان عامل](../../../../../translated_images/3.2_04_SelectAgentFlow.7bc12b3435efccc0cfee8f563640562f87d173b436b3313a3d1256fe35024907.fa.png)

1. سپس **طراح جریان عامل** بارگذاری می‌شود. در محرک **وقتی یک عامل جریان را فراخوانی می‌کند**، **+ افزودن ورودی** را انتخاب کنید.

![انتخاب افزودن ورودی](../../../../../translated_images/3.2_05_SelectAddAnInput.f3dc8465f490929baccb0f2dc72b50629b1435ff8a3861f7974885d1d36cdeb1.fa.png)

1. **متن** را به عنوان نوع ورودی کاربر انتخاب کنید.

![انتخاب متن](../../../../../translated_images/3.2_06_SelectText.93585b4af8c4e277c11c2052b638e249508a24a075987026a6ec346e75184217.fa.png)

1. در فیلد متن ورودی، متن زیر را برای نام پارامتر ورودی کپی و جای‌گذاری کنید.

```text
ResumeId
```

![ورودی ResumeId](../../../../../translated_images/3.2_07_ResumeIdInput.a9e127e343856d6c6d45dd1251cade0503bad9484bc563c02155390951b1faa5.fa.png)

1. همان مراحل را برای افزودن ورودی متن دوم تکرار کنید. متن زیر را برای نام پارامتر ورودی کپی و جای‌گذاری کنید.

```text
ResumeTitle
```

![ورودی ResumeTitle](../../../../../translated_images/3.2_08_ResumeTitleInput.c71ecd364a974a93abb0de876807c2e9bde59fcea6df317babeb20764b636f26.fa.png)

1. همان مراحل را برای افزودن ورودی متن سوم تکرار کنید. متن زیر را برای نام پارامتر ورودی کپی و جای‌گذاری کنید.

```text
ResumeNumber
```

![ورودی ResumeNumber](../../../../../translated_images/3.2_09_ResumeNumberInput.a6c060000354deab51dffef3c1ad9f13378cfeabdafdb7a33c2a591bfd044709.fa.png)

1. به یاد دارید که در [استخدام](../../recruit/08-add-adaptive-card/README.md#81-create-a-new-topic-with-an-adaptive-card-for-user-to-submit-their-request) یک کارت تطبیقی را در یک موضوع برای عامل خود اضافه کردیم؟ این بار، قصد داریم یک کارت تطبیقی را در یک جریان عامل اضافه کنیم. اکنون قصد داریم یک اقدام دیگر به جریان عامل خود اضافه کنیم که یک کارت تطبیقی را به کانال Teams ارسال کند.

آیکون **+** زیر محرک را انتخاب کنید.

![افزودن اقدام جدید](../../../../../translated_images/3.2_10_AddNewAction.4474a2150991cac246d5e4091a74ba91e76e1c5bafa34ad985a8567c09dcdd35.fa.png)

1. اقدام **ارسال کارت در چت یا کانال** را انتخاب کنید.

![انتخاب اقدام ارسال کارت در چت یا کانال](../../../../../translated_images/3.2_11_SelectPostCardInAChatOrChannel.97de43ed1c883b14d0150ae65efaa90f53f0815bdf57ec10e0e22cbd3e22ce06.fa.png)

1. یک مرجع اتصال به Microsoft Teams باید با حساب کاربری وارد شده شما ایجاد شود. **ورود به سیستم** را انتخاب کنید.

![انتخاب ورود به سیستم](../../../../../translated_images/3.2_12_SignInToCreateConnectionReference.2297f8b702d71508f1b21a3ed4046df4846dc03b13932a20e5c445403559ac1f.fa.png)

1. حساب کاربری خود را انتخاب کنید و سپس **اجازه دسترسی** را انتخاب کنید.

![انتخاب اجازه دسترسی](../../../../../translated_images/3.2_13_AllowAccess.31cbf82606d75231108bd4f2bfeafffda3cd7e7e760cd46004c2705afe050aaf.fa.png)

1. برای پارامترهای ورودی زیر،

| پارامتر | نحوه تنظیم | جزئیات |
|----------|------------|---------|
| **ارسال به عنوان** | کشویی | گزینه `Flow bot` را انتخاب کنید |
| **ارسال در** | کشویی | گزینه `کانال` را انتخاب کنید |
| **تیم** | کشویی | یک تیم را که در محیط شما موجود است و به آن دسترسی دارید برای انجام این تمرین آزمایشگاهی انتخاب کنید |
| **تیم** | کشویی | یک کانال را که در محیط شما موجود است و به آن دسترسی دارید برای انجام این تمرین آزمایشگاهی انتخاب کنید |

![پیکربندی پارامترهای ورودی](../../../../../translated_images/3.2_14_ConfigureParameters.8c21924f90db3acaa33d4e35ef43c70556ba4cc37207a195ac654e55a43400a6.fa.png)

1. سپس فیلد **کارت تطبیقی** را پیکربندی می‌کنیم. فیلد **کارت تطبیقی** را انتخاب کنید.

![انتخاب فیلد کارت تطبیقی](../../../../../translated_images/3.2_15_SelectAdaptiveCardParameter.65323056be6174d2eed7422650aaa70fc16396148f90b8af1801110d7a30d66f.fa.png)

1. فایل JSON به‌روزرسانی شده جدول رزومه [Resume Table Updated JSON file](../../../../../docs/operative-preview/03-automate-triggers/assets/3.2_ResumeTableUpdated.json) را باز کنید، تمام محتوای آن را کپی کرده و در فیلد کارت تطبیقی جای‌گذاری کنید.

![کپی و جای‌گذاری JSON](../../../../../translated_images/3.2_16_JSON.f022097fb7139bd12514abb8fdc518309ea940f005cc94a11ba159359cde784b.fa.png)

1. مشابه کاری که در [استخدام](../../recruit/08-add-adaptive-card/README.md#81-create-a-new-topic-with-an-adaptive-card-for-user-to-submit-their-request) انجام دادیم، قصد داریم مقادیر موجود در payload JSON را با مقادیر واقعی یا محتوای پویا جایگزین کنیم.

ابتدا، بیایید URL مربوط به ویژگی `url` درون ویژگی `selectAction` را به‌روزرسانی کنیم. این URL با URL نمای سیستم رزومه‌ها در اپلیکیشن مدل‌محور **Hiring Hub** جایگزین خواهد شد. این به استخدام‌کننده اجازه می‌دهد تا اقدام را انتخاب کرده و به نمای سیستم رزومه‌ها در اپلیکیشن مدل‌محور هدایت شود.

مقدار فعلی URL را برجسته کرده و حذف کنید.

![انتخاب مقدار URL](../../../../../translated_images/3.2_17_SystemViewURL.5e51fd894ac916f436107c7b668d66ca87ca8bdfd7affeb7dae1b10fa8ff5afb.fa.png)

1. در اپلیکیشن مدل‌محور **Hiring Hub**، به نمای سیستم **رزومه‌ها** با استفاده از منوی سمت چپ بروید و URL را کپی کنید. سپس به جریان عامل بازگردید و URL کپی شده را در ویژگی **url** درون ویژگی `selectAction` جای‌گذاری کنید.

![کپی URL نمای سیستم رزومه‌ها](../../../../../translated_images/3.2_18_CopyResumesSystemViewURL.14d9f55c7db15977a12dfe2a5df95aab5cf241e646b08f9838cff31aaa27a381.fa.png)
1. شما باید موارد زیر را مشاهده کنید که جزئیات محیط شما در برنامه مدل‌محور **Hiring Hub** با رنگ زرد برجسته شده است.

     | پارامتر | مقدار | توضیحات |
     |----------|------------|---------|
     | **Organization URI** | GUID | آدرس URL سازمان محیط Dataverse/Dynamics 365 |
     | **appid** | GUID | برای باز کردن یک برنامه مدل‌محور خاص، از پارامترهای پرس‌وجو appid یا appname استفاده می‌شود. در این مورد، از appid استفاده شده است |
     | **viewid** | GUID | پارامتر پرس‌وجو که شناسه نمای مورد نظر است |

       ![Paste URL](../../../../../translated_images/3.2_19_PasteURL.41f3fdd66190c8ba478857f91c90eb05ee9621243bda7b7ad26eb5802b8e970d.fa.png)

1. حالا مقادیر محتوای پویا را برای چندین ویژگی اضافه می‌کنیم. ابتدا با متنی شروع می‌کنیم که شماره رزومه ردیف ایجاد شده توسط محرک رویداد را به صورت خودکار نمایش می‌دهد.

      آیکون **پنل** را انتخاب کنید تا پنل اقدامات بارگذاری شود.

       ![Select panel icon](../../../../../translated_images/3.2_20_SelectPannelIcon.786a4147ba12e0e62648c66f14fb2b9a7f89b27c3a610f43420e31cb0c9fb5da.fa.png)

1. به خطی که ویژگی `text` برای `RESUME NUMBER PLACEHOLDER` را مشاهده می‌کنید، پایین بروید. مقدار جایگزین را برجسته کرده و حذف کنید.

       ![Delete placeholder](../../../../../translated_images/3.2_21_DeleteResumeNumberPlaceholder.6ffd7a5a073f9d9a11e0e119c87e827243de237f70ebc3ab37dfdd36de615130.fa.png)

1. بین علامت‌های نقل قول دوبل کلیک کنید و آیکون **صاعقه** یا **fx icon** را در سمت راست انتخاب کنید.

      در تب **Dynamic Content**، پارامتر **ResumeNumber** را انتخاب کرده و گزینه **Add** را انتخاب کنید.

       ![SAdd ResumeNumber parameter](../../../../../translated_images/3.2_22_SelectResumeNumberParameter.de5a6eecb3ee092441d841ad137dfecd9f8d503a370ff60eb5ccdc0267e37df0.fa.png)

1. پارامتر **ResumeNumber** اکنون به عنوان محتوای پویا به ویژگی `text` اضافه خواهد شد.

       ![ResumeNumber dynamic content](../../../../../translated_images/3.2_23_ResumeNumberDynamicContent.129a566ac6e9d448b268b828da5766a7056779ac167f65b498e2ca21d703b7f0.fa.png)

1. همین مراحل را برای `RESUME NAME PLACEHOLDER` تکرار می‌کنیم. به خطی که ویژگی `text` برای `RESUME NAME PLACEHOLDER` را مشاهده می‌کنید، پایین بروید. مقدار جایگزین را برجسته کرده و حذف کنید.

       ![Resume Name Placeholder](../../../../../translated_images/3.2_24_ResumeNamePlaceholder.6c879b99ae375892f7e0a511bfedd5fa9e60a8dea71ea2a44c2a7a04c8389f43.fa.png)

1. بین علامت‌های نقل قول دوبل کلیک کنید و آیکون **صاعقه** یا **fx icon** را در سمت راست انتخاب کنید.

      در تب **Dynamic Content**، پارامتر **ResumeTitle** را انتخاب کرده و گزینه **Add** را انتخاب کنید.

       ![SAdd ResumeNumber parameter](../../../../../translated_images/3.2_25_SelectResumeTitleParameter.18c769bbd2c60e362a56f6055e151ed6287903cb625addcdfbb43044828d7378.fa.png)

1. پارامتر **ResumeTitle** اکنون به عنوان محتوای پویا به ویژگی `text` اضافه خواهد شد.

       ![ResumeNumber dynamic content](../../../../../translated_images/3.2_26_ResumeTitleDynamicContent.7219e078f71fc0d5d4a6bb228ba2d53f0898ba26a27c5eb859df90d12dd52c70.fa.png)

1. همین مراحل را برای مقدار **Due Date** که نشان‌دهنده زمانی است که یک استخدام‌کننده باید رزومه را بررسی کند، تکرار می‌کنیم. به خطی که ویژگی `text` برای `May 21, 2023` را مشاهده می‌کنید، پایین بروید.

       ![Select Allow access](../../../../../translated_images/3.2_27_DueDatePlaceholder.17c6003cc9ec1141b0aeb5cde203098a7f5534fa11f01a3cbffb66206ed1633a.fa.png)

1. مقدار جایگزین تاریخ را حذف کنید و بین علامت‌های نقل قول دوبل کلیک کنید.

       ![Delete](../../../../../translated_images/3.2_28_DeleteDueDatePlaceholder.9a3df55fb3c9ed72e61e0a60dc3344335b0444ff537c9fb51036b0442a85d268.fa.png)

1. آیکون **صاعقه** یا **fx icon** را در سمت راست انتخاب کنید و در تب **Function**، عبارت زیر را وارد کرده و گزینه **Add** را انتخاب کنید.

       ```text
       addDays(utcNow(), 3, 'MMM dd, yyyy')
       ```

      این عبارت از دو تابع استفاده می‌کند.

     | تابع | توضیحات |
     |----------|------------|
     | **addDays** | تعداد مشخصی روز به یک تاریخ داده شده اضافه می‌کند و تاریخ حاصل را به صورت رشته بازمی‌گرداند |
     | **utcNow** | تاریخ و زمان فعلی را در قالب زمان جهانی هماهنگ (UTC) به صورت رشته بازمی‌گرداند. |

      برای مقدار utcNow، ما تاریخ را به صورت ماه و روز، به همراه سال قالب‌بندی می‌کنیم.

       ![Expression Due Date](../../../../../translated_images/3.2_29_01_ExpressionDueDate.a4fa31985f5500971f2fc6da0e81e008af12be19d54a30a240764b74a4b2dbcb.fa.png)

      عبارت اکنون به ویژگی `text` اضافه خواهد شد.

       ![Expression Due Date](../../../../../translated_images/3.2_29_02_ExpressionDueDate.6159288450731c7b09628af70f0c9a6d92590ca7c7e39e8a524ae8af7c511f2c.fa.png)

1. در نهایت، URL برای ویژگی `url` درون ویژگی `actions` در انتهای JSON payload به‌روزرسانی خواهد شد. این URL جایگزین URL جایگزین فعلی خواهد شد و به رزومه در برنامه مدل‌محور **Hiring Hub** اشاره خواهد کرد. این امکان را به استخدام‌کننده می‌دهد که اقدام `Action.OpenURL` کارت تطبیقی را انتخاب کرده و به رزومه در برنامه مدل‌محور هدایت شود.

       ![Delete View Resume URL placeholder](../../../../../translated_images/3.2_30_ViewResumeURLPlaceholder.f27af6cadfb54fb977f0b46ea3ec42ee0638d38ebc5d294eff5da52abf9d4a1b.fa.png)

1. در برنامه مدل‌محور **Hiring Hub**، یک ردیف را در نمای سیستم **Resumes** با استفاده از منوی سمت چپ باز کنید. ردیف رزومه به صورت یک فرم در برنامه مدل‌محور بارگذاری خواهد شد.

      URL ردیف رزومه را کپی کنید.

    ??? info "چگونه به برنامه مدل‌محور **Hiring Hub** بازگردید اگر از آن خارج شده‌اید/بسته‌اید"

        1. به [https://make.powerapps.com](https://make.powerapps.com) بروید و مطمئن شوید که در محیط توسعه‌دهنده‌ای که برای این تمرینات آزمایشگاهی استفاده می‌کنید، هستید، در غیر این صورت به آن تغییر دهید.
        
        ![Browse to make.powerapps.com](../../../../../translated_images/3.2_31_Note_01_BrowseToURL.a13dfc8b05a0b34f3a4c853f3d3e418864176b52b1b40c069da7712af5562aa5.fa.png)

        1. در پنل منوی سمت چپ، **Apps** را انتخاب کنید و برای برنامه مدل‌محور **Hiring Hub**، آیکون **Play** را انتخاب کنید تا در مرورگر شما بارگذاری شود.
        
        ![Select Hiring Hub model-driven app](../../../../../translated_images/3.2_31_Note_02_HiringHubApp.a09b6ea28b4fea8932809cb847cb0ea3d8faeb7b7b5604852de1f46ab1e9741b.fa.png)

       ![Copy Resume row URL](../../../../../translated_images/3.2_31_CopyResumeURL.f6156f8792526129c2613922f0137221b2944fa8ffe7c04766d710521ad8765b.fa.png)

1. سپس به جریان عامل بازگردید، مقدار URL جایگزین فعلی را برجسته کرده و حذف کنید.

       ![Delete Resume row URL placeholder](../../../../../translated_images/3.2_32_SelectResumeURLPlaceHolder.8db783de292428eaa8937242eba4a54ebb1df7bf4c1bc9391b016ee545fb2b9f.fa.png)

1. سپس URL کپی شده را در ویژگی **url** درون ویژگی `url property` جای‌گذاری کنید.

       ![Paste the copied Resume row URL](../../../../../translated_images/3.2_33_PasteResumeRowURL.d7ba92493d7597b89f75e2f17f76846ac17a9ba89c2e36729dc6b5dc1599b047.fa.png)

1. شما باید موارد زیر را مشاهده کنید. مقدار شناسه `GUID` در انتها را حذف کنید. ما این محتوا پویا - پارامتر **ResumeId** را جایگزین خواهیم کرد.

       ![Delete View Resume URL placeholder](../../../../../translated_images/3.2_34_DeleteViewResumePlaceholderURL.7b26209eaeef6dc0a21b16140d05fe2f0e38de5f714575edd24d21dded58102a.fa.png)

1. آیکون **صاعقه** یا **fx icon** را در سمت راست انتخاب کنید.

      در تب **Dynamic Content**، پارامتر **ResumeId** را انتخاب کرده و گزینه **Add** را انتخاب کنید.

       ![ResumeId parameter](../../../../../translated_images/3.2_35_ResumeIdParameter.3dc710a7f5216944387f4d5f82c0a372eee23ee5259dec04147ad00e9c454d7d.fa.png)

1. پارامتر **ResumeId** به عنوان محتوای پویا اضافه خواهد شد. موارد زیر که با رنگ زرد برجسته شده‌اند جزئیات محیط شما در برنامه مدل‌محور **Hiring Hub** هستند.

     | پارامتر | مقدار | توضیحات |
     |----------|------------|---------|
     | **Organization URI** | GUID | آدرس URL سازمان محیط Dataverse/Dynamics 365 |
     | **appid** | GUID | برای باز کردن یک برنامه مدل‌محور خاص، از پارامترهای پرس‌وجو appid یا appname استفاده می‌شود. در این مورد، از appid استفاده شده است |
     | **id** | GUID | پارامتر پرس‌وجو که شناسه ردیف رزومه است |

       ![ResumeId dynamic content](../../../../../translated_images/3.2_36_ResumeIdDynamicContent.a1a40dfb4a83b60f1b75b02160890e3fec41c2c7df8adf32e02d652a57c1ee87.fa.png)

1. پیکربندی اقدام **Post card in a chat or channel** را به پایان رسانده‌ایم 👏🏻 از پنل پیکربندی اقدام با انتخاب آیکون **x** خارج شوید.

       ![Close panel](../../../../../translated_images/3.2_37_CloseActionPanel.23d07107381411aa9494ef36fb240682a0727a63e6f15082074b34a1defd517b.fa.png)

1. در نهایت، آخرین اقدام، **Respond to the agent** را با ارسال یک متن به عامل برای پایان پردازش پیکربندی خواهیم کرد.

      در اقدام **Respond to the agent**، گزینه **+Add an output** را انتخاب کنید.

       ![Select Add an output](../../../../../translated_images/3.2_38_AddAnOutput.de1a0e49033cb077eb5d2c226152bbb06dc12fb95d0496c69d469eecdb46c0ae.fa.png)

1. نوع خروجی را به **Text** انتخاب کنید.

       ![Select test as the type output](../../../../../translated_images/3.2_39_SelectText.4e1e82c35fe9d1b569b668092d405aa9b0c81fbe67e7de68a660f2083ed3afdd.fa.png)

1. نام خروجی را به صورت زیر وارد کنید.

       ![End Conversation Output](../../../../../translated_images/3.2_40_EndConversationOutput.e392b58847d8439443c89459fccbbd88d4ea5e5fa562749b77407c46b9ff4ca4.fa.png)

1. مقدار خروجی را به صورت زیر وارد کنید.

       ```text
       Finished
       ```

       ![End Conversation Output value](../../../../../translated_images/3.2_41_EndConversationOutputValue.2cb836900ee9fca802926676e613b077938f1106cc16e77ddd77af64ce92dcc8.fa.png)

1. پیکربندی جریان عامل را به پایان رسانده‌ایم. گزینه **Save draft** را انتخاب کنید تا جریان عامل ذخیره شود. یک پیام تأیید پس از ذخیره ظاهر خواهد شد.

       ![Save draft](../../../../../translated_images/3.2_42_SaveDraft.1bb26eec40faf5d2c244d93f869344915e90423623e07e02cac2c1f8c73d1a4a.fa.png)

1. قبل از انتشار جریان عامل، باید جزئیات جریان عامل را به‌روزرسانی کنیم. تب **Overview** را انتخاب کرده و گزینه **Edit** را انتخاب کنید.

      در فیلد نام جریان، متن زیر را وارد کنید.

       ```text
       Notify Teams Applicant channel
       ```      

      سپس آیکون **Refresh** را انتخاب کنید تا توضیحات جریان عامل با استفاده از AI به‌روزرسانی شود.

      سپس گزینه **Save** را انتخاب کنید تا جزئیات به‌روزرسانی شده برای جریان عامل ذخیره شود.

       ![Edit and save details](../../../../../translated_images/3.2_43_EditDetails.f0c9b53a9c1b29e4aa3c34774680559ae9173f77b3a37817bab2296b77ffcca7.fa.png)

1. به تب **Designer** بازگردید و گزینه **Publish** را انتخاب کنید تا جریان عامل منتشر شود. یک پیام تأیید پس از ذخیره ظاهر خواهد شد.

       ![Publish agent flow](../../../../../translated_images/3.2_44_PublishAgentFlow.3014e6de5e53aa5fc2021bf6e11b901c4990b4fbb4d4cee33cc6d5b6cc641ed8.fa.png)

1. جریان عامل اکنون باید به عنوان یک ابزار در **Application Intake Agent** اضافه شود. به **Hiring Agent** بازگردید و تب **Agents** را انتخاب کنید، سپس **Application Intake Agent** را انتخاب کنید.

       ![Select Application Intake Agent](../../../../../translated_images/3.2_45_ApplicationIntakeAgent.0446b1762d0f499e880e7984f59669639193566f72539cd4fba5c62cd1fe8726.fa.png)

1. در بخش **Details** عامل، فیلد **Description** را به‌روزرسانی خواهیم کرد. متن زیر را کپی کرده و در انتهای متن توضیحات جای‌گذاری کنید.

       ```text
       and also notify the Teams Applicant channel
       ```

       ![Update Agent Description](../../../../../translated_images/3.2_46_UpdateAgentDescription.56344699cd3cc5e417e8f95362ed2288d0c0391f33bd98872e7e008a545175f0.fa.png)

1. سپس جریان عامل را به عنوان یک ابزار اضافه خواهیم کرد. پایین بروید و گزینه **+ Add** را انتخاب کنید.

       ![Select Add](../../../../../translated_images/3.2_47_AddTools.c7557e272bd731129dffe9edebba3b04170d27806aaa14fffbe3d66b7b61808b.fa.png)

1. جریان عامل ایجاد شده قبلی، **Notify Teams Applicant Channel** را انتخاب کنید.

       ![Select agent flow](../../../../../translated_images/3.2_48_NotifyTeamsApplicantChannelAgentFlow.5985f570786edef4eac93455f7a07978c0daf54e1371660bfd56a4c16b6aaf79.fa.png)

1. سپس گزینه **Add and configure** را انتخاب کنید.

       ![Select Add and configure](../../../../../translated_images/3.2_49_AddAndConfigure.c2d6cccfa9e4bb23ff58b615ad16d0b3ade4ef867b73b9196a45df6990d8072f.fa.png)

1. در بخش **Inputs** جریان عامل، سه ورودی که قبلاً در جریان عامل پیکربندی کرده‌ایم قابل مشاهده هستند. به طور پیش‌فرض، تنظیم **Fill using** به **Dynamically fill with AI** تنظیم شده است. این تنظیم را به همین صورت نگه می‌داریم زیرا درخواست از محرک رویداد (در آخرین اقدام، **Sends a prompt to the specified copilot for processing** - این مراحل 38-44 از **Lab 3.1 - Automate uploading resumes to Dataverse received by email**) شامل مقادیر پارامترهایی است که AI استخراج خواهد کرد.

       ![Tool agent flow inputs](../../../../../translated_images/3.2_50_Inputs.9fbb57b83b533d5a60f957505bb1e5430886ec9e6c70c10ed1c641d6b33fcc21.fa.png)

1. حالا که ابزار به **Application Intake Agent** اضافه شده است، دستورالعمل‌های عامل باید به‌روزرسانی شوند. آیکون **پیکان بازگشت** را انتخاب کنید تا به لیست عوامل بازگردید.

       ![Select back arrow icon](../../../../../translated_images/3.2_51_SelectBack.6a9a55176d931895777822d3f9276d5d12ffe379a8860dd521e1c895e8188bba.fa.png)

1. در تب **Agents** از **Hiring Agent**، **Application Intake Agent** را انتخاب کنید.

       ![Select Application Intake Agent](../../../../../translated_images/3.2_52_SelectApplicationIntakeAgent.039140313422e833389fd134b3a70a0eed11ba175ede5dbdc4abcce6004c7d2d.fa.png)

1. در فیلد **Instructions**، یک خط جدید بعد از دستورالعمل‌های `2.Post-Upload` وارد کنید. دستورالعمل‌های زیر را کپی کرده و جای‌گذاری کنید.

       ```text
       Process for Resume Upload via Email
       1. When you receive a message, **Send [ResumeId (text)] = "1680265f-5793-f011-b41b-7c1e525be9f7" and [ResumeTitle (text_1)] = "TAYLOR TESTPERSON (FICTITIOUS).pdf" and [ResumeNumber (text_2)]= "R01026" to the Tool "Notify Teams Applicant channel"** in the child agent "Application Intake Agent", call [AGENT FLOW PLACEHOLDER]
       ```

       ![Update instructions of Application Intake Agent](../../../../../translated_images/3.2_53_PasteCopiedInstructions.f24ed715e907cf023449a54b894354ca1252b198e9be694eec2875f7f647f9c2.fa.png)

1. متن `[AGENT FLOW PLACEHOLDER` را برجسته کنید.

       ![Highlight placeholder](../../../../../translated_images/3.2_54_HighlightPlaceholder.6c3fcac3c8f4fb6e5cce2dbd6b6548b84652d009e20fa4a01183a9a1b42b24fb.fa.png)

1. کاراکتر اسلش، `/` را وارد کنید و ابزار **Notify Teams Applicant Channel** را انتخاب کنید.

       ![Select Notify Teams Applicant Channel tool](../../../../../translated_images/3.2_55_NotifyTeamsApplicatnChannelTool.2e3dd1e9ee9b2dfe10e1f2feb7e3b74b08856ce3afb16dafae1f2c4b73da904f.fa.png)
1. جریان عامل اکنون طبق دستورالعمل‌ها توسط **Application Intake Agent** فراخوانی خواهد شد، پس از آخرین اقدام (**ارسال یک پیام به کوپایلوت مشخص شده برای پردازش**) در محرک رویداد، پیام حاوی مقادیر پارامترها را به عامل بازمی‌گرداند.

      گزینه **Save** را انتخاب کنید تا دستورالعمل‌های به‌روزرسانی شده برای **Application Intake Agent** ذخیره شود.

       ![Select Save](../../../../../translated_images/3.2_56_Save.6abb0131f96b20d3753b5990313eaea6a237bef2bf0e2103a2ee5ba570fd7c04.fa.png)

1. دستورالعمل‌ها اکنون پس از ذخیره شدن عامل به‌روزرسانی خواهند شد.

       ![Instructions updated](../../../../../translated_images/3.2_57_InstructionsUpdated.5bfbfe2ca1da16284358a9917246bd8676cd6c095839ed1c69361d992cacd2b3.fa.png)

1. اکنون باید **Hiring Agent** را منتشر کنیم. گزینه **Publish** را در بالا سمت راست انتخاب کنید و در پنجره _Publish this agent modal_ که ظاهر می‌شود، گزینه **Publish** را انتخاب کنید.

       ![Publish Hiring Agent](../../../../../translated_images/3.2_58_PublishAgent.e7ec81c81b735de0cd11516aa944c759ea510e2b0bc9acf9f00d42d788896991.fa.png)

1. پس از انتشار، یک پیام تأیید ظاهر خواهد شد که نشان می‌دهد عامل منتشر شده است.

       ![Confirmation message](../../../../../translated_images/3.2_59_AgentPublished.d15e01232544cf08943260dfbf61c92339dbd187620349e7c5a43add4796ed12.fa.png)

اکنون می‌توانیم عامل را آزمایش کنیم!

### آزمایش محرک رویداد - آزمایش 3.3

1. برای اجرای محرک رویداد، باید یک ایمیل با فایل رزومه به صورت PDF ارسال شود. در Outlook، یک پیام ایمیل جدید ایجاد کنید.

     | بخش ایمیل | جزئیات |
     |----------|------------|
     | **گیرنده** | از حساب کاربری وارد شده خود به عنوان مقدار استفاده کنید |
     | **فایل پیوست** | فایل [TAYLOR TESTPERSON (FICTITIOUS)](../../../../../docs/operative-preview/test-data/resumes/TAYLOR%20TESTPERSON%20(FICTITIOUS).pdf) را آپلود کنید |
     | **متن ایمیل** | متن زیر را به عنوان متن ایمیل کپی و جای‌گذاری کنید |

       ```text
       مدیر استخدام عزیز،

       من این نامه را برای ابراز علاقه خود به موقعیت مهندس ارشد پلتفرم پاور در سازمان شما می‌نویسم. با بیش از نه سال تجربه در ارائه راه‌حل‌های امن و مقیاس‌پذیر بر روی پلتفرم‌های ابری مایکروسافت، مطمئن هستم که می‌توانم به طور مؤثر به تیم شما کمک کنم.

       در آخرین نقش خود به عنوان مهندس ارشد پلتفرم پاور، یک خط لوله خودکار برای دریافت رزومه توسعه دادم که فرآیند دستی را کاهش داده و قابلیت جستجو را بهبود بخشید. من برنامه‌های مدیریت پرونده‌های منابع انسانی ارائه داده‌ام، جریان‌های آگاه به راه‌حل معرفی کرده‌ام و بررسی‌های PR را برای بهبود زمان‌های استقرار اجرا کرده‌ام. تخصص من شامل Power Apps، Power Automate، Power Pages، Dataverse و مجموعه‌ای از خدمات Microsoft 365، همچنین ادغام با Graph/REST APIs و Azure Functions است.

       پیش‌تر، من تأییدیه‌های Teams را با کارت‌های تطبیقی توسعه دادم که زمان تأیید را به همان روز کاهش داد و چارچوب‌های مدیریت خطا قوی ایجاد کردم. سابقه من همچنین شامل مهاجرت جریان‌های کاری قدیمی به Power Automate و ساخت پورتال‌های خودخدمتی است که توسط صدها کارمند پذیرفته شده است.

       من دارای مدرک کارشناسی علوم کامپیوتر هستم و به عنوان توسعه‌دهنده پلتفرم پاور (PL-400) و معمار راه‌حل (PL-600) گواهی شده‌ام. همچنین به آموزش علاقه‌مندم و با گروه‌های محلی سازنده داوطلبانه همکاری کرده‌ام.

       لطفاً رزومه من را برای بررسی در پیوست مشاهده کنید. خوشحال می‌شوم فرصت بحث درباره چگونگی تطابق مهارت‌ها و تجربیاتم با نیازهای شما را داشته باشم.

       از وقت و توجه شما سپاسگزارم.

       با احترام،
       تیلور تستپرسون
       ```

       **ارسال** ایمیل پس از ایجاد.

       ![Compose email with PDF file attachment](../../../../../translated_images/3.3_01_ComposeEmailWithAttachment.eccba1bbcc276b4373277b193a66d8818b712c6ab9468ee12902545522b670f7.fa.png)

1. در پورتال سازنده Power Automate برای جریان محرک رویداد، آیکون **Refresh** را انتخاب کنید تا اجرای جریان موفق برای ایمیل ارسال شده مشاهده شود.

       ![Select refresh icon to view flow run](../../../../../translated_images/3.3_02_FlowRun.0e99756ebc5fba371dc72719b0619736626934461e58db2dc153535cbabcc1e8.fa.png)

1. در Copilot Studio در **Hiring Agent**، تب **Activity** را انتخاب کنید.

       ![Select Activity tab](../../../../../translated_images/3.3_03_SelectActivity.11d78735a8a2a1f64443d285deb47f2bacc5bd53ded039791215f9465dbc3f76.fa.png)

1. تب **Activity** بارگذاری خواهد شد که تمام فعالیت‌های **Hiring Agent** را نمایش می‌دهد. فعالیتی با نام **Automated** و وضعیت **Complete** وجود خواهد داشت. این فعالیت نمایانگر محرک رویداد و جریان عامل فراخوانی شده است.

       ![Activity completed](../../../../../translated_images/3.3_04_StatusComplete.dbe14ffb9414b0f4d869841426c4ca595d7a664bf13f4b5e2e29a4e251b9064c.fa.png)

1. فعالیت را انتخاب کنید و محرک رویداد را در نقشه فعالیت انتخاب کنید. در پنل سمت راست، مشاهده کنید که چگونه پارامترهای ورودی در پیام شامل مقادیر پارامترهای `Resume Id`، `Resume Title` و `Resume Number` از ردیف **Dataverse** ایجاد شده است. این مقادیر از محتوای پویا تنظیم شده در مراحل 18 - 27 **آزمایش 3.1 - خودکارسازی آپلود رزومه‌ها به Dataverse دریافت شده از طریق ایمیل** گرفته شده‌اند.

       ![Event trigger](../../../../../translated_images/3.3_05_EventTrigger.cbd73cd43a79e88e782d1e47ac8ddacdbe30d582a4da61a31010f44a9dacdd12.fa.png)

1. به برنامه مدل‌محور **Hiring Hub** بازگردید و در نمای سیستم **Resumes**، گزینه **Refresh** را انتخاب کنید تا نمای به‌روزرسانی شود. ردیف جدید ایجاد شده برای رزومه ارسال شده از طریق ایمیل اکنون لیست شده است زیرا از طریق محرک رویداد ایجاد شده است.

       ![Resume row created](../../../../../translated_images/3.3_06_ResumeRowCreated.9ab850d8d7c066aad8531409b00a4de5f214b4d8d209d39fa0d493d5c55e041d.fa.png)

1. به Copilot Studio بازگردید و جریان عامل **Notify Teams Applicant Channel** را در **Application Intake Agent** در نقشه فعالیت انتخاب کنید. در پنل سمت راست، مشاهده کنید که چگونه ورودی‌ها دارای مقادیر از ردیف Dataverse هستند. این مقادیر از پیام ارسال شده توسط آخرین اقدام (**ارسال یک پیام به کوپایلوت مشخص شده برای پردازش**) در محرک رویداد که شامل مقادیر پارامترهای ردیف جدید ایجاد شده در Dataverse است، گرفته شده‌اند. این روش انتقال مقادیر پارامترها از محرک‌های رویداد به جریان‌های عامل است.

       ![Select agent flow](../../../../../translated_images/3.3_07_NotifyTeamsApplicantChannel.9b6c4654197efca9c88dde72cfb38812038ef5f6bdce8c309046c02643092bb6.fa.png)

1. در نهایت، به کارت تطبیقی ارسال شده به کانال در **Microsoft Teams** نگاه کنید. در کانال، کارت تطبیقی را مشاهده خواهیم کرد که اطلاعات مربوط به ردیف رزومه جدید ایجاد شده در Dataverse را نمایش می‌دهد. روی لینک در ابتدای کارت تطبیقی حرکت کنید، مشاهده کنید که URL همان URL نمای سیستم رزومه‌ها است که قبلاً در JSON (مراحل 15 - 19 **آزمایش 3.2 - اطلاع‌رسانی به کانال Teams با استفاده از کارت تطبیقی**) پیکربندی شده است.

       ![Adaptive Card Resume Table system view URL](../../../../../translated_images/3.3_08_AdaptiveCardResumeTableURL.5a59821d60c8698e5c9e4746806b975bbdf3c4400dc0bb02a53f350bdea569e9.fa.png)

1. لینک را انتخاب کنید و به نمای سیستم رزومه‌ها در برنامه مدل‌محور **Hiring Hub** در مرورگر خود هدایت خواهید شد.

       ![Resume system view in Hiring Hub model-driven app](../../../../../translated_images/3.3_09_ResumeTableSystemView.81f52ab85aadda7d9131ced31d024fb4b411ccf600dd230d9d7e931c476e271c.fa.png)

1. به کارت تطبیقی ارسال شده به کانال در Microsoft Teams بازگردید. این بار، روی **View Resume** حرکت کنید که اقدام `Action.OpenURL` کارت تطبیقی است. مشاهده کنید که URL همان URL ردیف رزومه است که قبلاً در JSON (مراحل 30 - 36 **آزمایش 3.2 - اطلاع‌رسانی به کانال Teams با استفاده از کارت تطبیقی**) پیکربندی شده است.

       ![Adaptive Card Resume row URL](../../../../../translated_images/3.3_10_AdaptiveCardResumeRowURL.2063a075c2d4adec27dfcc2ea4c01a385d791e0c4fc127caba912bde14bf77d6.fa.png)

1. اقدام را انتخاب کنید و به فرم ردیف رزومه در برنامه مدل‌محور **Hiring Hub** در مرورگر خود هدایت خواهید شد.

       ![Resume row in Hiring Hub model-driven app](../../../../../translated_images/3.3_11_ResumeRow.6f051ed512d396712a04ee98319d6643516e0bbfbf8a9de07d3df7d264563b9c.fa.png)

## ✅ مأموریت کامل شد

تبریک! 👏🏻 کار عالی، اپراتور.

✅ محرک رویداد: شما یک محرک رویداد ایجاد کرده‌اید که مقادیر پارامترهای Dataverse را به یک جریان عامل منتقل می‌کند.  
✅ ساخت جریان عامل: استفاده از مقادیر پارامترهای Dataverse برای ارسال یک کارت تطبیقی به کانال در Microsoft Teams برای اطلاع‌رسانی به تیم استخدام منابع انسانی.  
✅ به‌روزرسانی دستورالعمل‌های عامل فرعی: برای فراخوانی جریان پس از تکمیل محرک رویداد.

این امکان را برای **Hiring Agent** فراهم می‌کند که به صورت خودکار عمل کند و هر زمان که رزومه‌ها به عنوان پیوست ایمیل دریافت شوند، تیم استخدام منابع انسانی را برای بررسی دستی مطلع کند.

این پایان **آزمایش 03 - خودکارسازی ایمیل‌های درخواست شغلی کاندیداها** است، لینک زیر را انتخاب کنید تا به درس بعدی بروید.

⏭️ [انتقال به درس **نوشتن دستورالعمل‌های عامل**](../04-agent-instructions/README.md)

## 📚 منابع تاکتیکی

📖 [عامل خود را در Copilot Studio خودکار کنید](https://learn.microsoft.com/training/modules/autonomous-agents-online-workshop/?WT.mc_id=power-188561-ebenitez)

📖 [افزودن یک محرک رویداد](https://learn.microsoft.com/microsoft-copilot-studio/authoring-trigger-event?WT.mc_id=power-188561-ebenitez)

📖 [استفاده از جریان‌های عامل با عامل شما](https://learn.microsoft.com/microsoft-copilot-studio/advanced-flow?WT.mc_id=power-188561-ebenitez)

📖 [مقدمه‌ای بر محرک‌های Power Automate](https://learn.microsoft.com/power-automate/triggers-introduction?WT.mc_id=power-188561-ebenitez)

📖 [استفاده از جریان‌های Power Automate با عوامل](https://learn.microsoft.com/microsoft-copilot-studio/advanced-flow-create?WT.mc_id=power-188561-ebenitez)

📖 [جلوگیری از دست دادن داده‌ها برای Copilot Studio](https://learn.microsoft.com/microsoft-copilot-studio/admin-data-loss-prevention?WT.mc_id=power-188561-ebenitez)

---

**سلب مسئولیت**:  
این سند با استفاده از سرویس ترجمه هوش مصنوعی [Co-op Translator](https://github.com/Azure/co-op-translator) ترجمه شده است. در حالی که ما تلاش می‌کنیم دقت را حفظ کنیم، لطفاً توجه داشته باشید که ترجمه‌های خودکار ممکن است شامل خطاها یا نادرستی‌ها باشند. سند اصلی به زبان اصلی آن باید به عنوان منبع معتبر در نظر گرفته شود. برای اطلاعات حیاتی، ترجمه حرفه‌ای انسانی توصیه می‌شود. ما مسئولیتی در قبال سوء تفاهم‌ها یا تفسیرهای نادرست ناشی از استفاده از این ترجمه نداریم.