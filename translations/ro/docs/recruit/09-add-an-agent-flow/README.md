<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "cc4afa4a5a11c9d03896decfbcbd4060",
  "translation_date": "2025-10-20T17:27:05+00:00",
  "source_file": "docs/recruit/09-add-an-agent-flow/README.md",
  "language_code": "ro"
}
-->
# 🚨 Misiunea 09: Adaugă un flux de agent la subiectul tău pentru automatizare

## 🕵️‍♂️ NUME DE COD: `OPERAȚIUNEA AUTOMATION POWERHOUSE`

> **⏱️ Fereastra de timp pentru operațiune:** `~30 minute`  

🎥 **Urmărește demonstrația**

[![Miniatura video flux agent](../../../../../translated_images/video-thumbnail.ede12df9aaebcc8996680c8b6555d309b53bdf33d1b0165cae3b5173a6bcdd73.ro.jpg)](https://www.youtube.com/watch?v=vtLZJT3eBXg "Urmărește demonstrația pe YouTube")

## 🎯 Scopul misiunii

Agentul tău poate acum să converseze cu utilizatorii și să ofere informații, dar excelența operațională adevărată necesită ca agentul tău să acționeze. Această misiune va transforma agentul tău conversațional într-un centru de automatizare prin echiparea sa cu fluxuri de agent.

La finalul misiunii, vei fi creat o automatizare completă pentru cererile de dispozitive care capturează inputul utilizatorului printr-un card adaptiv, recuperează date din SharePoint, trimite notificări managerilor prin email și oferă feedback utilizatorilor - toate orchestrate de agentul tău printr-un flux de lucru inteligent.

## 🔎 Obiective

În această misiune, vei învăța:

1. Ce sunt fluxurile de agent și cum diferă de fluxurile cloud Power Automate pentru automatizare
1. Caracteristicile cheie care fac fluxurile de agent puternice, inclusiv acțiunile AI și redactarea în limbaj natural
1. Explorarea designerului de fluxuri de agent și utilizarea expresiilor pentru gestionarea dinamică a datelor
1. Crearea unei automatizări complete pentru cererile de dispozitive care integrează date din SharePoint și notificări prin email

## 🤔 Ce este un flux de agent?

Fluxurile de agent sunt o modalitate puternică de a automatiza sarcini repetitive și de a integra aplicațiile și serviciile tale. Gândește-te la ele ca la fluxuri de lucru structurate, pas cu pas, pe care agentul tău le poate executa pentru a automatiza sarcini sau a se conecta cu alte aplicații și servicii. Le poți considera mini fluxuri care ajută agentul tău să facă lucruri precum trimiterea de notificări, actualizarea înregistrărilor sau răspunsul la evenimente.

Spre deosebire de agenții autonomi care folosesc AI pentru a lua decizii pe loc, fluxurile de agent sunt **fluxuri de lucru deterministe** - adică urmează aceeași cale de fiecare dată, asigurând rezultate consistente și fiabile.

Pe scurt:

- Ajută agentul să _facă lucruri_, nu doar să _spună lucruri_ utilizatorilor.
- Sunt reutilizabile în subiecte și agenți și pot fi declanșate de mesaje ale utilizatorilor, evenimente sau alte aplicații și servicii.

## 🙋🏽 Da, dar cum diferă de fluxurile cloud Power Automate?

Atât fluxurile de agent, cât și fluxurile cloud Power Automate ajută la automatizarea sarcinilor. Sunt concepute pentru scopuri diferite și funcționează în moduri diferite.

### 🤖 Fluxuri de agent în Copilot Studio

**Pentru ce sunt concepute:**

- Construite pentru agenți conversaționali și autonomi (prin instrucțiuni de agent) în Copilot Studio.
- Axate pe automatizare inteligentă, bazată pe AI, care interacționează cu sistemele de afaceri.

**De ce sunt utile:**

- Ușor de construit și gestionat direct în Copilot Studio.
- Excelente pentru automatizarea sarcinilor care se întâmplă _în timpul conversației_ cu utilizatorii, cum ar fi trimiterea unei cereri de concediu.
- Nu ai nevoie de o licență separată Power Automate, deoarece facturarea se bazează pe utilizare în Copilot Studio. Acest lucru poate economisi timp și costuri pentru echipele de întreprindere.

**Limitări:**

- Nu le poți partaja, copia sau atribui co-proprietari.
- Fluxurile de agent sunt vizibile și utilizabile doar în Copilot Studio.
- În prezent, declanșatoarele de evenimente pentru agenți pot fi editate în portalul de creare Power Automate.

### ☁️ Fluxuri cloud Power Automate

**Pentru ce sunt concepute:**

- Proiectate pentru automatizare generală între multe aplicații și servicii.
- Pot funcționa independent sau alături de fluxurile de agent.

**De ce sunt utile:**

- Oferă o gamă largă de conectori.
- Ideale pentru automatizarea proceselor în afara agenților.
- Pot fi partajate, reutilizate și gestionate între echipe.

**Cerințe:**

- Ai nevoie de o licență Power Automate pentru a le utiliza.

### 📗 Rezumat

| Folosește asta | Când vrei să |
| :- | :- |
| Fluxuri de agent | Automatizezi sarcini în cadrul unui agent, folosești AI și păstrezi totul în Copilot Studio |  
| Fluxuri cloud Power Automate | Automatizezi între aplicații și servicii sau construiești fluxuri de lucru în afara agenților |

## 👍🏻 De ce să folosești fluxurile de agent

Fluxurile de agent urmează întotdeauna o cale fixă - fac același lucru de fiecare dată când primesc același input.

Acest lucru le face:

- **Fiabile** - poți avea încredere că se vor comporta la fel de fiecare dată.
- **Predictibile** - știi ce rezultat să te aștepți când fluxul rulează.
- **Bazate pe reguli** - urmează pașii pe care îi definești.

Alte beneficii sunt:

- **Automatizare** - permit agentului tău să gestioneze sarcini repetitive, cum ar fi completarea formularelor sau trimiterea de notificări.
- **Conectivitate** - se conectează cu peste 1400 de conectori precum ServiceNow, SharePoint, Salesforce. Sau poți construi propriul conector personalizat.
- **Integrare strânsă** - fluxurile de agent fac parte din logica agentului, fiind declanșate direct de mesajele utilizatorilor sau de acțiuni în conversație.
- **Scalabilitate** - reutilizează fluxurile între mai mulți agenți sau scenarii.
- **Fără cod sau cod redus** - poți construi fluxuri folosind limbaj natural sau un designer vizual.
- **Platformă completă** - poți proiecta, testa și implementa fluxuri de agent într-un singur loc - Copilot Studio. Nu este nevoie să comuți între platforme.

## 🏄🏻‍♂️ Cum îmbunătățesc fluxurile de agent capacitățile agentului tău?

Fluxurile de agent extind ceea ce poate face agentul tău dincolo de "a conversa" cu utilizatorii. Îi permit să acționeze și să interacționeze cu sistemele.

Să presupunem că lucrezi într-un departament financiar și primești multe facturi de la furnizori. De obicei, cineva trebuie să citească fiecare factură, să extragă detaliile importante - suma, data, cine a emis factura - și să verifice dacă totul se potrivește cu înregistrările tale. Apoi, să o trimită persoanei potrivite pentru aprobare. Acest lucru necesită timp și efort.

Cu fluxurile de agent din Copilot Studio, poți automatiza acest proces. De îndată ce factura ajunge, agentul:

1. Citește documentul folosind procesarea inteligentă a documentelor pentru a găsi informațiile cheie.
1. Verifică detaliile în raport cu datele tale de întreprindere pentru a se asigura că totul este corect.
1. O trimite pentru aprobare persoanei potrivite.

Acest lucru economisește timp, reduce greșelile și face întregul proces mult mai fluid.

### Gândește-te astfel

- **Agenți**: decidenții inteligenți
- **Fluxuri de agent**: executanții de încredere

### De ce contează

- Obții ce e mai bun din ambele lumi: automatizare de încredere și AI flexibil.
- Este ușor să construiești și să actualizezi fluxurile pe măsură ce nevoile afacerii tale se schimbă.
- Poți scala automatizarea între echipe.

## 🔌 Caracteristici cheie care fac fluxurile de agent puternice

1. **Redactare în limbaj natural**
    - Poți descrie ce vrei să facă fluxul în engleză simplă.
    - Copilot înțelege intenția ta și construiește fluxul pentru tine.
    - Nu este nevoie să scrii cod - explică-ți ideea.

1. **Acțiuni AI**

    Folosește AI pentru:

    - A citi și înțelege documente sau imagini.
    - A rezuma conținutul lung în răspunsuri scurte și utile.
    - A face recomandări sau decizii inteligente.

1. **Acțiuni generative**
    - Acestea permit fluxului să se adapteze în timp real.
    - Agentul poate planifica și ajusta pașii pe baza informațiilor în schimbare.

1. **Acțiuni de integrare**
    - Conectează fluxul tău la alte instrumente precum Outlook, Microsoft Teams, ServiceNow, SharePoint și alte aplicații și servicii, prin intermediul celor +1400 de conectori încorporați sau prin propriul conector personalizat.
    - Acest lucru ajută agentul să lucreze cu aplicațiile pe care echipa ta le folosește deja.

1. **Intervenția umană**
    - Adaugă pași de aprobare unde o persoană trebuie să revizuiască sau să confirme ceva.
    - [Aprobări avansate](https://learn.microsoft.com/microsoft-copilot-studio/flows-advanced-approvals?WT.mc_id=power-172621-ebenitez) suportă mementouri, delegare și aprobări în mai multe etape.

## ⚙️ Cum funcționează

1. **Declanșator**

    Un eveniment pornește fluxul - cum ar fi un utilizator care pune o întrebare, invocarea fluxului dintr-un subiect, un moment programat sau un eveniment care se întâmplă într-un alt sistem.

1. **Acțiuni**

    Acestea sunt pașii pe care agentul îi urmează ulterior - trimite un email, apelează un API, actualizează un tichet în ServiceNow.

## 🧶 Cum să creezi un flux de agent

1. **Limbaj natural**: descrie ce vrei să facă agentul, iar Copilot îl construiește pentru tine.
1. **Canvas designer**: trage și plasează acțiuni, condiții și bucle în designerul de fluxuri de agent pentru a construi fluxul tău de agent.

## 🎨 Ce este designerul de fluxuri de agent?

Este un instrument vizual în Copilot Studio care te ajută să construiești, editezi și gestionezi fluxuri de agent care oferă instrucțiuni pas cu pas pe care agentul le urmează pentru a finaliza sarcinile. Este conceput să fie ușor de utilizat, chiar dacă ești nou în utilizarea fluxurilor de agent.

### Caracteristici cheie ale designerului de fluxuri de agent

1. **Canvas vizual**
    - Poți vedea întregul flux aranjat ca un diagramă.
    - Zoom in/out ușor, ajustează vizualizarea sau folosește o hartă mică pentru a naviga prin fluxuri mari.

1. **Adaugă și elimină acțiuni**
    - Apasă butonul _plus (+)_ pentru a adăuga o nouă acțiune, cum ar fi trimiterea unui mesaj sau actualizarea unui element dintr-o listă SharePoint.
    - Poți căuta acțiuni din conectori și să le configurezi prin setările lor.
    - Pentru a elimina o acțiune, apasă _cele trei puncte (⋮)_ și selectează _Șterge_.

1. **Verifică parametrii**
    - Apasă pe orice acțiune pentru a vizualiza sau edita setările acesteia, numite _parametri_.
    - Poți introduce valori manual sau folosi _expresii_ pentru a le face dinamice.

1. **Istoricul versiunilor**
    - De fiecare dată când salvezi fluxul, se înregistrează o versiune.
    - Poți reveni și vizualiza sau restaura versiuni anterioare, dacă este necesar.

1. **Verificarea erorilor**
    - _Flow Checker_ evidențiază orice erori.
    - Toate erorile trebuie rezolvate înainte de publicarea fluxului.

1. **Publicare și testare**
    - După ce fluxul tău este fără erori, publică-l pentru a-l face activ.
    - Folosește funcția _Test_ pentru a rula fluxul manual sau automat și verifică dacă funcționează conform așteptărilor.

### De ce să folosești designerul de fluxuri de agent?

- **Vizual și intuitiv** - poți construi fluxuri prin tragere și clic.
- **Sigur pentru experimentare** - istoricul versiunilor îți permite să anulezi modificările.
- **Testare integrată** - te ajută să te asiguri că totul funcționează înainte de a fi activat.

## 🔤 Ai menționat _expresii_ - ce sunt expresiile?

Expresiile sunt formule sau comenzi mici care ajută fluxul de agent să lucreze cu datele. Le folosești pentru a calcula valori, a formata text, a lua decizii sau a extrage informații specifice din inputuri.

### De ce să folosești expresii?

Expresiile îți permit:

- **Personalizarea modului în care sunt gestionate datele** - combinarea numelor, formatarea datelor.
- **Luarea deciziilor** - dacă o valoare este mai mare decât 10, fă ceva.
- **Transformarea datelor** - schimbarea textului în litere mici, extragerea unei părți dintr-un șir.
- **Automatizarea logicii** - fără a scrie cod complet.

### Cum arată expresiile?

Expresiile folosesc funcții. Împrumut o explicație despre ce sunt funcțiile de la fostul MVP Microsoft, Jerry Weinstock.

!!! quote
    Funcțiile sunt logici încorporate pentru a transforma datele tale fie prin operațiuni simple, fie complexe în expresia ta.

Funcțiile îți permit să construiești expresii fără să fie nevoie să scrii cod.

Modul în care îmi place să descriu acest lucru este că o funcție în fluxurile de agent este similară funcțiilor din Excel. Poți efectua o operațiune asupra datelor pentru a le transforma într-un rezultat dorit. Când construiești formula ta în Excel, selectezi valoarea de intrare din celulele unui tabel sau dintr-un interval și apoi aplici funcții pentru a manipula rezultatul datelor. Un exemplu este utilizarea funcției `COUNT` pentru a calcula numărul de celule care conțin numere dintr-un interval.

În fluxurile de agent, în loc să faci referire la date din celulele unui tabel, faci referire la ieșirile de date din declanșator sau acțiuni atunci când construiești expresiile tale. Continuând cu exemplul anterior, folosește funcția `length` pentru a obține numărul de elemente returnate din acțiunea conectorului _Get items_ din SharePoint.

### De ce contează funcțiile?

Utilizarea funcțiilor face ca fluxurile de agent să fie:

- **Mai inteligente** - pot reacționa la diferite inputuri sau condiții.
- **Flexibile** - poți personaliza modul în care sunt gestionate datele.
- **Eficiente** - eviți pașii manuali prin automatizarea logicii.

### Cele mai utile funcții

Următoarele sunt funcții comune utilizate în fluxurile de agent. Pentru lista completă de funcții, accesează [ghidul de referință](https://learn.microsoft.com/azure/logic-apps/workflow-definition-language-functions-reference?WT.mc_id=power-172621-ebenitez).

#### 🔡 Text

- `concat()` - Unește două sau mai multe bucăți de text.
      - Exemplu: `concat('Salut ', firstName)` → “Salut John”

- `toLower()` / `toUpper()` - Transformă textul în litere mici sau mari.
      - Util pentru standardizarea inputului.

- `substring()` - Extrage o parte dintr-un șir.
      - Exemplu: Obține primele 3 litere ale unui nume.

- `trim()` - Elimină spațiile de la începutul și sfârșitul textului.

#### 🔢 Matematică și numere

- `add()`, `sub()`, `mul()`, `div()` - Operațiuni matematice de bază.
      - Exemplu: `add(5, 3)` - rezultatul este 8

#### 📅 Dată și timp

- `utcNow()` - Obține data și ora curentă în UTC.
      - Excelent pentru marcarea timpului.

- `addDays()`, `addHours()` - Adaugă timp la o dată.
- Exemplu: `addDays(utcNow(), 7)` rezultatul este 7 zile de acum.

- `formatDateTime()` - Formatează o dată într-un șir de caractere ușor de citit.
      - Exemplu: Luni, 7 iulie 2025

#### ✅ Logic

- `if()` - Rulează o valoare dacă este adevărat, alta dacă este fals.
      - Exemplu: `if(score > 50, 'Pass', 'Fail')`

- `equals()` - Verifică dacă două valori sunt identice.

- `and()`, `or()`, `not()` - Combină mai multe condiții.

#### 🪣 Alte funcții utile

- `coalesce()` - Returnează prima valoare care nu este goală.
      - Util pentru valori implicite sau de rezervă.

- `guid()` - Generează un ID unic.
      - Util pentru urmărire sau logare.

- `length()` - Numără câte caractere sau elemente sunt într-un șir de caractere sau într-un array.

## ⭐ Cele mai bune practici

Iată câteva bune practici pentru construirea fluxurilor de agenți în Copilot Studio.

1. **Începe simplu și construiește treptat**

    - Începe cu o sarcină mică și clară, cum ar fi trimiterea unui mesaj.
    - Adaugă mai mulți pași după ce testezi elementele de bază ale automatizării tale.

1. **Folosește denumiri clare și descriptive pentru acțiuni**

    - Etichetează fiecare pas clar, astfel încât tu și echipa ta să înțelegeți ce face.
    - Exemplu: în loc de numele implicit "Actualizează elementul" pentru acțiunea conectorului SharePoint, redenumește-l în funcție de ceea ce actualizează, cum ar fi "Actualizează starea dispozitivului."

1. **Verifică erorile înainte de publicare**

    - Folosește **verificatorul de flux** pentru a găsi și remedia orice probleme.
    - Nu poți publica fluxuri dacă există erori, așa că încearcă să le rezolvi pe măsură ce apar.

1. **Testează-ți fluxul temeinic**

    - Doar pentru că fluxul este salvat și publicat, nu înseamnă că funcționează conform așteptărilor.
    - Folosește funcția _Test_ pentru a rula manual sau automat fluxul și verifică rezultatele.

1. **Folosește Istoricul Versiunilor**

    - Salvează-ți fluxul frecvent, astfel încât să poți reveni la versiunile anterioare, dacă este necesar.
    - Poți vizualiza și restaura versiunile anterioare utilizând panoul _Istoric Versiuni_.

1. **Folosește parametrii și expresiile în mod inteligent**

    - Când configurezi acțiuni, folosește parametrii pentru a face fluxul dinamic.
    - Poți introduce valori manual sau folosi expresii pentru a le calcula, sau le poți combina cu valori din acțiuni anterioare utilizând selectorul de _conținut dinamic_.

1. **Șterge acțiunile neutilizate**

    - Dacă adaugi o acțiune și ulterior decizi că nu ai nevoie de ea, elimin-o pentru a menține fluxul curat.

## 🧪 Laboratorul 09 - Adaugă un flux de agent pentru automatizare și îmbunătățește capabilitățile subiectului

Acum vom învăța cum să îmbunătățim subiectul nostru cu carduri adaptive și utilizând funcționalități avansate ale subiectelor și nodurilor.

- [9.1 Creează un flux de agent](../../../../../docs/recruit/09-add-an-agent-flow)
- [9.2 Adaugă fluxul de agent la subiect](../../../../../docs/recruit/09-add-an-agent-flow)
- [9.3 Actualizează subiectul Cerere dispozitiv cu mai multe noduri pentru o experiență mai bună a utilizatorului](../../../../../docs/recruit/09-add-an-agent-flow)
- [9.4 Testează agentul folosind mai multe scenarii](../../../../../docs/recruit/09-add-an-agent-flow)

### ✨ Scenariu de utilizare

**Ca** manager al unui angajat

**Îmi doresc să** primesc cereri de dispozitive

**Astfel încât să** pot analiza dispozitivul solicitat de angajat.

Să începem!

### Cerințe preliminare

1. **Lista SharePoint**

    Vom folosi lista **Devices** din SharePoint din [Lecția 00 - Configurarea cursului - Pasul 3: Creează un site nou în SharePoint](../00-course-setup/README.md#step-4-create-new-sharepoint-site).

    Dacă nu ai configurat lista **Devices** din SharePoint, te rugăm să te întorci la [Lecția 00 - Configurarea cursului - Pasul 3: Creează un site nou în SharePoint](../00-course-setup/README.md#step-4-create-new-sharepoint-site).

1. **Agentul Contoso Helpdesk**

    Vom folosi același agent creat anterior în [Lecția 06 - Creează un agent personalizat folosind limbaj natural cu Copilot și conectându-l la datele tale](../06-create-agent-from-conversation/README.md).

### 9.1 Creează un flux de agent

În acest exercițiu, vom crea un flux de agent care preia elementul din SharePoint al dispozitivului selectat și trimite un e-mail unui manager cu detaliile dispozitivului.

1. În subiectul **Cerere dispozitiv**, derulează în jos la nodul **Întreabă cu card adaptiv** și adaugă un nod nou. Selectează **Adaugă un instrument** și, în fila **Instrumente de bază** din panoul lateral, selectează **Flux de agent nou**.

    ![Adaugă flux de agent nou](../../../../../translated_images/9.1_01_AddNewAgentFlow.2b9078604a054d1f022f9c73adaf10fe430e81875ec8717a7f70ef7b05f11c15.ro.png)

1. **Designerul de fluxuri de agent** se va încărca cu un declanșator și o acțiune.

    - **Declanșator** - Când un agent apelează fluxul
        - Acesta va declanșa un flux dintr-un agent Copilot Studio.

    - **Acțiune** - Răspunde agentului
        - Acesta trimite un răspuns care poate conține valori de ieșire înapoi către agentul Copilot Studio.

    Selectează declanșatorul.

    ![Selectează declanșatorul](../../../../../translated_images/9.1_02_SelectTrigger.92dc20442add764c8aa4b7f737f28416a3223e4471562462ed6dcba2dc7c7936.ro.png)

1. Următorul pas este să adăugăm mai multe intrări pentru fluxul de agent.

    - `DeviceSharePointId` - acesta va stoca valoarea, ID-ul, elementului din SharePoint. Această valoare ID este o ieșire din nodul Întreabă cu card adaptiv unde utilizatorul a selectat dispozitivul.

    - `User` - acesta va fi numele utilizatorului, care va fi preluat dintr-o variabilă de sistem a agentului.

    - `AdditionalComments` - acesta va fi comentariul introdus de utilizator, care este o ieșire din nodul Întreabă cu card adaptiv.

    Mai întâi vom adăuga `DeviceSharePointId` ca intrare pentru declanșatorul nostru. Selectează **+ Adaugă o intrare**.

    ![Adaugă o intrare](../../../../../translated_images/9.1_03_AddInput.fd1e0a99ecb5e20f3a518cb23fc0d22c6db1435c5ffb2e183fce3b8a056287bb.ro.png)

1. Pentru tipul de intrare utilizator, selectează **Text**.

    ![Selectează Text](../../../../../translated_images/9.1_04_SelectText.47ca776822ec5a6c1339c012d51e0eb6eac6bf8315d4ac6f25498b10ada16df9.ro.png)

1. Pentru numele intrării, introdu următorul text.

    ```text
    DeviceSharePointId
    ```

    ![Intrare DeviceSharePointId](../../../../../translated_images/9.1_05_DeviceSharePointIdInput.caf77f8eb60a1b8649ea8b0abf05dfce9fa4bef9d9c465cd8906395e5b44842e.ro.png)

1. Vom adăuga acum a doua intrare, `User`. Repetă aceiași pași, selectează **+ Adaugă o intrare** și selectează **Text**.

    ![Adaugă o intrare](../../../../../translated_images/9.1_06_AddInput.3ca4bff9991b6e8a331bd909ff58038387696ce7b6ee7a932a88316aff41bc57.ro.png)

1. Pentru numele intrării, introdu următorul text.

    ```text
    User
    ```

    ![Intrare User](../../../../../translated_images/9.1_07_UserInput.16b2405f2d5744ea14a6a67b69539ba24719aaf642ddfc2b281e784d74d8c1ea.ro.png)

1. Vom adăuga acum a treia intrare, `AdditionalComments`. Repetă aceiași pași, selectează **+ Adaugă o intrare** și selectează **Text**.

    ![Adaugă o intrare](../../../../../translated_images/9.1_08_AddInput.4685bb77618e6d9cfca7a42a0945d10f59825b1ca42de372dcf07c9170451680.ro.png)

1. Pentru numele intrării, introdu următorul text.

    ```text
    AdditionalComments
    ```

    ![Intrare AdditionalComments](../../../../../translated_images/9.1_09_AdditionalComments.a4587b59b85450ca0566615c9473132dd6447e6c7513e4926942655aa0e80195.ro.png)

1. Pentru intrarea `AdditionalComments`, o vom actualiza pentru a o face opțională. Selectează **pictograma cu trei puncte (...)** și selectează **Fă câmpul opțional**.

    ![Fă câmpul opțional](../../../../../translated_images/9.1_10_Optional.753bd03817c2eb37bb44a7bfd7d29314aa7109cde02e3f619c01c42bc9170b71.ro.png)

1. Foarte bine! Declanșatorul a fost configurat, să continuăm. Selectează **pictograma plus +** sub declanșator pentru a insera o nouă acțiune.

    ![Adaugă acțiune](../../../../../translated_images/9.1_11_AddAction.86c14acd1ce22e99b7244e0001f0039362ff6ac3efafe03956788aaa31e705af.ro.png)

1. Panoul **Acțiuni** va apărea unde poți vizualiza acțiuni din peste 1400 de conectori încorporati pentru servicii Microsoft și terțe. În **câmpul de căutare** introdu următorul text,

    ```text
    Get item
    ```

    O listă de acțiuni va fi afișată în rezultatele căutării. Selectează acțiunea **Obține element** din conectorul **SharePoint**.

    ![Acțiunea Obține element](../../../../../translated_images/9.1_12_AddGetItemAction.434cdcb822e1f72993fc4a0c0ad753e1220456f9dab8fc307d42f5711071d45b.ro.png)

1. Putem începe acum configurarea acțiunii **Obține element**.

    Selectează **pictograma cu trei puncte (...)** din acțiunea **Obține element**.

    ![Selectează pictograma cu trei puncte](../../../../../translated_images/9.1_13_SelectEllipsis.88bf304067f3103825f183f8962634af831460541290533e5670f4c014a97c46.ro.png)

1. Selectează **Redenumește**.

    ![Selectează Redenumește](../../../../../translated_images/9.1_14_SelectRename.74d99c883418b7dbf58758304976cac1d0f2afd30e4cd1992830f00775a46b18.ro.png)

1. Redenumește acțiunea în,

    ```text
    Get Device
    ```

    ![Redenumește acțiunea](../../../../../translated_images/9.1_15_RenameAction.ff64b79f6e6603ae89f272f91d84ff4432c04ba103c401a2808a767e3ceb5617.ro.png)

1. În câmpul **Adresa site-ului**, selectează **Adresa site-ului** pentru site-ul SharePoint Contoso IT creat în [Lecția 00 - Configurarea cursului - Pasul 3: Creează un site nou în SharePoint](../00-course-setup/README.md#step-4-create-new-sharepoint-site).

    În câmpul **Nume listă**, selectează lista **Devices** din SharePoint.

    ![Parametrii de intrare](../../../../../translated_images/9.1_16_SharePointSiteAndListParameters.af6e0b112eb4bfb210f9259da02b459097a06307afa6ca269cb33aa9ecc1c1e4.ro.png)

1. În câmpul **Id**, selectează **pictograma fulger** sau **pictograma fx** din dreapta.

    ![Selector de conținut dinamic](../../../../../translated_images/9.1_17_InsertExpressionIcon.6e250bb84e7b8884de7b2052005f7ff3cd95f2c28671d2da7965001b3f621902.ro.png)

1. În fila **Conținut dinamic** din panoul lateral, introdu următorul text,

    ```text
    sharepoint
    ```

    Rezultatele căutării vor afișa parametrii de intrare care se potrivesc cu valoarea căutată. Selectează parametrul **DeviceSharePointId** din declanșator.

    Apoi, selectează **Adaugă** pentru a adăuga intrarea de conținut dinamic în parametrul **Id** al acțiunii.

    ![Selectează intrarea DeviceSharePointId](../../../../../translated_images/9.1_18_DeviceSharePointId.b9be8e7c3c6b0ab710a8f662e62a0ec0133a530f6877b6cea3c48acc8022fec5.ro.png)

1. Intrarea de conținut dinamic din declanșator este acum referită în parametrul **Id** al acțiunii. Vom actualiza unul dintre parametrii avansați în continuare. Selectează **Afișează tot** pentru a vizualiza parametrii avansați.

    ![Vizualizează parametrii avansați](../../../../../translated_images/9.1_19_AdvancedParameters.4bb8e0c11e7864625ad6c30ab1b9021d367cd77374c56985df7b3d43845a1883.ro.png)

1. Parametrul **Limit Columns by View** va fi afișat și implicit este setat la **Folosește toate coloanele (Nu limita)**. Vom actualiza această valoare la o vizualizare pentru a limita coloanele returnate în răspunsul acțiunii. Selectează parametrul **Limit Columns by View** pentru a vizualiza lista de vizualizări.

    ![Selectează parametrul](../../../../../translated_images/9.1_20_LimitColumnsByView.4d30f532f1e1033323d39df5c9b8e803788ea785ed58de2efca2faa5df4b26fc.ro.png)

1. Selectează vizualizarea **Toate elementele**.

    ![Selectează vizualizarea Toate elementele](../../../../../translated_images/9.1_21_SelectView.d180e83d5e62f5fb6994a7071d5e6ce8f88143d8cc833cb55b208c6fee41bc02.ro.png)

1. Selectează **pictograma plus +** sub acțiunea _Obține dispozitiv_ pentru a insera o nouă acțiune.

    ![Adaugă o nouă acțiune](../../../../../translated_images/9.1_22_AddAnAction.904b79142347fe927168036ade55d842fa088deef53710944272c681421e0e84.ro.png)

1. În câmpul de căutare introdu următorul text,

    ```text
    send an email
    ```

    O listă de acțiuni va fi afișată în rezultatele căutării. Selectează acțiunea **Trimite un e-mail (V2)** din conectorul **Office 365 Outlook**.

    ![Acțiunea Trimite un e-mail](../../../../../translated_images/9.1_23_SendAnEmail.f1019365131658b0e71b5b58b57d7d8b3f3a0c670ddb3cca0838bf0b4f8cd354.ro.png)

1. Următorul pas este să creezi o conexiune pentru acțiunea conectorului. Selectează **Conectează-te**.

    ![Creează conexiune](../../../../../translated_images/9.1_24_CreateConnection.9e968ad4de9d13d81e95779c4fa60809fd40de5f65dbd014f1dc39663c935806.ro.png)

1. Selectează contul utilizatorului conectat.

    ![Selectează contul utilizatorului](../../../../../translated_images/9.1_25_SelectUserAccount.f3c96ac1a377c4b42a6301ba38c21469eb7bd3f48633f04200f1610902f8bdbe.ro.png)

1. Selectează **Permite accesul**. O conexiune a fost creată acum.

    ![Selectează permite accesul](../../../../../translated_images/9.1_26_AllowAccess.1abcaea31b9846279cafafd7160baea6bec60cdfac8224df7082ceee3ef22a26.ro.png)

1. Redenumește acțiunea în următorul text,

    ```text
    Send an email to manager
    ```

    Să definim următor parametrii de intrare ai acțiunii noastre.

    Pentru parametrul de intrare **Către**, selectează-te pe tine. În mod normal, acesta ar fi managerul tău sau am folosi o altă acțiune care să preia managerul tău pe baza profilului tău Entra ID, dar pentru scopul acestei lecții, selectează-te pe tine.

    Pentru parametrul de intrare **Subiect**, introdu următorul text,

    ```text
    Request type: new device
    ```

    Pentru parametrul de intrare **Corp**, introdu următorul text,

    ```text
    Hi,

    New device requested from

    Manufacturer:
    Model:
    Link to item in SharePoint
    Additional comments from:

    This is an automated email from Contoso Helpdesk Copilot
    ```

    ![Redenumește acțiunea și configurează intrările](../../../../../translated_images/9.1_27_RenameAndConfigureParameters.c3d29a3481fb5c0240cca85db4119387e6b750546ed12e2af4a9ac62d7454f89.ro.png)

1. Următorul pas este să actualizăm parametrul de intrare **Corp** cu referințe la intrările de conținut dinamic din **declanșator** sau acțiunea **Obține element**. Introdu un spațiu după a doua linie, deoarece vom insera numele utilizatorului din intrarea declanșatorului, **User**.

    Selectează **pictograma fulger** sau **pictograma fx** din dreapta.

    ![Adaugă intrarea User ca conținut dinamic](../../../../../translated_images/9.1_28_AddUserInput.f38d3df648faef75f1985bdcc23db16e197ccb1ddc015210c43bbb2569fcf654.ro.png)

1. În fila **Conținut dinamic** din panoul lateral, selectează intrarea **User** din declanșator.

    Selectează **Adaugă** pentru a adăuga intrarea de conținut dinamic **User** în parametrul **Corp** al acțiunii.

    ![Selectează intrarea User](../../../../../translated_images/9.1_29_SelectUserInput.4efc79f52d74fa7ae13132ea13f7d51b3f4aab6413afc41a8354c5e59852b9fc.ro.png)
1. Conținutul dinamic introdus de declanșator este acum referit în parametrul **Body** al acțiunii. Vom repeta același lucru pentru liniile rămase din corpul mesajului de e-mail.

    ![Input utilizator adăugat](../../../../../translated_images/9.1_30_UserInputAdded.905ec0489e4f1bbe7cc071826050834aa1e5acf53f8a65ad59532ea13b81c607.ro.png)

1. Faceți clic în spațiul de lângă `Manufacturer:`. Selectați **pictograma fulger** sau **pictograma fx** din dreapta.

    În fila **Dynamic content** din panoul lateral, introduceți următorul text în câmpul de căutare,

    ```text
    manufacturer
    ```

    Selectați inputul **Manufacturer value** din declanșator și apăsați **Add**.

    ![Adăugați inputul Manufacturer value ca conținut dinamic](../../../../../translated_images/9.1_31_ManufacturerValueAdded.db2cf35a35a20590d80d7f0191d771a045bf55e40ce98982d0e099588e260712.ro.png)

1. Faceți clic în spațiul de lângă `Model:`. Selectați **pictograma fulger** sau **pictograma fx** din dreapta.

    În fila **Dynamic content** din panoul lateral, introduceți următorul text în câmpul de căutare,

    ```text
    model
    ```

    Selectați inputul **Model** din acțiunea **Get item** și apăsați **Add**.

    ![Adăugați inputul Model ca conținut dinamic](../../../../../translated_images/9.1_32_ModelAdded.ff9d858648ddb85fe70eaaafa6e23d0560500e7327ccb29ee56ecac0d8d36cab.ro.png)

1. Pentru textul `Link to item in SharePoint`, vom actualiza acest lucru pentru a fi un hyperlink în corpul mesajului de e-mail. Faceți clic la începutul liniei și selectați **pictograma fulger** sau **pictograma fx** din dreapta.

    ![Adăugați conținut dinamic](../../../../../translated_images/9.1_33_AddDynamicContent.c662d682377af82adc52de18e05baf9b6aa5a972882dcf6274f3979f14641627.ro.png)

1. Faceți clic după eticheta HTML anchor și selectați **pictograma fulger** sau **pictograma fx** din dreapta.

    În fila **Dynamic content** din panoul lateral, introduceți următorul text în câmpul de căutare,

    ```text
    link to item
    ```

    Selectați inputul **Link to item** din acțiunea **Get item** și apăsați **Add**.

    ![Adăugați Link to item ca conținut dinamic](../../../../../translated_images/9.1_34_AddLinkToItem.6827bd3bad484f7382d060435bb0ef45e9bb1c3ad4774529559bb4c5f9bbca8c.ro.png)

1. Trebuie să comutăm la editorul HTML selectând pictograma **&lt;/&gt;**.

    ![Adăugați input utilizator](../../../../../translated_images/9.1_35_ToggleCodeView.ae3a9caf213f2c6366487e10092ad1fad3494f110936219258d842c23e7f46d9.ro.png)

1. Editorul HTML este acum activat. Faceți clic înainte de textul `Link to item in SharePoint`, adăugați o etichetă HTML anchor pentru a crea un hyperlink. Copiați și lipiți următorul cod.

    ```text
    <a href="
    ```

    ![Etichetă HTML](../../../../../translated_images/9.1_36_AddHTMLTag.146220ae5c33eaf9915c393c37d62b9d4b258413e9f4dc42a1ab005437669443.ro.png)

1. Inputul dinamic **Link to item** este acum referit în parametrul **Body**. Faceți clic după inputul **Link to item**, copiați și lipiți următorul cod.

    ```text
    ">
    ```

    ![Etichetă HTML](../../../../../translated_images/9.1_37_AddHTMLTag.48f73b302f6a84bb6a51e0666fd30baf1f8d9d906947d44dc4095ededed18a2d.ro.png)

1. Faceți clic după textul `Link to item in SharePoint`, închideți eticheta HTML anchor. Copiați și lipiți următorul cod.

    ```text
    </a>
    ```

    ![Etichetă HTML](../../../../../translated_images/9.1_38_AddHTMLTag.47d2f0521e6aba9d609bfe65d86ebae5786e4ad5465fefb7ae0370db6e924c96.ro.png)

1. Selectați pictograma **&lt;/&gt;** pentru a comuta vizualizarea codului.

    ![Dezactivați vizualizarea codului](../../../../../translated_images/9.1_39_ToggleCodeView.88606eb37d702a686904b2dd8943fcf144cec462b37ee781e8ee0415e62bd951.ro.png)

1. Apoi selectați din nou pictograma **&lt;/&gt;** pentru a comuta vizualizarea codului.

    ![Comutați înapoi la vizualizarea codului](../../../../../translated_images/9.1_40_ToggleCodeViewAgain.32da9b9804adbbfaf8d85bdaa6fa51d2ae5fc1fbb97f75084813972c66d0c4d9.ro.png)

1. Observați cum există mai multe caractere suplimentare `&lt;br&gt;`. Ștergeți aceste caractere.

    ![Ștergeți caracterele](../../../../../translated_images/9.1_41_DeleteCharacters.f1ef3830b186c2cd9974ea05e336c83c0706d72ab1010d06283716dc4e982875.ro.png)

1. Am terminat de adăugat un hyperlink în corpul mesajului de e-mail 😎 Selectați pictograma **&lt;/&gt;** pentru a comuta vizualizarea codului.

    ![Etichetă HTML curățată](../../../../../translated_images/9.1_42_HTMLTagTidiedUp.1b27fa2c4dc65c3f1a7151abcf6e388f64cb83745b10cd22769c1f9af3421fc6.ro.png)

1. Faceți clic după textul `Additional comments from` înainte de caracterul două puncte și selectați **pictograma fulger** sau **pictograma fx** din dreapta.

    ![Adăugați parametrul utilizator](../../../../../translated_images/9.1_43_AddUserInput.6f0d26739c1b9039383aa37cc46fa1149a269bd4268fb54b897d144afc49c515.ro.png)

1. În fila **Dynamic content** din panoul lateral, introduceți următorul text în câmpul de căutare,

    ```text
    user
    ```

    Selectați parametrul **User** din declanșator și apăsați **Add**.

    ![Adăugați parametrul User ca conținut dinamic](../../../../../translated_images/9.1_44_AddUserDynamicContent.bb7c76e92650001207712b3447d3275d584f3ebf739034369869c3facf38eacf.ro.png)

1. Vom introduce acum o expresie care va afișa valoarea comentariilor suplimentare dacă sunt furnizate de utilizator în nodul **Ask an adaptive card**, altfel va afișa "None" dacă utilizatorul nu furnizează niciun comentariu.

    Faceți clic după două puncte și selectați **pictograma fulger** sau **pictograma fx** din dreapta.

    ![Adăugați expresie](../../../../../translated_images/9.1_45_AddExpression.c4c92dc4a56fab75c78ec2c5087682521e562264c1710c8dfaa24134adc3a112.ro.png)

1. În fila **Function** din panoul lateral și în câmpul expresiei de mai sus, introduceți următorul text,

    ```text
    if(empty())
    ```

    Această expresie folosește funcția `if` pentru o instrucțiune if-else.

    Următoarea funcție utilizată este `empty`, care verifică dacă există sau nu o valoare într-un parametru de tip șir. Parametrul de tip șir care trebuie referit este valoarea parametrului de input `AdditionalComments` din declanșator.

    ![Dacă este gol](../../../../../translated_images/9.1_46_IfEmptyFunctions.95d21ad01f6f7c290cb8d5a57ccbca9c9532df7ce57f800554dea541d503ddc6.ro.png)

1. Apoi, faceți clic **în interiorul parantezelor** după funcția `empty`. Vom introduce parametrul de input `AdditionalComments` din declanșator.

    Selectați fila **Dynamic content**. Introduceți următorul text în câmpul de căutare,

    ```text
    Additional
    ```

    Derulați în jos panoul și selectați inputul **AdditionalComments** din declanșator. Parametrul va fi acum adăugat ca parametru de tip șir în expresie.

    ![Adăugați AdditionalComments ca conținut dinamic](../../../../../translated_images/9.1_47_AdditionalCommentsDynamicContent.f9632f09779888c18a58df8e97ef677ed885b0eaa88c252b13b22c0e4c67495b.ro.png)

1. Următorul pas este să definim logica **_true_**, unde dacă parametrul de tip șir `AdditionalComments` este gol, atunci dorim să afișăm un șir (text) cu valoarea `None`.

    După paranteza care închide parametrul de tip șir, introduceți următorul text,

    ```text
    , 'None',
    ```

    ![Logică true](../../../../../translated_images/9.1_48_None.31978299f29e07ef3257eedd5dcee09c8675f8b3f61aea8102900118e0b6ca70.ro.png)

1. În cele din urmă, vom defini logica **_false_**, unde dacă parametrul de tip șir `AdditionalComments` nu este gol, atunci dorim să afișăm valoarea parametrului de input **AdditionalComments** din declanșator.

    > Reamintim că această valoare va fi din câmpul Additional Comments al cardului adaptiv din nodul **Ask with adaptive card** din subiectul **Request device**.

    După virgula de după logica **_true_**, selectați fila **Dynamic content**. Introduceți următorul text în câmpul de căutare,

    ```text
    Additional
    ```

    Derulați în jos panoul și selectați inputul **AdditionalComments** din declanșator. Parametrul va fi acum adăugat ca parametru de tip șir în expresie.

    Acum adăugați-l în parametrul nostru **Body** selectând **Add**.

    ![Logică false](../../../../../translated_images/9.1_49_AdditionalCommentsDynamicContent.d42c7fc29f65d901bb26dcbc13408c387633ea185cdd79c35d6439231b7363d5.ro.png)

1. Excelent, expresia noastră este completă! Expresia a fost acum adăugată în parametrul **Body**. În cele din urmă, formatați ultima linie în Italic.

    ![Italic](../../../../../translated_images/9.1_50_Italics.a0c01aa33ef4e83167e1fbc21c1d833f95addd60c8f531411cf9c58a96a31b02.ro.png)

1. Vom actualiza acum acțiunea **Respond to the agent** pentru a trimite valoarea parametrului **Model value** din acțiunea **Get item** înapoi la agent.

    Țineți apăsat butonul stâng al mouse-ului și mișcați în sus în cadrul designerului pentru a vizualiza acțiunea **Respond to the agent**.

    Selectați acțiunea **Respond to the agent** și alegeți **Text** ca tip de output.

    ![Selectați outputul Text](../../../../../translated_images/9.1_51_RespondToTheAgentAction.4c682a440e19a0fcd6d6f51ef9cdbfe76f482a39d635b8905d9b0cbbf33d945f.ro.png)

1. Introduceți următorul text ca nume al outputului.

    ```text
    ModelValue
    ```

    ![Output ModelValue](../../../../../translated_images/9.1_52_ModelValueInput.20609429eb323281051607b090319adc5315c0245c7d61158eb119714fe4318f.ro.png)

1. Selectați câmpul de valoare și selectați **pictograma fulger** sau **pictograma fx** din dreapta.

    ![Introduceți expresie](../../../../../translated_images/9.1_53_InsertDynamicContent.108ba565696f9f52d742323e0f4c46c308f322ac4bd67802e3196430155c7443.ro.png)

1. În fila **Dynamic content** din panoul lateral, introduceți următorul text în câmpul de căutare,

    ```text
    model
    ```

    Selectați parametrul **Model** din acțiunea **Get item** și apăsați **Add**.

    ![Adăugați parametrul Model ca conținut dinamic](../../../../../translated_images/9.1_54_ModelParameter.f231fd0ec089ac6b9ac1b7fd2e6a60a35b08484ed10b0098cff6b3ce0c7760cb.ro.png)

1. Parametrul **Model** este acum valoarea outputului text. Selectați **Save draft** pentru a salva fluxul agentului nostru.

    Am finalizat fluxul agentului nostru 👏🏻

    ![Selectați save draft](../../../../../translated_images/9.1_55_SaveDraftAgentFlow.5ab97895a901458362881fc9ee576762bdb0883b37a6cbd7a631ddc2750705af.ro.png)

1. Să facem o ultimă actualizare fluxului agentului nostru înainte de publicare. Selectați fila **Overview** și apăsați **Edit**.

    ![Selectați Edit](../../../../../translated_images/9.1_56_EditAgentFlowDetails.023e8149284b9ae79dd3d95f574ff90bbcc1cc4a9fff4be56664ccbe0698f310.ro.png)

1. Pentru **Flow name**, copiați și lipiți următorul text.

    ```text
    Send device request email
    ```

    Pentru **Description**, selectați **refresh icon** pentru a utiliza AI și a genera automat o descriere bazată pe declanșator și acțiunile din fluxul agentului.

    Selectați **Save** pentru a salva numele și descrierea actualizată a fluxului agentului.

    ![Redenumiți, adăugați descriere și salvați detaliile](../../../../../translated_images/9.1_57_RenameAndDescription.57a190396550bf998d62c49ca359b66211ae50042ac5f8739b32f8b9bc292607.ro.png)

1. Selectați fila **Designer** și apăsați **Publish** pentru a publica fluxul agentului astfel încât să poată fi adăugat ca nod în subiectul **Request device**.

    ![Publicați](../../../../../translated_images/9.1_58_Publish.8f43271718c662deee7afea6fb283f64005b277b3a62086e6d91cc0c3ac4f79c.ro.png)

1. Un mesaj de confirmare va apărea în scurt timp pentru a confirma că fluxul agentului a fost publicat.

    ![Mesaj de confirmare](../../../../../translated_images/9.1_59_Confirmation.d406bde76c31b27f794d5742c992b8c84283f46b2e54524f1e500d0688a33716.ro.png)

### 9.2 Adăugați fluxul agentului la subiect

Să adăugăm acum fluxul agentului la subiectul **Request device**.

1. Selectați **Agents** din meniul din partea stângă și alegeți **Contoso Helpdesk Agent**.

    ![Selectați Agents](../../../../../translated_images/9.2_01_SelectAgent.b8a6fd3a8970d6b0c8e78bf0a5411257206612d53acdf9b44f78b2c9c2fe91fc.ro.png)

1. Selectați fila **Topics**.

    ![Selectați fila Topics](../../../../../translated_images/9.2_02_SelectTopics.3e8618aba5f4a1ddf3dee726b6da9a66ed89d04a2e8ca36b52112a6675c2885c.ro.png)

1. Selectați subiectul **Request device**.

    ![Selectați subiectul Request device](../../../../../translated_images/9.2_03_SelectRequestDevice.df10472702258708b3d069e718e695b9fcabc61d42901d524dc302a03b3fa4a9.ro.png)

1. Derulați în jos la nodul **Ask with adaptive card** și adăugați un nou nod.

    Selectați **Add a tool** și în fila **Basic tools** din panoul lateral, alegeți fluxul agentului **Send device request email** pe care l-am creat și publicat recent.

    ![Selectați fluxul agentului](../../../../../translated_images/9.2_04_SelectAgentFlow.15deca87db95fff1c9d904855d237d22a72c260adf3343d9e78695f07c42a8e0.ro.png)

1. Pentru inputurile declanșatorului fluxului agentului nostru, trebuie să selectăm outputurile variabile din nodul **Ask with adaptive card**.

    Selectați **pictograma elipsă (...)** pentru inputul **DeviceSharePointId**.

    ![Selectați variabila](../../../../../translated_images/9.2_05_SelectVariable.8fe53cbc0f950f732b9e9002b21d8762ddfe74fb601d61c2a5119e32383450a2.ro.png)

1. Selectați variabila **deviceSelectionId**, care este unul dintre outputurile definite în nodul **Ask with adaptive card**.

    ![Selectați variabila deviceSelectionId](../../../../../translated_images/9.2_06_SelectdeviceSelectionIdVariable.67c0091e0de9442d3cffbfe3b2cace8d76be37ea67815ddfc99af03ae4b37391.ro.png)

1. Apoi, selectați **pictograma elipsă (...)** pentru inputul **User**.

    ![Selectați variabila](../../../../../translated_images/9.2_07_SelectVariable.bf851128bec5e0255c6cf361a837ce9701d0afac84ed3d5b89665d111a098386.ro.png)

1. Selectați fila **System** din panoul lateral al variabilelor și alegeți **User.DisplayName**. Această variabilă stochează numele afișat al utilizatorului intern care interacționează cu agentul.

    ![Selectați variabila sistem User.DisplayName](../../../../../translated_images/9.2_08_SelectUser.DisplayNameVariable.926a2a7560402fbd7b224e2bf0ff11df9e5612803b7ce51e36f58201a09bbfd7.ro.png)

1. Apoi, selectați **pictograma mai mare decât** pentru **Advanced inputs** pentru a extinde și a vedea inputul **AdditionalComments**.

    ![Extindeți inputurile avansate](../../../../../translated_images/9.2_09_ExpandAdvancedInputs.bded22f83fe4eb21237daa254725e12a81ea75be34bcb0e8ab322037a4e6f418.ro.png)

1. Selectați **pictograma elipsă (...)** pentru inputul AdditionalComments.

    ![Selectați variabila](../../../../../translated_images/9.2_10_SelectVariable.86286cc06323e65fb3874b9fd0ea62d140b9e9b9a2b5116d667192a6dca3815f.ro.png)

1. Selectați fila **Formula** și pictograma de extindere din panoul lateral al variabilelor, deoarece vom folosi o expresie Power Fx.

    ![Fila Formula](../../../../../translated_images/9.2_11_SelectFormulaAndExpandIcon.3fcd07bfccc4f0779a5d26313b571e60be792da7fd28e937b3e888f8aaeda7e0.ro.png)

1. Similar cu expresia din fluxul agentului care face o verificare condițională folosind funcția _if_, dar de data aceasta
    - folosind funcții Power Fx,
    - și inserând fie nicio valoare, fie valoarea variabilei de output `commentsId` din nodul **Ask with adaptive card**.

    Introduceți următoarele funcții în câmpul Power Fx,

    ```text
    If(IsBlank())
    ```

Această expresie utilizează funcția `If` pentru o instrucțiune if-else.

Următoarea funcție utilizată este `IsBlank`, care verifică dacă există sau nu o valoare într-un parametru de tip șir. Parametrul de tip șir care trebuie referit este variabila de ieșire `commentsId` din nodul **Ask with adaptive card**.

![Funcțiile If și IsBlank](../../../../../translated_images/9.2_12_IfIsBlank.07f7516c7e1f7579239a8b3833d64a14eb88dc245cae714b3e07d6298e907d51.ro.png)

1. Apoi, faceți clic **în interiorul parantezelor** după funcția `IsBlank`. Vom introduce variabila de ieșire `commentsId` din nodul **Ask with adaptive card**.

Introduceți următorul cod în interiorul parantezelor,

    ```text
    Topic.commentsId
    ```

Și adăugați o virgulă după paranteză.

![Referință la variabila de ieșire commentsId](../../../../../translated_images/9.2_13_Topic.commentsId.1a04dc190dac334ebf6c4dbc1b6df1aad2e4bbdeeb3ef960871e93614381f079.ro.png)

1. Următorul pas este să definim logica:

   - când este **_true_** - dacă parametrul de tip șir `Topic.commentsId` este gol, atunci nu dorim să introducem nicio valoare.
   - când este **_false_** - dacă parametrul de tip șir `Topic.commentsId` nu este gol, atunci introducem valoarea variabilei commentsId.

După paranteza care închide parametrul de tip șir, introduceți următorul cod,

    ```text
    "", Topic.commentsId)
    ```

Expresia Power Fx ar trebui să fie următoarea,

    ```text
    If(IsBlank(Topic.commentsId), "", Topic.commentsId)
    ```

Foarte bine, expresia noastră este completă! 🙌🏻 Acum selectați **Insert** pentru a seta parametrul de intrare al fluxului agentului la expresia Power Fx.

![Expresia Power Fx](../../../../../translated_images/9.2_14_PowerFxExpression.80e76ea59bdb8f131d26edf2657923f4af9000768d44b06c0947115fd218698e.ro.png)

1. **Salvați** subiectul.

### 9.3 Actualizați subiectul Request device cu mai multe noduri pentru o experiență mai bună a utilizatorului

Vom adăuga în continuare două noduri suplimentare:

- **Send a message** - acesta va acționa ca un mesaj de confirmare care face referire la dispozitivul selectat și confirmă că cererea lor a fost trimisă.

- **Topic management** - pentru a închide conversația, vom redirecționa la nodul **End of conversation**.

Să începem!

1. Selectați **pictograma plus +** de sub nodul fluxului agentului și selectați nodul **Send a message**.

![Adăugați nodul send a message](../../../../../translated_images/9.3_01_AddSendAMessageNode.ac4111729a2602f8301ecffbcb263d692ecb43478aa9da63cae0dd58160f56c8.ro.png)

1. Introduceți următorul text în câmpul de mesaj,

    ```text
    Thanks
    ```

Apoi selectați **Insert variable**, deoarece vom face referire la numele utilizatorului.

![Introduceți variabila](../../../../../translated_images/9.3_02_InsertVariable.c5c9ebce61d1f442413d05f4437f74ee1d9c3a8c2ab696244937c56b5171f310.ro.png)

1. Selectați fila **System** și căutați `User` în câmpul de căutare. Selectați variabila **User.DisplayName**.

![Selectați variabila de sistem](../../../../../translated_images/9.3_03_SelectSystemVariable.47cfac2f3a727dbaf32ae960cbafe43ce9ed00f73edf01ac6d48e5b2b167e5fc.ro.png)

1. Introduceți următorul text în câmpul de mesaj,

    ```text
    . Your selected device,
    ```

Apoi selectați **Insert variable**, iar de această dată, în fila **Custom**, selectați variabila **ModelValue**.

Apoi introduceți următorul text pentru a completa mesajul.

    ```text
    , has been submitted and will be reviewed by your manager.
    ```

Mesajul ar trebui să arate astfel.

![Trimiteți mesajul](../../../../../translated_images/9.3_04_SendAMessage.3f6c4b5e53da9c7f9fcf9d0c453a9b65e44e35ea4c1124947fb638d0b682d96d.ro.png)

1. În cele din urmă, selectați **pictograma plus +** de sub nodul **Send a message** și selectați **Topic management**, urmat de **Go to another topic** și selectați **End of Conversation**.

![Topic management](../../../../../translated_images/9.3_05_EndOfConversation.3c6c96d03b29a4d0904dea09d96c62d6ad450fe60dd8d6b2fe9d31681d6cb147.ro.png)

1. **Salvați** subiectul.

![Salvați](../../../../../translated_images/9.3_06_SaveTopic.8c9201fabce9f41af03d9f1beb9ce321e4ee9880a94edabe58b592bffebda80a.ro.png)

### 9.4 Testați agentul folosind mai multe scenarii

Foarte bine!!! 😁 Acum putem testa agentul nostru.

#### 9.4.1 Solicitați un dispozitiv și introduceți un comentariu în cardul adaptiv

1. **Reîmprospătați** panoul de testare, selectați pictograma **activity map** și introduceți următorul mesaj pentru agent.

    ```text
    I need a laptop
    ```

![Testați agentul](../../../../../translated_images/9.4_01_TestAgent_RequestDevice_Yes.e73a5076dcd7179901dc0536624a039e372e405a6aac7ab89a632ce81bacdc2e.ro.png)

1. Agentul declanșează **Available devices** și răspunde cu lista dispozitivelor disponibile. Vom introduce următorul răspuns la întrebarea dacă dorim să solicităm un dispozitiv.

    ```text
    Yes
    ```

![Da](../../../../../translated_images/9.4_02_RequestDevice_Yes.25c34743bc168fde33f91743316e7bad87ee0e47150c93e9b82c4662404dcaba.ro.png)

1. Observați cum agentul a invocat **Request device** conform instrucțiunilor agentului și cum cardul adaptiv este acum afișat în mesajul agentului.

Selectați dispozitivul **Surface Laptop 15** și adăugați următorul comentariu.

    ```text
    I need 16GB of RAM please
    ```

![Selectați dispozitivul și introduceți comentariul](../../../../../translated_images/9.4_03_SelectDeviceAndEnterComment.570ea590309bf97edc40c6f7b53dbdc1174365860d8e8a4c32cfb7f1837621c2.ro.png)

1. Derulați în jos până vedeți butonul **Submit Request** și selectați-l pentru a trimite cardul adaptiv agentului.

![Trimiteți cererea](../../../../../translated_images/9.4_04_SubmitRequest.ce3f4f44b90243a18dbfb401548b9b3cefd3ea17d8293a1bc3377323e3449da9.ro.png)

1. Selectați **Allow** pentru ca agentul să utilizeze acreditările dvs. pentru autentificarea conexiunii celor două acțiuni ale conectorului.

![Permiteți](../../../../../translated_images/9.4_05_SelectAllow.f7b5bda068fbaee83dcb1cff03a52c946fb4d879137c55f4e5f9eb3953985e0e.ro.png)

1. Agentul va afișa apoi mesajul de confirmare care include modelul selectat, urmat de redirecționarea către subiectul **End of Conversation**. Super!

![Cerere trimisă](../../../../../translated_images/9.4_06_RequestSubmitted.1d4d2e9afbc222a5ba79a4c254e7b2364d6eafc1a200ad6ac0aa142f9f10642d.ro.png)

1. Selectați **Yes** pentru a verifica restul subiectului **End of Conversation**.

![Selectați Da](../../../../../translated_images/9.4_07_RedirectNode.e7b1390e4eafe8c2c815fc8ce7fdda56617d9fbeccb0d59423ad2899a8e5f897.ro.png)

1. Apoi, evaluați experiența selectând oricare dintre stelele din cardul de evaluare.

Agentul va continua apoi la ultimul nod **Question** din subiectul **End of Conversation**. Selectați **No**.

![Subiectul End of Conversation](../../../../../translated_images/9.4_08_EndOfConversation.b35507f7f561633c0cb3b6c15dc007ae4197a72d58afd8ae616bea439bd6e148.ro.png)

1. Subiectul se va încheia, iar un mesaj final va fi afișat în panoul de testare.

![Subiectul End of Conversation](../../../../../translated_images/9.4_09_EndOfConversation.438891b82e322b8a2648533200fbcd01c660ab049223b0920cdd0fbfcdeeb888.ro.png)

1. Verificați Inbox-ul contului dvs. de e-mail pentru a revizui e-mailul trimis managerului de către fluxul agentului. Puteți vedea detaliile dispozitivului selectat și nota introdusă în cardul adaptiv.

![E-mail primit](../../../../../translated_images/9.4_10_ReviewEmailMessageWithComment.b0138b0bb9d08aacbd8bbb02fdb633a6796b4131cf8d83212adeabaa1ce04a18.ro.png)

1. Faceți clic pe hyperlink, iar browserul ar trebui să încarce elementul SharePoint al dispozitivului. Super!

![Faceți clic pe hyperlink în e-mail](../../../../../translated_images/9.4_11_SelectLinkInEmail.2179f17165b61ba1e8aee68e8de4c752d64b0780ad86e0fe9054580d9c24e208.ro.png)

#### 9.4.2 Solicitați un dispozitiv și nu introduceți un comentariu în cardul adaptiv

Acum să testăm scenariul în care nu se introduce un comentariu.

1. Repetați aceleași pași:

   - **Reîmprospătați** panoul de testare și selectați pictograma **activity map**
   - Introduceți mesajul, `I need a laptop`
   - Răspundeți cu `Yes` la întrebarea despre solicitarea unui dispozitiv

![Solicitați un dispozitiv](../../../../../translated_images/9.4_12_RequestDevice_Yes.1e369b8a52547fade4b84a4e36b399ee0692c6edbaa778ba90fe9c15cae75c5c.ro.png)

1. De această dată selectați **Surface Laptop 13** ca dispozitiv și nu introduceți un comentariu.

![Selectați dispozitivul](../../../../../translated_images/9.4_13_SelectDevice.d9ad15d17de3f06fd948bd529f116f7c05bedf79c016180d8a1dd7e378322b0e.ro.png)

1. **Trimiteți** cererea selectând butonul **Submit Request**.

![Trimiteți cererea](../../../../../translated_images/9.4_14_SubmitRequest.a783ad8460bfb4485cfd2e97db2c065d9d6bf803279e3bd1569fe3e93548a578.ro.png)

1. De această dată, e-mailul primit în Inbox-ul dvs. va afișa **None** ca și comentariu.

![E-mail primit](../../../../../translated_images/9.4_15_ReviewEmailMessage.137f35152c9da4b4a02bebec5f0cc9e55cfa25679770ace003aa19482ed0f3eb.ro.png)

#### 9.4.3 Nu solicitați un dispozitiv

Să testăm scenariul final, care este să nu solicitați un dispozitiv, iar subiectul **Goodbye** ar trebui să fie invocat conform instrucțiunilor agentului.

1. Repetați aceleași pași:

   - **Reîmprospătați** panoul de testare și selectați pictograma **activity map**
   - Introduceți mesajul, `I need a laptop`
   - De această dată răspundeți cu `No` la întrebarea despre solicitarea unui dispozitiv

![Testați agentul](../../../../../translated_images/9.4_16_TestAgent_RequestDevice_No.85f205968f1d4083f20cc890a707748f8e06c01a19536cd299a13bdde2350de7.ro.png)

1. Agentul a invocat subiectul **Goodbye**, iar întrebarea definită în subiect este adresată.

![Subiectul Goodbye invocat](../../../../../translated_images/9.4_17_Goodbye.05ee598a987237e02866647a9699b0efa7ac58d1f448497f956af2ee815cb961.ro.png)

## ✅ Misiune Îndeplinită

Felicitări! 👏🏻 Ați învățat cum să construiți fluxul agentului și să-l adăugați la subiectul nostru existent **Request device**, și cum să redirecționați agentul către un alt subiect.

Acesta este sfârșitul **Lab 09 - Add an agent flow for automation and enhance topic capabilities**, selectați linkul de mai jos pentru a trece la lecția următoare. Vom extinde cazul de utilizare din acest laborator în lecția următoare.

⏭️ [Treceți la lecția **Add Event Triggers - Enable autonomous agent capabilities**](../10-add-event-triggers/README.md)

## 📚 Resurse Tactice

🔗 [Introducing agent flows: Transforming automation with AI-first workflows](https://www.microsoft.com/microsoft-copilot/blog/copilot-studio/introducing-agent-flows-transforming-automation-with-ai-first-workflows/)

🔗 [Agent flows overview](https://learn.microsoft.com/microsoft-copilot-studio/flows-overview?WT.mc_id=power-172621-ebenitez)

🔗 [Use agent flows with your agent](https://learn.microsoft.com/microsoft-copilot-studio/advanced-flow?WT.mc_id=power-172621-ebenitez)

🔗 [List of functions in the reference guide](https://learn.microsoft.com/azure/logic-apps/workflow-definition-language-functions-reference?WT.mc_id=power-172621-ebenitez)

📺 [Agent Flows in Copilot Studio](https://www.youtube.com/watch?v=VJTKyk3Pr7s)

<img src="https://m365-visitor-stats.azurewebsites.net/agent-academy/recruit/09-add-an-agent-flow" alt="Analytics" />

---

**Declinare de responsabilitate**:  
Acest document a fost tradus folosind serviciul de traducere AI [Co-op Translator](https://github.com/Azure/co-op-translator). Deși ne străduim să asigurăm acuratețea, vă rugăm să fiți conștienți că traducerile automate pot conține erori sau inexactități. Documentul original în limba sa natală ar trebui considerat sursa autoritară. Pentru informații critice, se recomandă traducerea profesională realizată de oameni. Nu ne asumăm responsabilitatea pentru neînțelegeri sau interpretări greșite care pot apărea din utilizarea acestei traduceri.