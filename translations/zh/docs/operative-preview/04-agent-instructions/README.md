<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "66d1f5ea2cc33dc690a5fc4a8e2a666e",
  "translation_date": "2025-10-18T03:18:39+00:00",
  "source_file": "docs/operative-preview/04-agent-instructions/README.md",
  "language_code": "zh"
}
-->
# 🕵️‍♂️ 任务 04：编写代理指令

--8<-- "disclaimer.md"

## 🕵️‍♂️ 代号：`秘密指令行动`

> **⏱️ 行动时间窗口：** `~45分钟`

## 🎯 任务简报

特工，你的下一个任务是**秘密指令行动**——掌握通过精准指令和描述进行代理沟通和控制的艺术。

如果你选择接受任务，你将学习编写清晰、可操作的指令的关键技能，指导你的代理做出智能决策，使用正确的工具和知识来源，并与其他代理无缝协作。你还将掌握撰写高质量描述的技巧，帮助代理理解其资源，并以极高的精准度响应用户查询。

将此任务视为你在代理心理学和行为改造方面的高级培训。就像一名现场特工需要明确的任务参数才能成功一样，你的AI代理也需要精心设计的指令，以清晰、精准地行动，并在现实场景中提供有价值的情报。

---

## 🔎 目标

完成此任务后，你将能够：

- **指令掌握**：理解在Copilot Studio中编写代理指令的艺术和科学  
- **战略指导**：学习如何指导代理使用工具、知识来源，并与其他代理协作  
- **操作清晰**：确保你的代理以精准、透明和高效的方式行动  

---

## 📝 编写代理指令

编写有效的代理指令是实现代理行为成功的关键。指令用于帮助代理：

- 决定使用哪个工具、主题或知识来源来处理用户查询或自主触发的任务  
- 根据可用的上下文填写工具输入  
- 生成对最终用户的响应  

### 指令的工作原理

指令必须基于为你的代理配置的工具、主题和知识来源。代理无法根据其未拥有的资源执行指令。例如，如果你指示代理搜索网站FAQ，你必须将该FAQ添加为知识来源。

你可以在指令中使用`/`引用特定的工具、主题、变量或Power Fx表达式。这有助于代理准确地知道何时使用什么。

### 指令中应包含的内容

- 在需要指导代理选择时，尤其是可能存在歧义的情况下，添加指令。  
- 使用指令设置限制，例如限制主题或指定响应格式。  
- 提供填写工具输入的提示，例如：“在帮助用户撰写电子邮件时，使用潜在客户的联系字段中的电子邮件地址。”  
- 指定响应的格式，例如：“始终以表格格式提供订单状态的响应。”  
- 使用约束限制代理的行为，例如：“仅响应有关员工福利的请求。”  

### 实际示例

- “仅在问题与工作时间、预约或账单无关时使用FAQ文档。”  
- “仅使用工单创建主题来创建工单；对于其他与问题修复相关的请求，请使用故障排除主题。”  
- “始终以表格格式提供订单状态的响应。”  

### 测试和优化

- 编辑指令后，使用测试面板验证代理行为。  
- 根据需要更新并发布更改。  

### 高级指导

- 使用编号或项目符号列出指令，并指定必须按顺序遵循。  
- 使用Markdown格式提高可读性，并帮助生成式AI处理你的指令。  
- 如果希望代理非常具体，可以考虑为该用例创建一个主题。  
- 在指令中使用工具和主题的确切名称，以避免混淆。  

### 安全性和内容审核

- 限制代理在引用知识来源时应使用的工具。  
- 限制工具的参数使用（例如，仅向指定的个人列表发送电子邮件）。  
- 使用指令防止不必要的行为或内容过滤问题。  

---

## ✍️ 为工具、主题和代理编写描述

高质量的描述对于生成式编排至关重要。你的代理使用这些描述来选择正确的工具、主题和代理，以响应用户查询和触发器。请遵循以下最佳实践：

- **使用简单直接的语言**：避免使用术语、俚语或过于技术性的词汇。使用主动语态和现在时。  
- **具体且相关**：包括与功能和用户意图相关的关键词。确保描述清楚地区分类似的工具或主题，以避免歧义。  
- **简洁且信息丰富**：将描述限制在一到两句话内。总结工具、主题或代理的功能及其对用户的益处。  
- **使用独特且描述性的名称**：避免使用通用名称。例如，使用“明日天气预报”而不是简单的“天气”。  
- **列出操作或注意事项**：在描述多个功能或步骤时，使用项目符号或编号列表以提高清晰度。  
- **测试重叠**：如果多个主题有相似的描述，代理可能会同时调用它们。测试并修订以防止重叠。  

!!! example "好的和不好的描述示例"
    **好的：** 此主题提供世界任何地点的次日天气信息，包括温度。不提供当天的实时天气信息。  
    **不好的：** 此工具可以回答问题。*(过于模糊)*  

---

## 🛠️ 指令和描述的最佳实践

为了使你的指令和描述真正有效，请牢记以下原则：

- 使用主动语态和现在时（例如，“此工具提供天气信息”）。  
- 除非针对特定受众需要，否则避免使用术语、俚语或不必要的技术术语。  
- 使用项目符号或编号列表分隔操作、功能或注意事项。  
- 包括与用户意图和工具或主题功能匹配的关键词。  
- 确保类似资源具有不同的名称和描述，以避免混淆和重叠。  

---

## 🗂️ 示例指令结构

在编写指令时，可以考虑以下结构以确保清晰和完整：

1. **概述**：简要描述代理的任务和角色  
2. **流程步骤**：列出代理应遵循的主要步骤  
3. **协作点**：指明何时调用其他代理或使用特定工具  
4. **安全性和内容审核**：包括任何合规性或安全要求  
5. **反馈循环**：指定代理应如何收集反馈或升级问题  

---

## 🧪 实验室：编写代理指令

*实验室内容即将推出...*

---

## 🎉 任务完成

任务 04 已完成！你现在已经掌握了：

✅ **指令掌握**：学会如何编写清晰、可操作的代理指令  
✅ **战略指导**：指导代理有效使用工具并进行协作  
✅ **操作清晰**：确保代理以精准和透明的方式行动  

接下来是 [任务 05](../05-agent-responses/README.md)：定制代理响应以实现最大化影响。

---

## 📚 战术资源

📖 [Microsoft Copilot Studio - 编写指令](https://learn.microsoft.com/microsoft-copilot-studio/authoring-instructions)  
📖 [生成模式指导](https://learn.microsoft.com/microsoft-copilot-studio/guidance/generative-mode-guidance)

---

**免责声明**：  
本文档使用AI翻译服务[Co-op Translator](https://github.com/Azure/co-op-translator)进行翻译。尽管我们努力确保翻译的准确性，但请注意，自动翻译可能包含错误或不准确之处。原始语言的文档应被视为权威来源。对于关键信息，建议使用专业人工翻译。我们不对因使用此翻译而产生的任何误解或误读承担责任。